import{Q as mi,r as h,t as xi,c as hi,j as e,V as Fa,R as Da,A as Ta,C as Aa,X as ps,T as La,D as Ea,a as dt,P as ui,b as Ia,d as pi,e as ji,f as gi,u as Z,g as ne,v as Ma,S as Ra,h as fi,i as $a,k as Ni,F as vi,l as yi,L as bi,m as wi,n as Ci,z as T,o as Ge,p as Pe,q as _e,M as at,s as oe,w as ke,x as je,y as Os,G as Ye,B as Oa,E as da,U as Vs,H as Pt,I as Xs,J as oa,K as rt,N as Si,O as it,W as os,Y as Va,Z as Vt,_ as Pi,$ as za,a0 as Bs,a1 as Ua,a2 as ki,a3 as qa,a4 as Ba,a5 as Ka,a6 as Ga,a7 as Ke,a8 as _a,a9 as Fi,aa as Qa,ab as Wa,ac as Di,ad as Ti,ae as Ya,af as He,ag as Ai,ah as Ss,ai as Li,aj as Ei,ak as kt,al as Ks,am as ze,an as lt,ao as Ha,ap as Ja,aq as Xa,ar as Ii,as as nt,at as Ft,au as Zs,av as zs,aw as et,ax as Ie,ay as Ps,az as zt,aA as Za,aB as er,aC as Mi,aD as sr,aE as Ri,aF as tr,aG as $i,aH as ar,aI as Oi,aJ as rr,aK as ir,aL as Vi,aM as zi,aN as lr,aO as Ui,aP as qi,aQ as ot,aR as Qe,aS as nr,aT as cr,aU as Bi,aV as dr,aW as or,aX as Ki,aY as Gi,aZ as _i,a_ as mr,a$ as xr,b0 as hr,b1 as ur,b2 as pr,b3 as jr,b4 as Qi,b5 as Wi,b6 as Yi,b7 as gr,b8 as Hi,b9 as fr,ba as ma,bb as Nr,bc as Ut,bd as vr,be as bs,bf as xa,bg as Is,bh as qt,bi as Xe,bj as Es,bk as Ji,bl as Xi,bm as yr,bn as Zi,bo as el,bp as Nt,bq as Ms,br as Qs,bs as Ds,bt as sl,bu as xt,bv as Ws,bw as Ys,bx as Ts,by as tl,bz as ha,bA as ua,bB as al,bC as rl,bD as il,bE as ll,bF as nl,bG as cl,bH as br,bI as dl,bJ as st,bK as wr,bL as he,bM as ol,bN as Bt,bO as Cr,bP as ml,bQ as xl,bR as Sr,bS as hl,bT as ul,bU as Pr,bV as pl,bW as Rs,bX as jl,bY as kr,bZ as gl,b_ as fl,b$ as Kt,c0 as mt,c1 as Nl,c2 as vl,c3 as pt,c4 as yl,c5 as Fr,c6 as bl,c7 as wl,c8 as Cl,c9 as Ue,ca as Dr,cb as Sl,cc as Pl,cd as kl,ce as Gt,cf as Fl,cg as Dl,ch as Tl,ci as Al,cj as Ll,ck as El,cl as Il,cm as Ml,cn as Rl,co as $l,cp as Ol,cq as pa,cr as ja,cs as Vl,ct as zl,cu as Ul,cv as ql,cw as ga,cx as de,cy as Bl}from"./vendor-CmBZVH5K.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))r(d);new MutationObserver(d=>{for(const n of d)if(n.type==="childList")for(const x of n.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&r(x)}).observe(document,{childList:!0,subtree:!0});function a(d){const n={};return d.integrity&&(n.integrity=d.integrity),d.referrerPolicy&&(n.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?n.credentials="include":d.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(d){if(d.ep)return;d.ep=!0;const n=a(d);fetch(d.href,n)}})();var Kl={};const Tr=()=>typeof window<"u"?window.location.origin:Kl.API_URL||"http://localhost:5000",ee=async(s,t,a)=>{const d=`${Tr()}${t}`,n=await fetch(d,{method:s,headers:{"Content-Type":"application/json"},credentials:"include",body:a?JSON.stringify(a):void 0});if(!n.ok){const x=await n.json();throw new Error(x.message||"API request failed")}return n},Ar=async({queryKey:s})=>{const t=Tr(),a=s[0],r=await fetch(`${t}${a}`,{credentials:"include"});if(!r.ok){const d=await r.json();throw new Error(d.message||"Query failed")}return r.json()},Ce=new mi({defaultOptions:{queries:{queryFn:Ar,refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),Gl=1,_l=1e6;let It=0;function Ql(){return It=(It+1)%Number.MAX_SAFE_INTEGER,It.toString()}const Mt=new Map,fa=s=>{if(Mt.has(s))return;const t=setTimeout(()=>{Mt.delete(s),tt({type:"REMOVE_TOAST",toastId:s})},_l);Mt.set(s,t)},Wl=(s,t)=>{switch(t.type){case"ADD_TOAST":return{...s,toasts:[t.toast,...s.toasts].slice(0,Gl)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(a=>a.id===t.toast.id?{...a,...t.toast}:a)};case"DISMISS_TOAST":{const{toastId:a}=t;return a?fa(a):s.toasts.forEach(r=>{fa(r.id)}),{...s,toasts:s.toasts.map(r=>r.id===a||a===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(a=>a.id!==t.toastId)}}},jt=[];let gt={toasts:[]};function tt(s){gt=Wl(gt,s),jt.forEach(t=>{t(gt)})}function Be({...s}){const t=Ql(),a=d=>tt({type:"UPDATE_TOAST",toast:{...d,id:t}}),r=()=>tt({type:"DISMISS_TOAST",toastId:t});return tt({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:d=>{d||r()}}}),{id:t,dismiss:r,update:a}}function me(){const[s,t]=h.useState(gt);return h.useEffect(()=>(jt.push(t),()=>{const a=jt.indexOf(t);a>-1&&jt.splice(a,1)}),[s]),{...s,toast:Be,dismiss:a=>tt({type:"DISMISS_TOAST",toastId:a})}}function C(...s){return xi(hi(s))}function _t(s){const t=typeof s=="string"?parseFloat(s):s;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}function $s(s){const t=typeof s=="string"?new Date(s):s;return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(t)}const Yl=ui,Lr=h.forwardRef(({className:s,...t},a)=>e.jsx(Fa,{ref:a,className:C("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...t}));Lr.displayName=Fa.displayName;const Hl=dt("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Er=h.forwardRef(({className:s,variant:t,...a},r)=>e.jsx(Da,{ref:r,className:C(Hl({variant:t}),s),...a}));Er.displayName=Da.displayName;const Jl=h.forwardRef(({className:s,...t},a)=>e.jsx(Ta,{ref:a,className:C("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...t}));Jl.displayName=Ta.displayName;const Ir=h.forwardRef(({className:s,...t},a)=>e.jsx(Aa,{ref:a,className:C("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...t,children:e.jsx(ps,{className:"h-4 w-4"})}));Ir.displayName=Aa.displayName;const Mr=h.forwardRef(({className:s,...t},a)=>e.jsx(La,{ref:a,className:C("text-sm font-semibold",s),...t}));Mr.displayName=La.displayName;const Rr=h.forwardRef(({className:s,...t},a)=>e.jsx(Ea,{ref:a,className:C("text-sm opacity-90",s),...t}));Rr.displayName=Ea.displayName;function Xl(){const{toasts:s}=me();return e.jsxs(Yl,{children:[s.map(function({id:t,title:a,description:r,action:d,...n}){return e.jsxs(Er,{...n,children:[e.jsxs("div",{className:"grid gap-1",children:[a&&e.jsx(Mr,{children:a}),r&&e.jsx(Rr,{children:r})]}),d,e.jsx(Ir,{})]},t)}),e.jsx(Lr,{})]})}const $r=pi,Zl=ji,en=gi,Or=h.forwardRef(({className:s,sideOffset:t=4,...a},r)=>e.jsx(Ia,{ref:r,sideOffset:t,className:C("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",s),...a}));Or.displayName=Ia.displayName;const ea=h.createContext(null);function sn({children:s}){const{data:t,isLoading:a,error:r}=Z({queryKey:["/api/auth/session"],queryFn:async()=>{try{const l=await ee("GET","/api/auth/session");if(!l.ok){if(l.status===401)return null;throw new Error("Failed to fetch session")}return await l.json()}catch(l){return console.error("Error fetching session:",l),null}},retry:1,refetchOnMount:!0,refetchOnReconnect:!0,refetchOnWindowFocus:!0,staleTime:18e5,gcTime:864e5}),d=ne({mutationFn:async({email:l})=>{const v=await ee("POST","/api/auth/request-otp",{email:l});if(!v.ok){const j=await v.json();throw new Error(j.message||"Failed to send OTP")}return await v.json()},onSuccess:l=>{Be({title:"OTP Sent",description:"Check your email for the verification code."})},onError:l=>{Be({title:"Error",description:l.message,variant:"destructive"})}}),n=ne({mutationFn:async({email:l,otp:v})=>{const j=await ee("POST","/api/auth/verify-otp",{email:l,otp:v});if(!j.ok){const g=await j.json();throw new Error(g.message||"Invalid verification code")}return await j.json()},onSuccess:l=>{Ce.setQueryData(["/api/auth/session"],l),Be({title:"Login Successful",description:"You are now logged in."})},onError:l=>{Be({title:"Verification Failed",description:l.message,variant:"destructive"})}}),x=ne({mutationFn:async()=>{const l=await ee("POST","/api/auth/logout");if(!l.ok)throw new Error("Failed to log out");return await l.json()},onSuccess:()=>{Ce.setQueryData(["/api/auth/session"],null),Ce.invalidateQueries(),Be({title:"Logged Out",description:"You have been logged out successfully."})},onError:l=>{Be({title:"Logout Failed",description:l.message,variant:"destructive"})}}),m=ne({mutationFn:async l=>{if(!t)throw new Error("Not authenticated");const v=await ee("PATCH",`/api/users/${t.id}`,l);if(!v.ok){const j=await v.json();throw new Error(j.message||"Failed to update profile")}return await v.json()},onSuccess:l=>{Ce.setQueryData(["/api/auth/session"],l),Be({title:"Profile Updated",description:"Your profile has been updated successfully."})},onError:l=>{Be({title:"Update Failed",description:l.message,variant:"destructive"})}}),{data:u,isLoading:i}=Z({queryKey:["/api/auth/impersonation-status"],queryFn:async()=>{if(!t)return{isImpersonating:!1,originalUser:null};try{const l=await ee("GET","/api/auth/impersonation-status");if(!l.ok){if(l.status===401)return{isImpersonating:!1,originalUser:null};throw new Error("Failed to fetch impersonation status")}return await l.json()}catch(l){return console.error("Error fetching impersonation status:",l),{isImpersonating:!1,originalUser:null}}},enabled:!!t}),o=ne({mutationFn:async l=>{const v=await ee("POST",`/api/auth/impersonate/${l}`);if(!v.ok){const j=await v.json();throw new Error(j.message||"Failed to impersonate user")}return await v.json()},onSuccess:l=>{Ce.setQueryData(["/api/auth/session"],l.user),Ce.invalidateQueries({queryKey:["/api/auth/impersonation-status"]}),Ce.invalidateQueries({queryKey:["/api/vendors"]}),Be({title:"Impersonation Started",description:`You are now viewing the application as ${l.user.email}`})},onError:l=>{Be({title:"Impersonation Failed",description:l.message,variant:"destructive"})}}),c=ne({mutationFn:async()=>{const l=await ee("POST","/api/auth/logout");if(!l.ok)throw new Error("Failed to end impersonation");return await l.json()},onSuccess:l=>{l.user&&Ce.setQueryData(["/api/auth/session"],l.user),Ce.invalidateQueries({queryKey:["/api/auth/impersonation-status"]}),Ce.invalidateQueries({queryKey:["/api/vendors"]}),Be({title:"Impersonation Ended",description:"You have returned to your original account."})},onError:l=>{Be({title:"Failed to End Impersonation",description:l.message,variant:"destructive"})}});return e.jsx(ea.Provider,{value:{user:t,isLoading:a,isAuthenticated:!!t,error:r,impersonationStatus:u||null,isLoadingImpersonationStatus:i,requestOtpMutation:d,verifyOtpMutation:n,logoutMutation:x,completeProfileMutation:m,impersonateUserMutation:o,endImpersonationMutation:c},children:s})}function qe(){const s=h.useContext(ea);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s}const tn=h.createContext({theme:"light",setTheme:()=>{}}),an=({children:s})=>{const[t,a]=h.useState("light");return h.useEffect(()=>{const r=localStorage.getItem("theme");a(r||"light")},[]),h.useEffect(()=>{document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(t),localStorage.setItem("theme",t)},[t]),e.jsx(tn.Provider,{value:{theme:t,setTheme:a},children:s})},Vr=h.createContext({isVendorStore:!1,vendor:null,domain:null,loading:!0,error:null});function Fs(){return h.useContext(Vr)}const rn=s=>{const t={default:{primary:"#4f46e5",secondary:"#8b5cf6",accent:"#f97316",background:"#ffffff",text:"#171717"},ocean:{primary:"#0891b2",secondary:"#0ea5e9",accent:"#14b8a6",background:"#f8fafc",text:"#0f172a"},forest:{primary:"#15803d",secondary:"#059669",accent:"#ca8a04",background:"#f8fafc",text:"#1e293b"},sunset:{primary:"#db2777",secondary:"#e11d48",accent:"#f59e0b",background:"#ffffff",text:"#171717"},monochrome:{primary:"#404040",secondary:"#525252",accent:"#737373",background:"#fafafa",text:"#171717"},custom:{primary:"#4f46e5",secondary:"#8b5cf6",accent:"#f97316",background:"#ffffff",text:"#171717"}},a=t[s]||t.default;return`
    :root {
      --color-primary: ${a.primary};
      --color-primary-foreground: white;
      --color-secondary: ${a.secondary};
      --color-secondary-foreground: white;
      --color-accent: ${a.accent};
      --color-accent-foreground: white;
      --color-background: ${a.background};
      --color-foreground: ${a.text};
    }
  `},ln=s=>{if(!s)return"";const{headingFont:t,bodyFont:a,fontSize:r,useCustomFonts:d}=s;return`
    :root {
      --font-heading: var(--font-${t}, sans-serif);
      --font-body: var(--font-${a}, sans-serif);
      --font-size-base: ${r}px;
    }
    
    body {
      font-family: var(--font-body);
      font-size: var(--font-size-base);
    }
    
    h1, h2, h3, h4, h5, h6 {
      font-family: var(--font-heading);
    }
  `},nn=s=>{const t={default:`
      /* Default theme styles */
      .store-header {
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      .product-card {
        border-radius: 0.5rem;
        transition: transform 0.2s ease;
      }
      .product-card:hover {
        transform: translateY(-4px);
      }
    `,elegant:`
      /* Elegant theme styles */
      .store-header {
        border-bottom: 1px solid rgba(0,0,0,0.1);
      }
      .product-card {
        border-radius: 0.25rem;
        box-shadow: 0 4px 6px rgba(0,0,0,0.05);
      }
      .btn {
        border-radius: 0.25rem;
      }
    `,bold:`
      /* Bold theme styles */
      .store-header {
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      }
      .product-card {
        border-radius: 0.75rem;
        box-shadow: 0 10px 15px rgba(0,0,0,0.1);
      }
      .btn {
        border-radius: 0.5rem;
        font-weight: bold;
      }
    `,vintage:`
      /* Vintage theme styles */
      .store-header {
        border-bottom: 2px solid var(--color-accent);
      }
      .product-card {
        border-radius: 0;
        border: 1px solid rgba(0,0,0,0.1);
      }
      .btn {
        border-radius: 0;
      }
    `,modern:`
      /* Modern theme styles */
      .store-header {
        backdrop-filter: blur(10px);
        background-color: rgba(255,255,255,0.8);
      }
      .product-card {
        border-radius: 1rem;
        overflow: hidden;
      }
      .btn {
        border-radius: 2rem;
      }
    `};return t[s]||t.default};function cn({children:s}){const[t,a]=h.useState(!1),[r,d]=h.useState(null),[n,x]=h.useState(null),[m,u]=h.useState(!0),[i,o]=h.useState(null);h.useEffect(()=>((async()=>{try{u(!0);const j=await ee("GET","/api/store/current");if(j.status===404){a(!1),u(!1);return}if(!j.ok)throw new Error("Failed to fetch store information");const g=await j.json();g.isVendorStore&&g.vendor?(a(!0),d(g.vendor),x(g.domain),c(g.vendor)):a(!1)}catch(j){console.error("Error fetching store information:",j),o(j instanceof Error?j.message:"An unknown error occurred")}finally{u(!1)}})(),()=>{l()}),[]);const c=v=>{l(),document.documentElement.dataset.vendorTheme=v.storeTheme||"default";const j=document.createElement("style");j.id="vendor-theme-css";let g="";g+=rn(v.colorPalette||"default"),g+=ln(v.fontSettings),g+=nn(v.storeTheme||"default"),v.customCss&&(g+=v.customCss),j.textContent=g,document.head.appendChild(j)},l=()=>{const v=document.getElementById("vendor-theme-css");v&&v.remove(),document.documentElement.dataset.vendorTheme&&delete document.documentElement.dataset.vendorTheme};return e.jsx(Vr.Provider,{value:{isVendorStore:t,vendor:r,domain:n,loading:m,error:i},children:s})}function dn(){const{toast:s}=me(),{data:t,isLoading:a,error:r,refetch:d}=Z({queryKey:["/api/cart"],queryFn:Ar({on401:"returnNull"})}),n=ne({mutationFn:async c=>await(await ee("POST","/api/cart/add",c)).json(),onSuccess:()=>{s({title:"Added to cart",description:"Item has been added to your cart"}),Ce.invalidateQueries({queryKey:["/api/cart"]})},onError:c=>{s({title:"Error",description:"Failed to add item to cart",variant:"destructive"}),console.error(c)}}),x=ne({mutationFn:async({itemId:c,quantity:l})=>await(await ee("PUT",`/api/cart/items/${c}`,{quantity:l})).json(),onSuccess:()=>{Ce.invalidateQueries({queryKey:["/api/cart"]})},onError:c=>{s({title:"Error",description:"Failed to update quantity",variant:"destructive"}),console.error(c)}}),m=ne({mutationFn:async c=>await(await ee("DELETE",`/api/cart/items/${c}`)).json(),onSuccess:()=>{s({title:"Removed from cart",description:"Item has been removed from your cart"}),Ce.invalidateQueries({queryKey:["/api/cart"]})},onError:c=>{s({title:"Error",description:"Failed to remove item from cart",variant:"destructive"}),console.error(c)}}),u=ne({mutationFn:async()=>await(await ee("DELETE","/api/cart")).json(),onSuccess:()=>{s({title:"Cart cleared",description:"All items have been removed from your cart"}),Ce.invalidateQueries({queryKey:["/api/cart"]})},onError:c=>{s({title:"Error",description:"Failed to clear cart",variant:"destructive"}),console.error(c)}}),i=(c,l)=>{l<1?m.mutate(c):x.mutate({itemId:c,quantity:l})},o=()=>{if(!t)return{subtotal:"0.00",tax:"0.00",total:"0.00",itemCount:0};const c=t.items.reduce((l,v)=>l+v.quantity,0);return{subtotal:t.subtotal,tax:t.tax,total:t.total,itemCount:c}};return{cart:t,isLoading:a,error:r,addToCart:n.mutate,updateQuantity:i,removeItem:m.mutate,clearCart:u.mutate,getCartSummary:o,isAddingToCart:n.isPending,isUpdatingQuantity:x.isPending,isRemovingItem:m.isPending,isClearingCart:u.isPending,refetchCart:d}}const Na="univendor_cart",Rt=s=>{const t=s.reduce((n,x)=>n+parseFloat(x.price)*x.quantity,0),r=t*.08,d=t+r;return{subtotal:t.toFixed(2),tax:r.toFixed(2),total:d.toFixed(2),itemCount:s.reduce((n,x)=>n+x.quantity,0)}};function on(){const[s,t]=h.useState({items:[],subtotal:"0.00",tax:"0.00",total:"0.00"}),[a,r]=h.useState(!0);h.useEffect(()=>{(()=>{try{const c=localStorage.getItem(Na);if(c){const l=JSON.parse(c);t(l)}}catch(c){console.error("Failed to load cart from localStorage:",c)}finally{r(!1)}})()},[]),h.useEffect(()=>{a||localStorage.setItem(Na,JSON.stringify(s))},[s,a]);const d=o=>{t(c=>{const l=c.items.findIndex(b=>b.productId===o.productId&&b.variant===o.variant);let v;l>=0?(v=[...c.items],v[l]={...v[l],quantity:v[l].quantity+o.quantity}):v=[...c.items,{...o,id:Ma()}];const{subtotal:j,tax:g,total:k}=Rt(v);return{items:v,subtotal:j,tax:g,total:k}})},n=(o,c)=>{if(c<1){x(o);return}t(l=>{const v=l.items.map(b=>b.id===o?{...b,quantity:c}:b),{subtotal:j,tax:g,total:k}=Rt(v);return{items:v,subtotal:j,tax:g,total:k}})},x=o=>{t(c=>{const l=c.items.filter(k=>k.id!==o),{subtotal:v,tax:j,total:g}=Rt(l);return{items:l,subtotal:v,tax:j,total:g}})};return{cart:s,isLoading:a,addToCart:d,updateQuantity:n,removeItem:x,clearCart:()=>{t({items:[],subtotal:"0.00",tax:"0.00",total:"0.00"})},getCartSummary:()=>{const o=s.items.reduce((c,l)=>c+l.quantity,0);return{subtotal:s.subtotal,tax:s.tax,total:s.total,itemCount:o}},getFullCart:()=>s}}function mn(s){return{productId:s.productId,quantity:s.quantity,variant:s.variant,vendorId:s.vendorId}}const zr=h.createContext(null);function xn({children:s}){const[t,a]=h.useState(!1),[r,d]=h.useState(null),n=qe()||{user:null,isAuthenticated:!1,isLoading:!0},{user:x,isAuthenticated:m,isLoading:u}=n;let i,o;try{i=dn()}catch(O){console.error("Error initializing server cart:",O),d(O instanceof Error?O:new Error("Failed to initialize server cart"))}try{o=on()}catch(O){console.error("Error initializing local cart:",O),d(O instanceof Error?O:new Error("Failed to initialize local cart"))}const{toast:c}=me();h.useEffect(()=>{!o||!i||(m&&!u&&o.cart&&o.cart.items&&o.cart.items.length>0&&(async()=>{try{for(const N of o.cart.items)await i.addToCart(mn(N));o.clearCart(),c({title:"Cart Updated",description:"Your cart items have been saved to your account"})}catch(N){console.error("Error merging carts:",N),c({title:"Error",description:"Failed to merge your cart items with your account",variant:"destructive"})}})(),a(!0))},[m,u,o,i,c]);const l={items:[],subtotal:"0.00",tax:"0.00",total:"0.00"},v=m&&i?i.cart||l:o?o.cart:l,j=!t||(m?i?i.isLoading:!0:o?o.isLoading:!0),g=O=>{try{if(m&&i)i.addToCart(O);else if(o){const N={productId:O.productId,name:O.name,price:O.price,quantity:O.quantity,imageUrl:O.imageUrl||null,variant:O.variant||null,colorHex:O.colorHex||null,size:O.size||null,vendorId:O.vendorId};o.addToCart(N),c({title:"Added to cart",description:"Item has been added to your cart"})}else console.error("Neither server cart nor local cart available"),c({title:"Error",description:"Unable to add item to cart",variant:"destructive"})}catch(N){console.error("Error adding to cart:",N),c({title:"Error",description:"Failed to add item to cart",variant:"destructive"})}},k=(O,N)=>{try{m&&i?i.updateQuantity(O,N):o?o.updateQuantity(O,N):console.error("Neither server cart nor local cart available")}catch(R){console.error("Error updating quantity:",R)}},b=O=>{try{m&&i?i.removeItem(O):o?(o.removeItem(O),c({title:"Removed from cart",description:"Item has been removed from your cart"})):console.error("Neither server cart nor local cart available")}catch(N){console.error("Error removing item:",N),c({title:"Error",description:"Failed to remove item from cart",variant:"destructive"})}},y=()=>{try{m&&i?i.clearCart():o?(o.clearCart(),c({title:"Cart cleared",description:"All items have been removed from your cart"})):console.error("Neither server cart nor local cart available")}catch(O){console.error("Error clearing cart:",O),c({title:"Error",description:"Failed to clear cart",variant:"destructive"})}},V=()=>{try{if(m&&i)return i.getCartSummary();if(o)return o.getCartSummary()}catch(O){console.error("Error getting cart summary:",O)}return{subtotal:"0.00",tax:"0.00",total:"0.00",itemCount:0}},S=()=>{try{m&&i&&i.refetchCart()}catch(O){console.error("Error refetching cart:",O)}},$=m&&i?i.isAddingToCart:!1,U=m&&i?i.isUpdatingQuantity:!1,F=m&&i?i.isRemovingItem:!1,z=m&&i?i.isClearingCart:!1;return e.jsx(zr.Provider,{value:{cart:v,isLoading:j,addToCart:g,updateQuantity:k,removeItem:b,clearCart:y,getCartSummary:V,isAddingToCart:$,isUpdatingQuantity:U,isRemovingItem:F,isClearingCart:z,refetchCart:S,error:r},children:s})}function Ur(){const s=h.useContext(zr);if(!s)throw new Error("useCartContext must be used within a CartProvider");return s}const Us=dt("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),p=h.forwardRef(({className:s,variant:t,size:a,asChild:r=!1,...d},n)=>{const x=r?Ra:"button";return e.jsx(x,{className:C(Us({variant:t,size:a,className:s})),ref:n,...d})});p.displayName="Button";function hn(){const{impersonationStatus:s,isLoadingImpersonationStatus:t,endImpersonationMutation:a}=qe();if(t||!(s!=null&&s.isImpersonating))return null;const r=s.originalUser;return e.jsxs("div",{className:"w-full bg-amber-500 text-black px-4 py-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("span",{className:"font-semibold",children:["You are viewing as ",s.isImpersonating?"another user":"","."]}),r&&e.jsxs("span",{className:"ml-2",children:["Return to ",e.jsx("span",{className:"font-semibold",children:r.email})]})]}),e.jsxs(p,{variant:"ghost",size:"sm",className:"hover:bg-amber-600 text-black",onClick:()=>a.mutate(),disabled:a.isPending,children:[e.jsx(fi,{className:"mr-2 h-4 w-4"}),a.isPending?"Ending...":"End Impersonation"]})]})}const un=dt("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Y=h.forwardRef(({className:s,...t},a)=>e.jsx($a,{ref:a,className:C(un(),s),...t}));Y.displayName=$a.displayName;const Me=vi,qr=h.createContext({}),K=({...s})=>e.jsx(qr.Provider,{value:{name:s.name},children:e.jsx(yi,{...s})}),Dt=()=>{const s=h.useContext(qr),t=h.useContext(Br),{getFieldState:a,formState:r}=Ni(),d=a(s.name,r);if(!s)throw new Error("useFormField should be used within <FormField>");const{id:n}=t;return{id:n,name:s.name,formItemId:`${n}-form-item`,formDescriptionId:`${n}-form-item-description`,formMessageId:`${n}-form-item-message`,...d}},Br=h.createContext({}),q=h.forwardRef(({className:s,...t},a)=>{const r=h.useId();return e.jsx(Br.Provider,{value:{id:r},children:e.jsx("div",{ref:a,className:C("space-y-2",s),...t})})});q.displayName="FormItem";const _=h.forwardRef(({className:s,...t},a)=>{const{error:r,formItemId:d}=Dt();return e.jsx(Y,{ref:a,className:C(r&&"text-destructive",s),htmlFor:d,...t})});_.displayName="FormLabel";const G=h.forwardRef(({...s},t)=>{const{error:a,formItemId:r,formDescriptionId:d,formMessageId:n}=Dt();return e.jsx(Ra,{ref:t,id:r,"aria-describedby":a?`${d} ${n}`:`${d}`,"aria-invalid":!!a,...s})});G.displayName="FormControl";const ie=h.forwardRef(({className:s,...t},a)=>{const{formDescriptionId:r}=Dt();return e.jsx("p",{ref:a,id:r,className:C("text-sm text-muted-foreground",s),...t})});ie.displayName="FormDescription";const Q=h.forwardRef(({className:s,children:t,...a},r)=>{const{error:d,formMessageId:n}=Dt(),x=d?String((d==null?void 0:d.message)??""):t;return x?e.jsx("p",{ref:r,id:n,className:C("text-sm font-medium text-destructive",s),...a,children:x}):null});Q.displayName="FormMessage";const Tt=h.forwardRef(({className:s,containerClassName:t,...a},r)=>e.jsx(bi,{ref:r,containerClassName:C("flex items-center gap-2 has-[:disabled]:opacity-50",t),className:C("disabled:cursor-not-allowed",s),...a}));Tt.displayName="InputOTP";const At=h.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:C("flex items-center",s),...t}));At.displayName="InputOTPGroup";const Se=h.forwardRef(({index:s,className:t,...a},r)=>{const d=h.useContext(wi);if(!d||!d.slots||!d.slots[s])return e.jsx("div",{ref:r,className:C("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",t),...a});const{char:n,hasFakeCaret:x,isActive:m}=d.slots[s];return e.jsxs("div",{ref:r,className:C("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",m&&"z-10 ring-2 ring-ring ring-offset-background",t),...a,children:[n,x&&e.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});Se.displayName="InputOTPSlot";const pn=h.forwardRef(({...s},t)=>e.jsx("div",{ref:t,role:"separator",...s,children:e.jsx(Ci,{})}));pn.displayName="InputOTPSeparator";const L=h.forwardRef(({className:s,type:t,...a},r)=>e.jsx("input",{type:t,className:C("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:r,...a}));L.displayName="Input";const P=h.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:C("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t}));P.displayName="Card";const I=h.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:C("flex flex-col space-y-1.5 p-6",s),...t}));I.displayName="CardHeader";const M=h.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:C("text-2xl font-semibold leading-none tracking-tight",s),...t}));M.displayName="CardTitle";const re=h.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:C("text-sm text-muted-foreground",s),...t}));re.displayName="CardDescription";const D=h.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:C("p-6 pt-0",s),...t}));D.displayName="CardContent";const Ze=h.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:C("flex items-center p-6 pt-0",s),...t}));Ze.displayName="CardFooter";const jn=dt("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ws=h.forwardRef(({className:s,variant:t,...a},r)=>e.jsx("div",{ref:r,role:"alert",className:C(jn({variant:t}),s),...a}));ws.displayName="Alert";const ft=h.forwardRef(({className:s,...t},a)=>e.jsx("h5",{ref:a,className:C("mb-1 font-medium leading-none tracking-tight",s),...t}));ft.displayName="AlertTitle";const Cs=h.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:C("text-sm [&_p]:leading-relaxed",s),...t}));Cs.displayName="AlertDescription";const gn=T.object({email:T.string().email({message:"Please enter a valid email address"})}),fn=T.object({otp:T.string().length(6,{message:"OTP must be 6 digits"})}),Nn=()=>{const[s,t]=h.useState("email"),[a,r]=h.useState(""),[d,n]=h.useState(null),{requestOtpMutation:x,verifyOtpMutation:m,user:u,isAuthenticated:i}=qe();me();const[o,c]=Ge(),l=new URLSearchParams(o.split("?")[1]||"").get("redirect");h.useEffect(()=>{i&&(l?c(l):(u==null?void 0:u.role)==="super_admin"?c("/admin"):c("/dashboard"))},[i,u,c,l]);const v=Pe({resolver:ke(gn),defaultValues:{email:""}}),j=Pe({resolver:ke(fn),defaultValues:{otp:""}}),g=async y=>{n(null);try{const V=await x.mutateAsync({email:y.email});r(y.email),t("otp"),V.previewUrl&&console.log("OTP Email Preview URL:",V.previewUrl)}catch(V){console.error("Error requesting OTP:",V),n(V instanceof Error?V.message:"Failed to send verification code")}},k=async y=>{n(null);try{await m.mutateAsync({email:a,otp:y.otp})}catch(V){console.error("Error verifying OTP:",V),n(V instanceof Error?V.message:"Invalid verification code")}},b=()=>{t("email"),n(null)};return e.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center p-4 sm:p-8 lg:p-12 bg-white dark:bg-gray-950",children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 text-transparent bg-clip-text",children:"MultiVend"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Multi-tenant eCommerce platform"})]}),e.jsxs(P,{className:"border-none shadow-lg",children:[e.jsxs(I,{children:[e.jsx(M,{className:"text-center text-2xl",children:"Welcome Back"}),e.jsx(re,{className:"text-center",children:"Log in to your account with one-time code"})]}),e.jsxs(D,{children:[d&&e.jsxs(ws,{variant:"destructive",className:"mb-4",children:[e.jsx(_e,{className:"h-4 w-4"}),e.jsx(Cs,{children:d})]}),s==="email"?e.jsx(Me,{...v,children:e.jsxs("form",{onSubmit:v.handleSubmit(g),className:"space-y-4",children:[e.jsx(K,{control:v.control,name:"email",render:({field:y})=>e.jsxs(q,{children:[e.jsx(_,{children:"Email Address"}),e.jsx(G,{children:e.jsxs("div",{className:"flex items-center border rounded-md focus-within:ring-1 focus-within:ring-indigo-500 bg-white dark:bg-gray-900",children:[e.jsx(at,{className:"ml-3 h-5 w-5 text-gray-400"}),e.jsx(L,{placeholder:"your.email@example.com",type:"email",className:"border-0 focus-visible:ring-0 focus-visible:ring-offset-0",...y})]})}),e.jsx(ie,{children:"We'll send a one-time verification code to this email."}),e.jsx(Q,{})]})}),e.jsx(p,{type:"submit",className:"w-full",disabled:x.isPending,children:x.isPending?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending Code..."]}):"Continue with Email"})]})}):e.jsx(Me,{...j,children:e.jsxs("form",{onSubmit:j.handleSubmit(k),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["We've sent a verification code to ",e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:a})]}),e.jsx(K,{control:j.control,name:"otp",render:({field:y})=>e.jsxs(q,{className:"space-y-2",children:[e.jsx(_,{children:"Verification Code"}),e.jsx(G,{children:e.jsx(Tt,{maxLength:6,...y,children:e.jsxs(At,{children:[e.jsx(Se,{index:0}),e.jsx(Se,{index:1}),e.jsx(Se,{index:2}),e.jsx(Se,{index:3}),e.jsx(Se,{index:4}),e.jsx(Se,{index:5})]})})}),e.jsx(Q,{})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(p,{type:"submit",className:"w-full",disabled:m.isPending,children:m.isPending?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):"Verify"}),e.jsx(p,{type:"button",variant:"ghost",className:"w-full text-gray-500",onClick:b,disabled:m.isPending,children:"Use a different email"}),e.jsx(p,{type:"button",variant:"link",className:"w-full text-indigo-600",onClick:()=>g({email:a}),disabled:x.isPending||m.isPending,children:x.isPending?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):"Resend code"})]})]})})]})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["© ",new Date().getFullYear()," MultiVend. All rights reserved."]})})]})}),e.jsx("div",{className:"hidden lg:flex flex-1 bg-gradient-to-br from-indigo-600 to-purple-700 items-center justify-center p-12",children:e.jsxs("div",{className:"max-w-md text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Build and Manage Your eCommerce Empire"}),e.jsx("p",{className:"text-lg mb-8 text-indigo-100",children:"Launch, scale, and optimize your online store with our powerful multi-tenant platform. Access comprehensive tools for inventory management, order fulfillment, and seamless customer experiences."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-3 text-indigo-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("p",{children:"Manage multiple stores from a single dashboard"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-3 text-indigo-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("p",{children:"Seamless domain integration and customization"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-3 text-indigo-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("p",{children:"Comprehensive analytics and performance tracking"})]})]})]})})]})},vn=T.object({email:T.string().email({message:"Please enter a valid email address"})}),yn=T.object({otp:T.string().length(6,{message:"OTP must be 6 digits"})}),bn=()=>{const[s,t]=h.useState("email"),[a,r]=h.useState(""),[d,n]=h.useState(null),{requestOtpMutation:x,verifyOtpMutation:m,user:u,isAuthenticated:i}=qe(),{vendorStore:o}=Fs();me();const[,c]=Ge();h.useEffect(()=>{i&&(u==null?void 0:u.role)==="customer"&&c("/")},[i,u,c]);const l=Pe({resolver:ke(vn),defaultValues:{email:""}}),v=Pe({resolver:ke(yn),defaultValues:{otp:""}}),j=async b=>{n(null);try{const y=await x.mutateAsync({email:b.email,isCustomer:!0});r(b.email),t("otp"),y.previewUrl&&console.log("OTP Email Preview URL:",y.previewUrl)}catch(y){console.error("Error requesting OTP:",y),n(y instanceof Error?y.message:"Failed to send verification code")}},g=async b=>{n(null);try{await m.mutateAsync({email:a,otp:b.otp,isCustomer:!0})}catch(y){console.error("Error verifying OTP:",y),n(y instanceof Error?y.message:"Invalid verification code")}},k=()=>{t("email"),n(null)};return e.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center p-4 sm:p-8 lg:p-12 bg-white dark:bg-gray-950",children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 text-transparent bg-clip-text",children:(o==null?void 0:o.name)||"Store"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Customer Login"})]}),e.jsxs(P,{className:"border-none shadow-lg",children:[e.jsxs(I,{children:[e.jsx(M,{className:"text-center text-2xl",children:"Welcome Back"}),e.jsx(re,{className:"text-center",children:"Log in to your customer account with one-time code"})]}),e.jsxs(D,{children:[d&&e.jsxs(ws,{variant:"destructive",className:"mb-4",children:[e.jsx(_e,{className:"h-4 w-4"}),e.jsx(Cs,{children:d})]}),s==="email"?e.jsx(Me,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(j),className:"space-y-4",children:[e.jsx(K,{control:l.control,name:"email",render:({field:b})=>e.jsxs(q,{children:[e.jsx(_,{children:"Email Address"}),e.jsx(G,{children:e.jsxs("div",{className:"flex items-center border rounded-md focus-within:ring-1 focus-within:ring-indigo-500 bg-white dark:bg-gray-900",children:[e.jsx(at,{className:"ml-3 h-5 w-5 text-gray-400"}),e.jsx(L,{placeholder:"your.email@example.com",type:"email",className:"border-0 focus-visible:ring-0 focus-visible:ring-offset-0",...b})]})}),e.jsx(ie,{children:"We'll send a one-time verification code to this email."}),e.jsx(Q,{})]})}),e.jsx(p,{type:"submit",className:"w-full",disabled:x.isPending,children:x.isPending?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending Code..."]}):"Continue with Email"})]})}):e.jsx(Me,{...v,children:e.jsxs("form",{onSubmit:v.handleSubmit(g),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["We've sent a verification code to ",e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:a})]}),e.jsx(K,{control:v.control,name:"otp",render:({field:b})=>e.jsxs(q,{className:"space-y-2",children:[e.jsx(_,{children:"Verification Code"}),e.jsx(G,{children:e.jsx(Tt,{maxLength:6,...b,children:e.jsxs(At,{children:[e.jsx(Se,{index:0}),e.jsx(Se,{index:1}),e.jsx(Se,{index:2}),e.jsx(Se,{index:3}),e.jsx(Se,{index:4}),e.jsx(Se,{index:5})]})})}),e.jsx(Q,{})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(p,{type:"submit",className:"w-full",disabled:m.isPending,children:m.isPending?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):"Verify"}),e.jsx(p,{type:"button",variant:"ghost",className:"w-full text-gray-500",onClick:k,disabled:m.isPending,children:"Use a different email"}),e.jsx(p,{type:"button",variant:"link",className:"w-full text-indigo-600",onClick:()=>j({email:a}),disabled:x.isPending||m.isPending,children:x.isPending?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):"Resend code"})]})]})})]})]}),e.jsx("div",{className:"text-center",children:e.jsx(je,{href:"/",className:"text-indigo-600 hover:text-indigo-800 font-medium",children:"← Back to Store"})})]})}),e.jsx("div",{className:"hidden lg:flex flex-1 bg-gradient-to-br from-indigo-600 to-purple-700 items-center justify-center p-12",children:e.jsxs("div",{className:"max-w-md text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Shop with Ease and Convenience"}),e.jsx("p",{className:"text-lg mb-8 text-indigo-100",children:"Log in to your account to enjoy personalized shopping experience, track your orders, manage your wishlist, and access exclusive deals."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-3 text-indigo-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("p",{children:"Save multiple shipping addresses"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-3 text-indigo-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("p",{children:"Track your order status in real-time"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-3 text-indigo-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("p",{children:"Get exclusive access to deals and promotions"})]})]})]})})]})},wn=T.object({email:T.string().email({message:"Please enter a valid email address"})}),Cn=T.object({otp:T.string().length(6,{message:"OTP must be 6 digits"})}),Sn=T.object({firstName:T.string().min(2,{message:"First name must be at least 2 characters"}),lastName:T.string().min(2,{message:"Last name must be at least 2 characters"}),companyName:T.string().min(2,{message:"Company name must be at least 2 characters"}),subdomainName:T.string().min(3,{message:"Subdomain must be at least 3 characters"}).regex(/^[a-zA-Z0-9-]+$/,{message:"Subdomain can only contain letters, numbers, and hyphens"})}),Pn=()=>{const[s,t]=h.useState("email"),[a,r]=h.useState(""),[d,n]=h.useState(null),{requestOtpMutation:x,verifyOtpMutation:m,completeProfileMutation:u,user:i,isAuthenticated:o}=qe(),{toast:c}=me(),[,l]=Ge();h.useEffect(()=>{o&&(i!=null&&i.isProfileComplete?i.role==="super_admin"?l("/admin"):l("/dashboard"):i&&!i.isProfileComplete&&s!=="profile"&&t("profile"))},[o,i,s,l]);const v=Pe({resolver:ke(wn),defaultValues:{email:""}}),j=Pe({resolver:ke(Cn),defaultValues:{otp:""}}),g=Pe({resolver:ke(Sn),defaultValues:{firstName:"",lastName:"",companyName:"",subdomainName:""}}),k=async S=>{n(null);try{const $=await x.mutateAsync({email:S.email});r(S.email),t("otp"),$.previewUrl&&console.log("OTP Email Preview URL:",$.previewUrl)}catch($){console.error("Error requesting OTP:",$),n($ instanceof Error?$.message:"Failed to send verification code")}},b=async S=>{n(null);try{(await m.mutateAsync({email:a,otp:S.otp})).isProfileComplete||t("profile")}catch($){console.error("Error verifying OTP:",$),n($ instanceof Error?$.message:"Invalid verification code")}},y=async S=>{n(null);try{await u.mutateAsync({firstName:S.firstName,lastName:S.lastName,isProfileComplete:!0,vendor:{companyName:S.companyName,subdomainName:S.subdomainName}}),c({title:"Account Created",description:"Your vendor account has been successfully created!"})}catch($){console.error("Error completing profile:",$),n($ instanceof Error?$.message:"Failed to complete profile")}},V=()=>{t("email"),n(null)};return e.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center p-4 sm:p-8 lg:p-12 bg-white dark:bg-gray-950",children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 text-transparent bg-clip-text",children:"MultiVend"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Create your eCommerce store in minutes"})]}),e.jsxs(P,{className:"border-none shadow-lg",children:[e.jsxs(I,{children:[e.jsx(M,{className:"text-center text-2xl",children:"Create an Account"}),e.jsxs(re,{className:"text-center",children:[s==="email"&&"Get started with a free vendor account",s==="otp"&&"Verify your email address",s==="profile"&&"Complete your profile and store details"]})]}),e.jsxs(D,{children:[d&&e.jsxs(ws,{variant:"destructive",className:"mb-4",children:[e.jsx(_e,{className:"h-4 w-4"}),e.jsx(Cs,{children:d})]}),s==="email"&&e.jsx(Me,{...v,children:e.jsxs("form",{onSubmit:v.handleSubmit(k),className:"space-y-4",children:[e.jsx(K,{control:v.control,name:"email",render:({field:S})=>e.jsxs(q,{children:[e.jsx(_,{children:"Email Address"}),e.jsx(G,{children:e.jsxs("div",{className:"flex items-center border rounded-md focus-within:ring-1 focus-within:ring-indigo-500 bg-white dark:bg-gray-900",children:[e.jsx(at,{className:"ml-3 h-5 w-5 text-gray-400"}),e.jsx(L,{placeholder:"your.email@example.com",type:"email",className:"border-0 focus-visible:ring-0 focus-visible:ring-offset-0",...S})]})}),e.jsx(ie,{children:"We'll send a one-time verification code to this email."}),e.jsx(Q,{})]})}),e.jsx(p,{type:"submit",className:"w-full",disabled:x.isPending,children:x.isPending?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending Code..."]}):"Continue with Email"})]})}),s==="otp"&&e.jsx(Me,{...j,children:e.jsxs("form",{onSubmit:j.handleSubmit(b),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["We've sent a verification code to ",e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:a})]}),e.jsx(K,{control:j.control,name:"otp",render:({field:S})=>e.jsxs(q,{className:"space-y-2",children:[e.jsx(_,{children:"Verification Code"}),e.jsx(G,{children:e.jsx(Tt,{maxLength:6,...S,children:e.jsxs(At,{children:[e.jsx(Se,{index:0}),e.jsx(Se,{index:1}),e.jsx(Se,{index:2}),e.jsx(Se,{index:3}),e.jsx(Se,{index:4}),e.jsx(Se,{index:5})]})})}),e.jsx(Q,{})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(p,{type:"submit",className:"w-full",disabled:m.isPending,children:m.isPending?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):"Verify"}),e.jsx(p,{type:"button",variant:"ghost",className:"w-full text-gray-500",onClick:V,disabled:m.isPending,children:"Use a different email"}),e.jsx(p,{type:"button",variant:"link",className:"w-full text-indigo-600",onClick:()=>k({email:a}),disabled:x.isPending||m.isPending,children:x.isPending?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):"Resend code"})]})]})}),s==="profile"&&e.jsx(Me,{...g,children:e.jsxs("form",{onSubmit:g.handleSubmit(y),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 pb-2 border-b dark:border-gray-800",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(K,{control:g.control,name:"firstName",render:({field:S})=>e.jsxs(q,{children:[e.jsx(_,{children:"First Name"}),e.jsx(G,{children:e.jsx(L,{placeholder:"John",...S})}),e.jsx(Q,{})]})}),e.jsx(K,{control:g.control,name:"lastName",render:({field:S})=>e.jsxs(q,{children:[e.jsx(_,{children:"Last Name"}),e.jsx(G,{children:e.jsx(L,{placeholder:"Doe",...S})}),e.jsx(Q,{})]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 pb-2 border-b dark:border-gray-800",children:"Store Information"}),e.jsx(K,{control:g.control,name:"companyName",render:({field:S})=>e.jsxs(q,{children:[e.jsx(_,{children:"Store Name"}),e.jsx(G,{children:e.jsxs("div",{className:"flex items-center border rounded-md focus-within:ring-1 focus-within:ring-indigo-500 bg-white dark:bg-gray-900",children:[e.jsx(Os,{className:"ml-3 h-5 w-5 text-gray-400"}),e.jsx(L,{placeholder:"My Awesome Store",className:"border-0 focus-visible:ring-0 focus-visible:ring-offset-0",...S})]})}),e.jsx(Q,{})]})}),e.jsx(K,{control:g.control,name:"subdomainName",render:({field:S})=>e.jsxs(q,{children:[e.jsx(_,{children:"Store Subdomain"}),e.jsx(G,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex flex-1 items-center border rounded-l-md focus-within:ring-1 focus-within:ring-indigo-500 bg-white dark:bg-gray-900",children:[e.jsx(Ye,{className:"ml-3 h-5 w-5 text-gray-400"}),e.jsx(L,{placeholder:"mystore",className:"border-0 focus-visible:ring-0 focus-visible:ring-offset-0",...S})]}),e.jsx("div",{className:"inline-flex items-center px-3 h-10 rounded-r-md border border-l-0 border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-500 dark:text-gray-400 text-sm",children:".multivend.com"})]})}),e.jsx(ie,{children:"This will be your store's web address"}),e.jsx(Q,{})]})})]}),e.jsx(p,{type:"submit",className:"w-full",disabled:u.isPending,children:u.isPending?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Store..."]}):"Complete Registration"})]})})]}),(s==="email"||s==="otp")&&e.jsx(Ze,{className:"flex flex-col space-y-2",children:e.jsxs("div",{className:"text-sm text-center text-gray-500 dark:text-gray-400",children:["Already have an account?"," ",e.jsx(je,{href:"/login",className:"text-primary hover:text-primary/80 font-medium",children:"Sign in"})]})})]}),e.jsx("div",{className:"text-center text-xs text-gray-500 dark:text-gray-400",children:"By signing up, you agree to our Terms of Service and Privacy Policy."})]})}),e.jsx("div",{className:"hidden lg:flex flex-1 bg-gradient-to-br from-indigo-600 to-purple-700 items-center justify-center p-12",children:e.jsxs("div",{className:"max-w-md text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Launch Your Online Store Today"}),e.jsx("p",{className:"text-lg mb-8 text-indigo-100",children:"MultiVend provides everything you need to create, manage, and grow your eCommerce business. Get started in minutes with our powerful platform designed for entrepreneurs."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-3 text-indigo-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("p",{children:"Easy setup with no technical skills required"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-3 text-indigo-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("p",{children:"Professional store with your custom domain"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-3 text-indigo-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("p",{children:"Powerful tools to grow your business"})]})]})]})})]})},We=()=>{const s=h.useContext(ea);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},kn=({collapsed:s=!1,onCollapse:t})=>{var m;const[a]=Ge(),{user:r,logout:d}=We(),n=(r==null?void 0:r.role)==="super_admin",x=n?[{label:"Dashboard",path:"/admin",icon:e.jsx(da,{className:"h-5 w-5"})},{label:"Vendors",path:"/vendors",icon:e.jsx(Os,{className:"h-5 w-5"})},{label:"Domains",path:"/domains",icon:e.jsx(Ye,{className:"h-5 w-5"})},{label:"Users",path:"/users",icon:e.jsx(Vs,{className:"h-5 w-5"})},{label:"Subscriptions",path:"/subscriptions",icon:e.jsx(Pt,{className:"h-5 w-5"})},{label:"Analytics",path:"/analytics",icon:e.jsx(Xs,{className:"h-5 w-5"})},{label:"Settings",path:"/settings",icon:e.jsx(oa,{className:"h-5 w-5"})},{label:"S3 File Upload",path:"/s3-upload-test",icon:e.jsx(rt,{className:"h-5 w-5"})}]:[{label:"Dashboard",path:"/dashboard",icon:e.jsx(da,{className:"h-5 w-5"})},{label:"Products",path:"/products",icon:e.jsx(Si,{className:"h-5 w-5"})},{label:"Category Management",path:"/product-categories",icon:e.jsx(it,{className:"h-5 w-5"})},{label:"Orders",path:"/orders",icon:e.jsx(os,{className:"h-5 w-5"})},{label:"Customers",path:"/customers",icon:e.jsx(Vs,{className:"h-5 w-5"})},{label:"Marketing",path:"/marketing",icon:e.jsx(Va,{className:"h-5 w-5"})},{label:"Reports",path:"/reports",icon:e.jsx(Vt,{className:"h-5 w-5"})},{label:"Analytics",path:"/vendor-analytics",icon:e.jsx(Xs,{className:"h-5 w-5"})},{label:"Store Design",path:"/store-design",icon:e.jsx(Pi,{className:"h-5 w-5"})},{label:"Settings",path:"/settings",icon:e.jsx(oa,{className:"h-5 w-5"})},{label:"S3 File Upload",path:"/s3-upload-test",icon:e.jsx(rt,{className:"h-5 w-5"})}];return e.jsxs("aside",{className:C("h-screen fixed top-0 left-0 z-30 flex flex-col bg-white border-r shadow-sm transition-all duration-300",s?"w-16":"w-64"),children:[e.jsx("div",{className:"p-4 flex justify-between items-center border-b h-16",children:e.jsxs(je,{href:"/",className:C("flex items-center cursor-pointer hover:opacity-80 transition-opacity",s&&"justify-center w-full"),children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-md flex items-center justify-center text-white font-bold",children:"MV"}),!s&&e.jsx("span",{className:"ml-3 text-lg font-semibold text-gray-900",children:"MultiVend"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto py-4",children:e.jsx("nav",{className:"px-3 space-y-1",children:x.map(u=>e.jsxs(je,{href:u.path,className:C("group flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",a===u.path?"bg-primary text-white":"text-gray-700 hover:bg-gray-100 hover:text-primary",s&&"justify-center"),children:[u.icon,!s&&e.jsx("span",{className:"ml-3",children:u.label})]},u.path))})}),e.jsx("div",{className:"border-t p-4",children:e.jsxs("div",{className:"flex items-center",children:[r!=null&&r.avatarUrl?e.jsx("img",{src:r.avatarUrl,alt:`${r.firstName} ${r.lastName}`,className:"h-9 w-9 rounded-full object-cover"}):e.jsx("div",{className:"h-9 w-9 rounded-full bg-gray-200 flex items-center justify-center text-gray-500",children:((m=r==null?void 0:r.firstName)==null?void 0:m.charAt(0))||"U"}),!s&&e.jsxs("div",{className:"ml-3",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[r==null?void 0:r.firstName," ",r==null?void 0:r.lastName]}),e.jsx("p",{className:"text-xs text-gray-500",children:n?"Super Admin":"Vendor"})]}),e.jsx("button",{onClick:d,className:C("text-gray-400 hover:text-gray-600 transition-colors","ml-auto"),"aria-label":"Logout",children:e.jsx(Oa,{className:"h-5 w-5"})})]})})]})},sa=Di,ta=Ti,Fn=h.forwardRef(({className:s,inset:t,children:a,...r},d)=>e.jsxs(za,{ref:d,className:C("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",s),...r,children:[a,e.jsx(Bs,{className:"ml-auto h-4 w-4"})]}));Fn.displayName=za.displayName;const Dn=h.forwardRef(({className:s,...t},a)=>e.jsx(Ua,{ref:a,className:C("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t}));Dn.displayName=Ua.displayName;const Lt=h.forwardRef(({className:s,sideOffset:t=4,...a},r)=>e.jsx(ki,{children:e.jsx(qa,{ref:r,sideOffset:t,className:C("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a})}));Lt.displayName=qa.displayName;const es=h.forwardRef(({className:s,inset:t,...a},r)=>e.jsx(Ba,{ref:r,className:C("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",s),...a}));es.displayName=Ba.displayName;const Tn=h.forwardRef(({className:s,children:t,checked:a,...r},d)=>e.jsxs(Ka,{ref:d,className:C("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:a,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ga,{children:e.jsx(Ke,{className:"h-4 w-4"})})}),t]}));Tn.displayName=Ka.displayName;const An=h.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(_a,{ref:r,className:C("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ga,{children:e.jsx(Fi,{className:"h-2 w-2 fill-current"})})}),t]}));An.displayName=_a.displayName;const aa=h.forwardRef(({className:s,inset:t,...a},r)=>e.jsx(Qa,{ref:r,className:C("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...a}));aa.displayName=Qa.displayName;const vt=h.forwardRef(({className:s,...t},a)=>e.jsx(Wa,{ref:a,className:C("-mx-1 my-1 h-px bg-muted",s),...t}));vt.displayName=Wa.displayName;const Ln=({onToggleSidebar:s,title:t,subtitle:a})=>{var o;const{user:r,logoutMutation:d}=qe(),{getCartSummary:n}=Ur(),[x,m]=h.useState(""),[,u]=Ge(),{itemCount:i}=n();return e.jsx("header",{className:"bg-white shadow-sm z-10 relative",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{type:"button",className:"text-gray-500 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary md:hidden",onClick:s,children:e.jsx(Ya,{className:"h-6 w-6"})}),e.jsxs("div",{className:"ml-4 md:ml-0",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:t}),a&&e.jsx("p",{className:"text-sm text-gray-500",children:a})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative hidden md:block",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(He,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:x,onChange:c=>m(c.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md text-sm placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary",placeholder:"Search..."})]}),e.jsxs("button",{type:"button",className:"p-1 rounded-full text-gray-500 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-primary relative",children:[e.jsx("span",{className:"sr-only",children:"View notifications"}),e.jsx(Ai,{className:"h-6 w-6"}),e.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 rounded-full bg-red-500 flex items-center justify-center text-white text-xs",children:"3"})]}),e.jsxs("button",{type:"button",className:"p-1 rounded-full text-gray-500 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-primary relative",onClick:()=>u("/cart"),children:[e.jsx("span",{className:"sr-only",children:"View cart"}),e.jsx(os,{className:"h-6 w-6"}),i>0&&e.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 rounded-full bg-primary flex items-center justify-center text-white text-xs",children:i>99?"99+":i})]}),e.jsxs(sa,{children:[e.jsx(ta,{className:"flex items-center",children:e.jsxs("div",{className:"flex items-center",children:[r!=null&&r.avatarUrl?e.jsx("img",{className:"h-8 w-8 rounded-full object-cover",src:r.avatarUrl,alt:`${r.firstName} ${r.lastName}`}):e.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-500",children:((o=r==null?void 0:r.firstName)==null?void 0:o.charAt(0))||"U"}),e.jsx(Ss,{className:"ml-1 h-4 w-4 text-gray-500"})]})}),e.jsxs(Lt,{align:"end",children:[e.jsxs(aa,{children:[r==null?void 0:r.firstName," ",r==null?void 0:r.lastName]}),e.jsx(vt,{}),e.jsx(es,{children:"Profile"}),e.jsx(es,{children:"Settings"}),e.jsx(vt,{}),e.jsx(es,{onClick:()=>{d.mutate(),u("/")},children:"Logout"})]})]})]})]})})},ue=({children:s,title:t,subtitle:a})=>{const[r,d]=h.useState(!1),n=()=>{d(!r)};return e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[!r&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-30 z-20 md:hidden",onClick:n}),e.jsx(kn,{collapsed:r,onCollapse:n}),e.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${r?"md:ml-16":"md:ml-64"}`,children:[e.jsx(Ln,{onToggleSidebar:n,title:t,subtitle:a}),e.jsx("main",{className:"flex-1 overflow-y-auto py-6 px-4 sm:px-6 lg:px-8",children:s})]})]})},us=({title:s,value:t,icon:a,change:r,className:d})=>e.jsxs("div",{className:C("bg-white overflow-hidden rounded-lg shadow",d),children:[e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 bg-primary/10 rounded-md p-3",children:a}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:s}),e.jsx("dd",{className:"text-lg font-semibold text-gray-900",children:t})]})})]})}),r&&e.jsx("div",{className:"bg-gray-50 px-5 py-3",children:e.jsx("div",{className:"text-sm",children:e.jsxs("span",{className:C("font-medium flex items-center",r.isPositive?"text-green-600":"text-red-600"),children:[r.isPositive?e.jsx(Li,{className:"mr-1 h-4 w-4"}):e.jsx(Ei,{className:"mr-1 h-4 w-4"}),r.value,"%",r.text&&e.jsx("span",{className:"text-gray-500 ml-2",children:r.text})]})})})]}),En=dt("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800 hover:bg-green-200/80",warning:"border-transparent bg-yellow-100 text-yellow-800 hover:bg-yellow-200/80",error:"border-transparent bg-red-100 text-red-800 hover:bg-red-200/80",pending:"border-transparent bg-blue-100 text-blue-800 hover:bg-blue-200/80"}},defaultVariants:{variant:"default"}});function J({className:s,variant:t,...a}){return e.jsx("div",{className:C(En({variant:t}),s),...a})}function E({className:s,...t}){return e.jsx("div",{className:C("animate-pulse rounded-md bg-muted",s),...t})}const In=()=>{const[s,t]=h.useState(1),a=4,{data:r,isLoading:d}=Z({queryKey:["/api/vendors"]}),n=u=>{switch(u){case"active":return"success";case"pending":return"warning";case"suspended":return"error";default:return"secondary"}};if(d)return e.jsxs(P,{children:[e.jsx(I,{children:e.jsx(M,{children:"Recent Vendors"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:Array.from({length:4}).map((u,i)=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(E,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{className:"h-4 w-[200px]"}),e.jsx(E,{className:"h-4 w-[150px]"})]})]},i))})})]});const x=r?r.slice((s-1)*a,s*a):[],m=r?Math.ceil(r.length/a):0;return e.jsxs(P,{children:[e.jsxs(I,{className:"flex flex-row items-center justify-between",children:[e.jsx(M,{children:"Recent Vendors"}),e.jsx(p,{variant:"outline",size:"sm",asChild:!0,children:e.jsx(je,{href:"/vendors",children:"View all"})})]}),e.jsxs(D,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vendor"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Plan"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(u=>{var i,o;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[u.logoUrl?e.jsx("img",{className:"h-10 w-10 rounded-md object-cover",src:u.logoUrl,alt:u.companyName}):e.jsx("div",{className:"h-10 w-10 rounded-md bg-primary/10 flex items-center justify-center text-primary font-medium",children:u.companyName.charAt(0)}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:u.companyName}),e.jsx("div",{className:"text-sm text-gray-500",children:(i=u.user)==null?void 0:i.email})]})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:((o=u.subscriptionPlan)==null?void 0:o.name)||"Free"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx(J,{variant:n(u.status),children:u.status.charAt(0).toUpperCase()+u.status.slice(1)})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx(p,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(je,{href:`/vendors/${u.id}`,children:e.jsx(kt,{className:"h-4 w-4"})})}),e.jsx(p,{variant:"ghost",size:"icon",children:e.jsx(Ks,{className:"h-4 w-4"})}),e.jsx(p,{variant:"ghost",size:"icon",children:e.jsx(ze,{className:"h-4 w-4 text-red-500"})})]})]},u.id)})})]})}),m>1&&e.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[e.jsx(p,{variant:"outline",size:"sm",disabled:s===1,onClick:()=>t(s-1),children:"Previous"}),e.jsx(p,{variant:"outline",size:"sm",disabled:s===m,onClick:()=>t(s+1),children:"Next"})]})]})]})},Mn=()=>{const{data:s,isLoading:t}=Z({queryKey:["/api/domains"]}),a=d=>{switch(d){case"active":return e.jsx(J,{variant:"success",children:"Active"});case"pending":return e.jsx(J,{variant:"warning",children:"Pending"});case"error":return e.jsx(J,{variant:"error",children:"Error"});default:return e.jsx(J,{variant:"secondary",children:d})}},r=d=>d==="valid"?e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(lt,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"Secure"})]}):d==="pending"?e.jsxs("div",{className:"flex items-center text-yellow-600",children:[e.jsx(lt,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"Pending"})]}):e.jsxs("div",{className:"flex items-center text-red-600",children:[e.jsx(_e,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"Not Secure"})]});return t?e.jsxs(P,{children:[e.jsx(I,{children:e.jsx(M,{children:"Domain Management"})}),e.jsxs(D,{children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx(E,{className:"h-9 w-32"})}),e.jsx("div",{className:"space-y-4",children:Array.from({length:4}).map((d,n)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(E,{className:"h-8 w-8 rounded-full"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{className:"h-4 w-[200px]"}),e.jsx(E,{className:"h-4 w-[150px]"})]})]}),e.jsx(E,{className:"h-8 w-24"})]},n))})]})]}):e.jsxs(P,{children:[e.jsxs(I,{className:"flex flex-row items-center justify-between",children:[e.jsx(M,{children:"Domain Management"}),e.jsx(p,{asChild:!0,children:e.jsx(je,{href:"/domains",children:"Add New Domain"})})]}),e.jsx(D,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Domain"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vendor"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SSL"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expiration"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s==null?void 0:s.map(d=>{var n;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ye,{className:"h-5 w-5 text-gray-500 mr-2"}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:d.name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:(n=d.vendor)==null?void 0:n.companyName})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a(d.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r(d.sslStatus)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(d.expiresAt).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx(p,{variant:"ghost",size:"icon",children:e.jsx(kt,{className:"h-4 w-4"})}),e.jsx(p,{variant:"ghost",size:"icon",children:e.jsx(Ks,{className:"h-4 w-4"})}),e.jsx(p,{variant:"ghost",size:"icon",children:e.jsx(ze,{className:"h-4 w-4 text-red-500"})})]})]},d.id)})})]})})})]})},ve=Ii,fe=h.forwardRef(({className:s,...t},a)=>e.jsx(Ha,{ref:a,className:C("inline-flex h-10 items-center justify-center rounded-md bg-gray-100 p-1 text-gray-600",s),...t}));fe.displayName=Ha.displayName;const B=h.forwardRef(({className:s,...t},a)=>e.jsx(Ja,{ref:a,className:C("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...t}));B.displayName=Ja.displayName;const H=h.forwardRef(({className:s,...t},a)=>e.jsx(Xa,{ref:a,className:C("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));H.displayName=Xa.displayName;function yt(s,t="INR",a="en-IN",r=!1){return new Intl.NumberFormat(a,{style:"currency",currency:t,minimumFractionDigits:r||t!=="INR"?2:0,maximumFractionDigits:r||t!=="INR"?2:0}).format(s)}function ra(s,t="monthly",a="INR"){return`${yt(s,a)}${t==="monthly"?"/mon":"/yr"}`}const Rn=({onAddPlan:s,onEditPlan:t,onDeletePlan:a})=>{const{data:r,isLoading:d}=Z({queryKey:["/api/subscription-plans"]});return Z({queryKey:["/api/subscription-stats"],enabled:!1}),d?e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"Subscription Plans"}),e.jsx(re,{children:"Manage platform subscription plans for vendors"})]}),e.jsx(D,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Array.from({length:3}).map((n,x)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"p-6",children:[e.jsx(E,{className:"h-6 w-24 mb-4"}),e.jsx(E,{className:"h-8 w-32 mb-4"}),e.jsx(E,{className:"h-4 w-full"})]}),e.jsx("div",{className:"px-6 pt-2 pb-6",children:e.jsx("div",{className:"space-y-3",children:Array.from({length:4}).map((m,u)=>e.jsx(E,{className:"h-4 w-full"},u))})})]},x))})})]}):e.jsxs(P,{className:"w-full",children:[e.jsx(I,{className:"flex flex-row items-center justify-between pb-2",children:e.jsxs("div",{children:[e.jsx(M,{className:"text-2xl",children:"Subscription Plans"}),e.jsx(re,{children:"Manage platform subscription plans for vendors"})]})}),e.jsx(D,{children:e.jsxs(ve,{defaultValue:"plans",className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs(fe,{className:"bg-muted",children:[e.jsx(B,{value:"plans",children:"Plans"}),e.jsx(B,{value:"analytics",children:"Analytics"})]}),e.jsxs(p,{onClick:s,className:"bg-blue-500 hover:bg-blue-600",children:[e.jsx(nt,{className:"h-4 w-4 mr-2"}),"Create New Plan"]})]}),e.jsx(H,{value:"plans",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:r==null?void 0:r.map(n=>{var m;const x=n.isDefault;return e.jsxs("div",{className:`
                    bg-white rounded-lg border overflow-hidden
                    ${x?"border-blue-500 border-2":"border-gray-200"}
                  `,children:[x&&e.jsx("div",{className:"absolute right-0 top-0",children:e.jsx(J,{className:"bg-blue-500 text-white rounded-bl-lg rounded-tr-md",children:"Popular"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:n.name}),e.jsx("div",{className:"mt-4 flex items-baseline",children:e.jsx("span",{className:"text-3xl font-bold",children:ra(parseFloat(n.price),"monthly")})}),e.jsx("p",{className:"mt-3 text-sm text-gray-500",children:n.description})]}),e.jsx("div",{className:"px-6 pb-6",children:e.jsx("ul",{className:"space-y-2",children:(m=n.features)==null?void 0:m.map((u,i)=>e.jsxs("li",{className:"flex text-sm items-start",children:[e.jsx(Ft,{className:"h-5 w-5 text-green-500 flex-shrink-0 mr-2 mt-0.5"}),e.jsx("span",{children:u})]},i))})}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[Math.floor(Math.random()*100)," vendors"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{variant:"ghost",size:"sm",onClick:()=>t&&t(n.id),children:e.jsx(Zs,{className:"h-4 w-4"})}),e.jsx(p,{variant:"ghost",size:"sm",onClick:()=>a&&a(n.id),children:e.jsx(ze,{className:"h-4 w-4 text-red-500"})})]})]})})]},n.id)})})}),e.jsx(H,{value:"analytics",children:e.jsx("div",{className:"rounded-md border p-8 h-96 flex items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:"Subscription analytics will be displayed here"})})})]})})]})},$n=()=>{const{data:s,isLoading:t}=Z({queryKey:["/api/platform-stats"]});return e.jsxs(ue,{title:"Super Admin Dashboard",subtitle:"Platform overview and management",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:t?e.jsx(e.Fragment,{children:[1,2,3,4].map(a=>e.jsx(P,{className:"shadow-sm",children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{className:"h-12 w-12 rounded-full"}),e.jsxs("div",{className:"ml-4 space-y-2",children:[e.jsx(E,{className:"h-4 w-20"}),e.jsx(E,{className:"h-8 w-24"})]})]})})},a))}):e.jsxs(e.Fragment,{children:[e.jsx(us,{title:"Active Vendors",value:(s==null?void 0:s.totalVendors)||0,icon:e.jsx(Os,{className:"h-5 w-5 text-primary"}),change:{value:12.5,isPositive:!0,text:"from last month"}}),e.jsx(us,{title:"Active Domains",value:(s==null?void 0:s.activeDomains)||0,icon:e.jsx(Ye,{className:"h-5 w-5 text-secondary"}),change:{value:8.2,isPositive:!0,text:"from last month"}}),e.jsx(us,{title:"Total Revenue",value:`$${(s==null?void 0:s.totalRevenue.toLocaleString())||0}`,icon:e.jsx(zs,{className:"h-5 w-5 text-green-600"}),change:{value:15.3,isPositive:!0,text:"from last month"}}),e.jsx(us,{title:"Pending Issues",value:(s==null?void 0:s.pendingIssues)||0,icon:e.jsx(_e,{className:"h-5 w-5 text-red-600"}),change:{value:3,isPositive:!1,text:"new since yesterday"}})]})}),e.jsxs(ve,{defaultValue:"vendors",className:"mb-6",children:[e.jsxs(fe,{className:"w-full grid grid-cols-1 md:grid-cols-4 h-auto mb-6",children:[e.jsx(B,{value:"vendors",children:"Vendors"}),e.jsx(B,{value:"domains",children:"Domains"}),e.jsx(B,{value:"plans",children:"Subscription Plans"}),e.jsx(B,{value:"analytics",children:"Analytics"})]}),e.jsx(H,{value:"vendors",children:e.jsx(In,{})}),e.jsx(H,{value:"domains",children:e.jsx(Mn,{onAddDomain:()=>{},onEditDomain:()=>{},onDeleteDomain:()=>{}})}),e.jsx(H,{value:"plans",children:e.jsx(Rn,{})}),e.jsx(H,{value:"analytics",children:e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"Platform Analytics"}),e.jsx(re,{children:"Overall platform performance and insights"})]}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(P,{children:[e.jsx(I,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{children:e.jsx(M,{className:"text-sm font-medium",children:"Revenue Over Time"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xl font-bold",children:"$248,719"}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center justify-end",children:[e.jsx(et,{className:"h-3 w-3 mr-1"}),"12.5% from previous period"]})]})]})}),e.jsx(D,{children:e.jsx("div",{className:"h-64 mt-4 flex items-end space-x-2",children:Array.from({length:7}).map((a,r)=>e.jsx("div",{className:"bg-primary/20 dark:bg-primary/30 relative flex-1 rounded-t-md",style:{height:`${20+Math.random()*80}%`},children:e.jsx("div",{className:"absolute bottom-0 inset-x-0 bg-primary rounded-t-md",style:{height:`${60+Math.random()*40}%`}})},r))})})]}),e.jsxs(P,{children:[e.jsx(I,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{children:e.jsx(M,{className:"text-sm font-medium",children:"Vendor Growth"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xl font-bold",children:"254"}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center justify-end",children:[e.jsx(et,{className:"h-3 w-3 mr-1"}),"8.2% from previous period"]})]})]})}),e.jsx(D,{children:e.jsx("div",{className:"h-64 mt-4 relative",children:e.jsx("div",{className:"absolute inset-0",children:e.jsxs("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",className:"w-full h-full",children:[e.jsx("path",{d:"M0,90 L10,85 L20,80 L30,70 L40,60 L50,55 L60,40 L70,35 L80,30 L90,20 L100,10",fill:"none",stroke:"hsl(var(--primary))",strokeWidth:"2"}),e.jsx("path",{d:"M0,90 L10,85 L20,80 L30,70 L40,60 L50,55 L60,40 L70,35 L80,30 L90,20 L100,10",fill:"hsl(var(--primary)/0.1)",strokeWidth:"0"})]})})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(P,{children:[e.jsx(I,{children:e.jsx(M,{className:"text-sm font-medium",children:"Subscription Plan Distribution"})}),e.jsxs(D,{children:[e.jsx("div",{className:"relative h-40 mx-auto",children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"w-32 h-32 rounded-full border-8 border-primary relative",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-8 border-blue-500 overflow-hidden",style:{clipPath:"polygon(50% 50%, 100% 50%, 100% 100%, 50% 100%)"}}),e.jsx("div",{className:"absolute inset-0 rounded-full border-8 border-green-500 overflow-hidden",style:{clipPath:"polygon(50% 50%, 0 50%, 0 100%, 50% 100%)"}}),e.jsx("div",{className:"absolute inset-0 rounded-full border-8 border-gray-300 overflow-hidden",style:{clipPath:"polygon(50% 50%, 0 0, 50% 0)"}})]})})}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-primary rounded-full mr-2"}),e.jsx("span",{className:"text-sm",children:"Pro (62%)"})]}),e.jsx("span",{className:"text-sm font-medium",children:"156"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-blue-500 rounded-full mr-2"}),e.jsx("span",{className:"text-sm",children:"Basic (18%)"})]}),e.jsx("span",{className:"text-sm font-medium",children:"45"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),e.jsx("span",{className:"text-sm",children:"Enterprise (16%)"})]}),e.jsx("span",{className:"text-sm font-medium",children:"41"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-gray-300 rounded-full mr-2"}),e.jsx("span",{className:"text-sm",children:"Free (4%)"})]}),e.jsx("span",{className:"text-sm font-medium",children:"12"})]})]})]})]}),e.jsxs(P,{className:"col-span-2",children:[e.jsx(I,{children:e.jsx(M,{className:"text-sm font-medium",children:"Recent Platform Activity"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((a,r)=>e.jsxs("div",{className:"flex items-start pb-4 border-b border-gray-100 last:border-0 last:pb-0",children:[e.jsx("div",{className:`
                            flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center
                            ${r%4===0?"bg-green-100 text-green-600":r%4===1?"bg-blue-100 text-blue-600":r%4===2?"bg-amber-100 text-amber-600":"bg-red-100 text-red-600"}
                          `,children:r%4===0?e.jsx(Os,{className:"h-5 w-5"}):r%4===1?e.jsx(et,{className:"h-5 w-5"}):r%4===2?e.jsx(Ye,{className:"h-5 w-5"}):e.jsx(_e,{className:"h-5 w-5"})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsxs("p",{className:"text-sm",children:[r%4===0&&e.jsx("span",{className:"font-medium",children:"New vendor"}),r%4===1&&e.jsx("span",{className:"font-medium",children:"Plan upgrade"}),r%4===2&&e.jsx("span",{className:"font-medium",children:"New domain"}),r%4===3&&e.jsx("span",{className:"font-medium",children:"SSL Error"}),r%4===0&&" Urban Style has registered and selected the Free plan",r%4===1&&" Fresh Organics upgraded from Basic to Pro plan",r%4===2&&" Tech Haven added a new custom domain: techwearshop.com",r%4===3&&" Domain techhaven.com has SSL configuration issues"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r===0?"Today at 10:32 AM":r===1?"Yesterday at 4:15 PM":r===2?"Yesterday at 1:45 PM":r===3?"Aug 23, 2023":"Aug 21, 2023"})]})]},r))})})]})]})]})]})})]})]})},On=()=>{var u;const{user:s}=We(),t=s==null?void 0:s.id,{data:a,isLoading:r}=Z({queryKey:["/api/vendors",t],enabled:!!t}),{data:d}=Z({queryKey:[`/api/vendors/${t}/products`],enabled:!!t}),{data:n}=Z({queryKey:[`/api/vendors/${t}/orders`],enabled:!!t}),x=(n==null?void 0:n.reduce((i,o)=>o.paymentStatus==="paid"?i+parseFloat(o.total.toString()):i,0))||0;return e.jsxs(ue,{title:"Vendor Dashboard",subtitle:"Manage your store, products, and view analytics",children:[(a==null?void 0:a.subscriptionStatus)==="trial"&&e.jsx(P,{className:"mb-6 border-amber-200 bg-amber-50",children:e.jsxs(D,{className:"flex justify-between items-center p-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(_e,{className:"h-5 w-5 text-amber-500 mr-2"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-amber-800",children:["Your trial ends in ",a.trialEndsAt?Math.max(0,Math.ceil((new Date(a.trialEndsAt).getTime()-Date.now())/(1e3*60*60*24))):14," days"]}),e.jsx("p",{className:"text-xs text-amber-700",children:"Upgrade to a paid plan to continue using all features"})]})]}),e.jsx(p,{variant:"default",size:"sm",children:"Upgrade Now"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(us,{title:"Orders",value:(n==null?void 0:n.length)||0,icon:e.jsx(Ie,{className:"h-5 w-5 text-primary"}),change:{value:18.2,isPositive:!0,text:"from last month"}}),e.jsx(us,{title:"Products",value:(d==null?void 0:d.length)||0,icon:e.jsx(Ps,{className:"h-5 w-5 text-indigo-600"}),change:{value:4,isPositive:!0,text:"new this week"}}),e.jsx(us,{title:"Revenue",value:_t(x),icon:e.jsx(zs,{className:"h-5 w-5 text-green-600"}),change:{value:12.5,isPositive:!0,text:"from last month"}}),e.jsx(us,{title:"Conversion Rate",value:`${1.51}%`,icon:e.jsx(zt,{className:"h-5 w-5 text-purple-600"}),change:{value:.3,isPositive:!1,text:"from last month"}})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-7 gap-6",children:[e.jsxs(P,{className:"lg:col-span-4",children:[e.jsxs(I,{className:"flex flex-row items-center justify-between py-4",children:[e.jsx(M,{className:"text-base font-semibold",children:"Recent Orders"}),e.jsx(p,{variant:"ghost",className:"h-8 text-xs",asChild:!0,children:e.jsxs("a",{href:"/orders",children:["View all",e.jsx(Za,{className:"ml-1 h-3 w-3"})]})})]}),e.jsx(D,{children:n&&n.length>0?e.jsx("div",{className:"space-y-4",children:n.slice(0,5).map(i=>e.jsxs("div",{className:"flex justify-between items-center pb-4 border-b border-gray-100 last:border-0 last:pb-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-gray-100 w-10 h-10 rounded-full flex items-center justify-center",children:e.jsx(Ie,{className:"h-5 w-5 text-gray-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium",children:i.orderNumber}),e.jsx("p",{className:"text-xs text-gray-500",children:$s(i.createdAt)})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(J,{variant:i.status==="completed"?"success":i.status==="processing"?"pending":i.status==="shipped"?"secondary":i.status==="canceled"?"error":"warning",children:i.status.charAt(0).toUpperCase()+i.status.slice(1)}),e.jsx("span",{className:"text-sm font-medium",children:_t(i.total)})]})]},i.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ie,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("h3",{className:"text-gray-500 text-lg font-medium mb-1",children:"No orders yet"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Orders will appear here when customers make purchases"})]})})]}),e.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[e.jsxs(P,{children:[e.jsx(I,{className:"py-4",children:e.jsx(M,{className:"text-base font-semibold",children:"Store Status"})}),e.jsx(D,{className:"space-y-4",children:r?e.jsxs("div",{className:"space-y-4",children:[e.jsx(E,{className:"h-4 w-full"}),e.jsx(E,{className:"h-4 w-full"}),e.jsx(E,{className:"h-4 w-full"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Status:"}),e.jsx(J,{variant:(a==null?void 0:a.status)==="active"?"success":"warning",children:a!=null&&a.status?`${a.status.charAt(0).toUpperCase()}${a.status.slice(1)}`:"Unknown"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Plan:"}),e.jsx("span",{className:"text-sm font-medium",children:((u=a==null?void 0:a.subscriptionPlan)==null?void 0:u.name)||"Free"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Billing:"}),e.jsx("span",{className:"text-sm font-medium",children:a!=null&&a.nextBillingDate?$s(a.nextBillingDate):"N/A"})]}),e.jsx("div",{className:"pt-2",children:e.jsx(p,{variant:"outline",className:"w-full text-sm",children:"Manage Subscription"})})]})})]}),e.jsxs(P,{children:[e.jsx(I,{className:"py-4",children:e.jsx(M,{className:"text-base font-semibold",children:"Your Domains"})}),e.jsx(D,{children:a!=null&&a.domains&&a.domains.length>0?e.jsx("div",{className:"space-y-3",children:a.domains.map(i=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ye,{className:"h-4 w-4 text-gray-500 mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:i.name}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsx("span",{className:C("inline-block w-2 h-2 rounded-full mr-1",i.status==="active"?"bg-green-500":i.status==="pending"?"bg-amber-500":"bg-red-500")}),i.status?`${i.status.charAt(0).toUpperCase()}${i.status.slice(1)}`:"Unknown",i.isPrimary&&e.jsx(J,{variant:"outline",className:"ml-2 text-[10px] py-0 h-4",children:"Primary"})]})]})]}),e.jsx(p,{variant:"ghost",size:"sm",className:"h-8 text-xs",children:"View"})]},i.id))}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(Ye,{className:"h-10 w-10 text-gray-300 mx-auto mb-2"}),e.jsx("h3",{className:"text-gray-500 text-sm font-medium mb-1",children:"No domains configured"}),e.jsx("p",{className:"text-gray-400 text-xs mb-3",children:"Add a custom domain to make your store more professional"}),e.jsx(p,{variant:"outline",size:"sm",className:"text-xs",children:"Add Domain"})]})})]})]})]})]})},$e=Ui,Oe=qi,Ae=h.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(er,{ref:r,className:C("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...a,children:[t,e.jsx(Mi,{asChild:!0,children:e.jsx(Ss,{className:"h-4 w-4 opacity-50"})})]}));Ae.displayName=er.displayName;const Kr=h.forwardRef(({className:s,...t},a)=>e.jsx(sr,{ref:a,className:C("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Ri,{className:"h-4 w-4"})}));Kr.displayName=sr.displayName;const Gr=h.forwardRef(({className:s,...t},a)=>e.jsx(tr,{ref:a,className:C("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Ss,{className:"h-4 w-4"})}));Gr.displayName=tr.displayName;const Le=h.forwardRef(({className:s,children:t,position:a="popper",...r},d)=>e.jsx($i,{children:e.jsxs(ar,{ref:d,className:C("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:a,...r,children:[e.jsx(Kr,{}),e.jsx(Oi,{className:C("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(Gr,{})]})}));Le.displayName=ar.displayName;const Vn=h.forwardRef(({className:s,...t},a)=>e.jsx(rr,{ref:a,className:C("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));Vn.displayName=rr.displayName;const te=h.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(ir,{ref:r,className:C("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Vi,{children:e.jsx(Ke,{className:"h-4 w-4"})})}),e.jsx(zi,{children:t})]}));te.displayName=ir.displayName;const zn=h.forwardRef(({className:s,...t},a)=>e.jsx(lr,{ref:a,className:C("-mx-1 my-1 h-px bg-muted",s),...t}));zn.displayName=lr.displayName;const Un=({onAddVendor:s,onEditVendor:t,onDeleteVendor:a})=>{const[r,d]=h.useState(""),[n,x]=h.useState("all"),[m,u]=h.useState("all"),[i,o]=h.useState(1),c=10,{data:l,isLoading:v}=Z({queryKey:["/api/vendors"]}),j=l?l.filter(y=>{var U;const V=y.companyName.toLowerCase().includes(r.toLowerCase())||((U=y.user)==null?void 0:U.email.toLowerCase().includes(r.toLowerCase())),S=n==="all"||y.status===n,$=m==="all"||y.subscriptionPlan&&y.subscriptionPlan.name.toLowerCase()===m.toLowerCase();return V&&S&&$}):[],g=Math.ceil(j.length/c),k=j.slice((i-1)*c,i*c),b=y=>{switch(y){case"active":return"success";case"pending":return"warning";case"suspended":return"error";default:return"secondary"}};return v?e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"Vendors"}),e.jsx(re,{children:"Manage all vendors on your platform"})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"flex flex-col-reverse md:flex-row md:items-center md:justify-between mb-6 space-y-4 md:space-y-0",children:[e.jsx(E,{className:"h-10 w-full md:w-64"}),e.jsx(E,{className:"h-10 w-40"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsx(E,{className:"h-10 w-full md:flex-1"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(E,{className:"h-10 w-full sm:w-40"}),e.jsx(E,{className:"h-10 w-full sm:w-40"})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsxs("table",{className:"w-full caption-bottom text-sm",children:[e.jsx("thead",{className:"[&_tr]:border-b",children:e.jsxs("tr",{className:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",children:[e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Vendor"}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Status"}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Plan"}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Revenue"}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Domains"}),e.jsx("th",{className:"h-12 px-4 text-right align-middle font-medium text-muted-foreground",children:"Actions"})]})}),e.jsx("tbody",{className:"[&_tr:last-child]:border-0",children:Array.from({length:5}).map((y,V)=>e.jsxs("tr",{className:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",children:[e.jsx("td",{className:"p-4 align-middle",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{children:[e.jsx(E,{className:"h-4 w-24"}),e.jsx(E,{className:"h-3 w-32 mt-1"})]})]})}),e.jsx("td",{className:"p-4 align-middle",children:e.jsx(E,{className:"h-5 w-16"})}),e.jsx("td",{className:"p-4 align-middle",children:e.jsx(E,{className:"h-4 w-12"})}),e.jsx("td",{className:"p-4 align-middle",children:e.jsx(E,{className:"h-4 w-16"})}),e.jsx("td",{className:"p-4 align-middle",children:e.jsx(E,{className:"h-4 w-8"})}),e.jsx("td",{className:"p-4 align-middle text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(E,{className:"h-8 w-8 rounded-md"}),e.jsx(E,{className:"h-8 w-8 rounded-md"}),e.jsx(E,{className:"h-8 w-8 rounded-md"})]})})]},V))})]})})})]})]}):e.jsxs(P,{children:[e.jsxs(I,{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-2 md:space-y-0",children:[e.jsxs("div",{children:[e.jsx(M,{children:"Vendors"}),e.jsx(re,{children:"Manage all vendors on your platform"})]}),e.jsxs(p,{onClick:s,children:[e.jsx(Os,{className:"mr-2 h-4 w-4"}),"Add New Vendor"]})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(He,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(L,{placeholder:"Search vendors...",value:r,onChange:y=>d(y.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs($e,{value:n,onValueChange:x,children:[e.jsx(Ae,{className:"w-full sm:w-[180px]",children:e.jsx(Oe,{placeholder:"All Statuses"})}),e.jsxs(Le,{children:[e.jsx(te,{value:"all",children:"All Statuses"}),e.jsx(te,{value:"active",children:"Active"}),e.jsx(te,{value:"pending",children:"Pending"}),e.jsx(te,{value:"suspended",children:"Suspended"})]})]}),e.jsxs($e,{value:m,onValueChange:u,children:[e.jsx(Ae,{className:"w-full sm:w-[180px]",children:e.jsx(Oe,{placeholder:"All Plans"})}),e.jsxs(Le,{children:[e.jsx(te,{value:"all",children:"All Plans"}),e.jsx(te,{value:"free",children:"Free"}),e.jsx(te,{value:"basic",children:"Basic"}),e.jsx(te,{value:"pro",children:"Pro"}),e.jsx(te,{value:"enterprise",children:"Enterprise"})]})]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsxs("table",{className:"w-full caption-bottom text-sm",children:[e.jsx("thead",{className:"[&_tr]:border-b",children:e.jsxs("tr",{className:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",children:[e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Vendor"}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Status"}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Plan"}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Revenue"}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Domains"}),e.jsx("th",{className:"h-12 px-4 text-right align-middle font-medium text-muted-foreground",children:"Actions"})]})}),e.jsx("tbody",{className:"[&_tr:last-child]:border-0",children:k.length>0?k.map(y=>{var V,S,$;return e.jsxs("tr",{className:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",children:[e.jsx("td",{className:"p-4 align-middle",children:e.jsxs("div",{className:"flex items-center gap-3",children:[y.logoUrl?e.jsx("img",{src:y.logoUrl,alt:y.companyName,className:"h-10 w-10 rounded-full object-cover"}):e.jsx("div",{className:"flex h-10 w-10 rounded-full bg-primary/10 items-center justify-center",children:e.jsx("span",{className:"text-primary font-medium",children:y.companyName.charAt(0)})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:y.companyName}),e.jsx("p",{className:"text-xs text-muted-foreground",children:(V=y.user)==null?void 0:V.email})]})]})}),e.jsx("td",{className:"p-4 align-middle",children:e.jsx(J,{variant:b(y.status),children:y.status.charAt(0).toUpperCase()+y.status.slice(1)})}),e.jsx("td",{className:"p-4 align-middle text-sm text-muted-foreground",children:((S=y.subscriptionPlan)==null?void 0:S.name)||"Free"}),e.jsxs("td",{className:"p-4 align-middle text-sm text-muted-foreground",children:["$",Math.floor(Math.random()*1e4)," "]}),e.jsx("td",{className:"p-4 align-middle text-sm text-muted-foreground",children:(($=y.domains)==null?void 0:$.length)||0}),e.jsx("td",{className:"p-4 align-middle text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(p,{variant:"ghost",size:"icon",asChild:!0,children:e.jsxs(je,{href:`/vendors/${y.id}`,children:[e.jsx(kt,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"View"})]})}),e.jsxs(p,{variant:"ghost",size:"icon",onClick:()=>t(y.id),children:[e.jsx(Ks,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Edit"})]}),e.jsxs(p,{variant:"ghost",size:"icon",onClick:()=>a(y.id),children:[e.jsx(ze,{className:"h-4 w-4 text-destructive"}),e.jsx("span",{className:"sr-only",children:"Delete"})]})]})})]},y.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-4 text-center text-muted-foreground",children:"No vendors found. Adjust filters or add a new vendor."})})})]})})}),g>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",e.jsx("span",{className:"font-medium",children:(i-1)*c+1})," ","to"," ",e.jsx("span",{className:"font-medium",children:Math.min(i*c,j.length)})," ","of ",e.jsx("span",{className:"font-medium",children:j.length})," vendors"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(p,{variant:"outline",size:"icon",onClick:()=>o(y=>Math.max(y-1,1)),disabled:i===1,children:[e.jsx(ot,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Previous Page"})]}),e.jsxs(p,{variant:"outline",size:"icon",onClick:()=>o(y=>Math.min(y+1,g)),disabled:i===g,children:[e.jsx(Bs,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Next Page"})]})]})]})]})]})},ss=h.forwardRef(({className:s,...t},a)=>e.jsx("textarea",{className:C("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...t}));ss.displayName="Textarea";const qn=T.object({companyName:T.string().min(2,"Company name must be at least 2 characters"),description:T.string().optional(),userId:T.number().optional(),email:T.string().email("Invalid email address"),firstName:T.string().min(2,"First name must be at least 2 characters"),lastName:T.string().min(2,"Last name must be at least 2 characters"),password:T.string().min(6,"Password must be at least 6 characters").optional(),subscriptionPlanId:T.number().optional(),subdomainName:T.string().min(3,"Subdomain must be at least 3 characters").optional(),createSubdomain:T.boolean().default(!0)}),bt=({vendorId:s,onSuccess:t})=>{const{toast:a}=me(),r=Qe(),[d,n]=h.useState(!1),{data:x}=Z({queryKey:["/api/subscription-plans"]}),{data:m,isLoading:u}=Z({queryKey:["/api/vendors",s],enabled:!!s}),i=Pe({resolver:ke(qn),defaultValues:{companyName:"",description:"",email:"",firstName:"",lastName:"",password:"",createSubdomain:!0,subdomainName:""}});h.useEffect(()=>{m&&s?(i.reset({companyName:m.companyName,description:m.description||"",subscriptionPlanId:m.subscriptionPlanId,...m.user&&{email:m.user.email,firstName:m.user.firstName,lastName:m.user.lastName}}),n(!1)):n(!0)},[m,s,i]);const o=ne({mutationFn:async l=>{if(s)await ee("PATCH",`/api/vendors/${s}`,{companyName:l.companyName,description:l.description,subscriptionPlanId:l.subscriptionPlanId});else if(d){const v={email:l.email,firstName:l.firstName,lastName:l.lastName,password:l.password,role:"vendor"},g=await(await ee("POST","/api/auth/register",v)).json();await ee("POST","/api/vendors",{userId:g.id,companyName:l.companyName,description:l.description,subscriptionPlanId:l.subscriptionPlanId,createSubdomain:l.createSubdomain,subdomainName:l.subdomainName})}else await ee("POST","/api/vendors",{companyName:l.companyName,description:l.description,subscriptionPlanId:l.subscriptionPlanId})},onSuccess:()=>{a({title:s?"Vendor updated":"Vendor created",description:s?"The vendor has been updated successfully.":"The vendor has been created successfully."}),r.invalidateQueries({queryKey:["/api/vendors"]}),s&&r.invalidateQueries({queryKey:["/api/vendors",s]}),t&&t()},onError:l=>{a({title:"Error",description:`Failed to ${s?"update":"create"} vendor: ${l.message}`,variant:"destructive"})}}),c=l=>{o.mutate(l)};return u&&s?e.jsx(P,{children:e.jsx(D,{className:"pt-6",children:e.jsx("div",{className:"flex items-center justify-center p-6",children:e.jsx(oe,{className:"h-8 w-8 animate-spin text-primary"})})})}):e.jsxs(P,{children:[e.jsx(I,{children:e.jsx(M,{children:s?"Edit Vendor":"Add New Vendor"})}),e.jsx(D,{children:e.jsx(Me,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(c),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(K,{control:i.control,name:"companyName",render:({field:l})=>e.jsxs(q,{children:[e.jsx(_,{children:"Company Name *"}),e.jsx(G,{children:e.jsx(L,{placeholder:"Enter company name",...l})}),e.jsx(Q,{})]})}),e.jsx(K,{control:i.control,name:"description",render:({field:l})=>e.jsxs(q,{children:[e.jsx(_,{children:"Description"}),e.jsx(G,{children:e.jsx(ss,{placeholder:"Brief description of the vendor",className:"min-h-[100px]",...l})}),e.jsx(Q,{})]})}),e.jsx(K,{control:i.control,name:"subscriptionPlanId",render:({field:l})=>{var v;return e.jsxs(q,{children:[e.jsx(_,{children:"Subscription Plan"}),e.jsxs($e,{onValueChange:j=>l.onChange(parseInt(j)),defaultValue:(v=l.value)==null?void 0:v.toString(),children:[e.jsx(G,{children:e.jsx(Ae,{children:e.jsx(Oe,{placeholder:"Select a plan"})})}),e.jsx(Le,{children:x==null?void 0:x.map(j=>e.jsxs(te,{value:j.id.toString(),children:[j.name," - $",parseFloat(j.price).toFixed(2),"/month"]},j.id))})]}),e.jsx(Q,{})]})}})]}),d&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(K,{control:i.control,name:"email",render:({field:l})=>e.jsxs(q,{children:[e.jsx(_,{children:"Email *"}),e.jsx(G,{children:e.jsx(L,{placeholder:"Enter email address",type:"email",...l})}),e.jsx(Q,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(K,{control:i.control,name:"firstName",render:({field:l})=>e.jsxs(q,{children:[e.jsx(_,{children:"First Name *"}),e.jsx(G,{children:e.jsx(L,{placeholder:"First name",...l})}),e.jsx(Q,{})]})}),e.jsx(K,{control:i.control,name:"lastName",render:({field:l})=>e.jsxs(q,{children:[e.jsx(_,{children:"Last Name *"}),e.jsx(G,{children:e.jsx(L,{placeholder:"Last name",...l})}),e.jsx(Q,{})]})})]}),e.jsx(K,{control:i.control,name:"password",render:({field:l})=>e.jsxs(q,{children:[e.jsx(_,{children:"Password *"}),e.jsx(G,{children:e.jsx(L,{placeholder:"Enter password",type:"password",...l})}),e.jsx(Q,{})]})}),e.jsx(K,{control:i.control,name:"createSubdomain",render:({field:l})=>e.jsxs(q,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(G,{children:e.jsx("input",{type:"checkbox",checked:l.value,onChange:l.onChange,className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:"Create subdomain"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Automatically create a subdomain for this vendor"})]})]})}),i.watch("createSubdomain")&&e.jsx(K,{control:i.control,name:"subdomainName",render:({field:l})=>e.jsxs(q,{children:[e.jsx(_,{children:"Subdomain Name *"}),e.jsxs("div",{className:"flex",children:[e.jsx(G,{children:e.jsx(L,{placeholder:"subdomain",...l})}),e.jsx("span",{className:"flex items-center ml-2 text-gray-500",children:".multivend.com"})]}),e.jsx(Q,{})]})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(p,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),e.jsxs(p,{type:"submit",disabled:o.isPending,children:[o.isPending&&e.jsx(oe,{className:"mr-2 h-4 w-4 animate-spin"}),s?"Update Vendor":"Create Vendor"]})]})]})})})]})},Re=Gi,_r=_i,Bn=Ki,Qr=h.forwardRef(({className:s,...t},a)=>e.jsx(nr,{ref:a,className:C("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t}));Qr.displayName=nr.displayName;const Te=h.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(Bn,{children:[e.jsx(Qr,{}),e.jsxs(cr,{ref:r,className:C("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a,children:[t,e.jsxs(Bi,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(ps,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Te.displayName=cr.displayName;const ms=({className:s,...t})=>e.jsx("div",{className:C("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});ms.displayName="DialogHeader";const qs=({className:s,...t})=>e.jsx("div",{className:C("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});qs.displayName="DialogFooter";const xs=h.forwardRef(({className:s,...t},a)=>e.jsx(dr,{ref:a,className:C("text-lg font-semibold leading-none tracking-tight",s),...t}));xs.displayName=dr.displayName;const js=h.forwardRef(({className:s,...t},a)=>e.jsx(or,{ref:a,className:C("text-sm text-muted-foreground",s),...t}));js.displayName=or.displayName;const hs=Wi,ia=Yi,Kn=Qi,Wr=h.forwardRef(({className:s,...t},a)=>e.jsx(mr,{className:C("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:a}));Wr.displayName=mr.displayName;const ts=h.forwardRef(({className:s,...t},a)=>e.jsxs(Kn,{children:[e.jsx(Wr,{}),e.jsx(xr,{ref:a,className:C("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));ts.displayName=xr.displayName;const as=({className:s,...t})=>e.jsx("div",{className:C("flex flex-col space-y-2 text-center sm:text-left",s),...t});as.displayName="AlertDialogHeader";const rs=({className:s,...t})=>e.jsx("div",{className:C("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});rs.displayName="AlertDialogFooter";const is=h.forwardRef(({className:s,...t},a)=>e.jsx(hr,{ref:a,className:C("text-lg font-semibold",s),...t}));is.displayName=hr.displayName;const ls=h.forwardRef(({className:s,...t},a)=>e.jsx(ur,{ref:a,className:C("text-sm text-muted-foreground",s),...t}));ls.displayName=ur.displayName;const ns=h.forwardRef(({className:s,...t},a)=>e.jsx(pr,{ref:a,className:C(Us(),s),...t}));ns.displayName=pr.displayName;const cs=h.forwardRef(({className:s,...t},a)=>e.jsx(jr,{ref:a,className:C(Us({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));cs.displayName=jr.displayName;const Gn=()=>{const[s,t]=h.useState(!1),[a,r]=h.useState(!1),[d,n]=h.useState(!1),[x,m]=h.useState(null),{toast:u}=me(),i=Qe(),o=ne({mutationFn:async g=>{await ee("DELETE",`/api/vendors/${g}`)},onSuccess:()=>{u({title:"Vendor deleted",description:"The vendor has been deleted successfully."}),i.invalidateQueries({queryKey:["/api/vendors"]}),n(!1)},onError:g=>{u({title:"Error",description:`Failed to delete vendor: ${g.message}`,variant:"destructive"})}}),c=()=>{t(!0)},l=g=>{m(g),r(!0)},v=g=>{m(g),n(!0)},j=()=>{x&&o.mutate(x)};return e.jsxs(ue,{title:"Vendors",subtitle:"Manage all vendors on your platform",children:[e.jsx(Un,{onAddVendor:c,onEditVendor:l,onDeleteVendor:v}),e.jsx(Re,{open:s,onOpenChange:t,children:e.jsx(Te,{className:"max-w-3xl",children:e.jsx(bt,{onSuccess:()=>t(!1)})})}),e.jsx(Re,{open:a,onOpenChange:r,children:e.jsx(Te,{className:"max-w-3xl",children:e.jsx(bt,{vendorId:x||void 0,onSuccess:()=>r(!1)})})}),e.jsx(hs,{open:d,onOpenChange:n,children:e.jsxs(ts,{children:[e.jsxs(as,{children:[e.jsx(is,{children:"Are you sure?"}),e.jsx(ls,{children:"This action cannot be undone. This will permanently delete the vendor account, all associated data, and remove access from the platform."})]}),e.jsxs(rs,{children:[e.jsx(cs,{children:"Cancel"}),e.jsx(ns,{onClick:j,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})},Yr=({vendorId:s,onAddDomain:t,onEditDomain:a,onDeleteDomain:r})=>{const[d,n]=h.useState(""),[x,m]=h.useState("all"),[u,i]=h.useState("all"),[o,c]=h.useState(1),l=10,{data:v,isLoading:j}=Z({queryKey:s?["/api/vendors",s,"domains"]:["/api/domains"]}),g=v?v.filter(S=>{const $=S.name.toLowerCase().includes(d.toLowerCase()),U=x==="all"||S.status===x,F=u==="all"||S.type===u;return $&&U&&F}):[],k=Math.ceil(g.length/l),b=g.slice((o-1)*l,o*l),y=S=>{switch(S){case"active":return"success";case"pending":return"warning";case"error":return"error";default:return"secondary"}},V=S=>{switch(S){case"valid":return{icon:e.jsx(lt,{className:"h-4 w-4 text-green-500 mr-1"}),text:"Secure",className:"text-green-500"};case"pending":return{icon:e.jsx(lt,{className:"h-4 w-4 text-yellow-500 mr-1"}),text:"Pending",className:"text-yellow-500"};default:return{icon:e.jsx(_e,{className:"h-4 w-4 text-red-500 mr-1"}),text:"Not Secure",className:"text-red-500"}}};return j?e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"Domain Management"}),e.jsx(re,{children:"Manage all domains connected to vendor stores"})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"flex flex-col-reverse md:flex-row md:items-center md:justify-between mb-6 space-y-4 md:space-y-0",children:[e.jsx(E,{className:"h-10 w-full md:w-64"}),e.jsx(E,{className:"h-10 w-40"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsx(E,{className:"h-10 w-full md:flex-1"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(E,{className:"h-10 w-full sm:w-40"}),e.jsx(E,{className:"h-10 w-full sm:w-40"})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsxs("table",{className:"w-full caption-bottom text-sm",children:[e.jsx("thead",{className:"[&_tr]:border-b",children:e.jsxs("tr",{className:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",children:[e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Domain"}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Vendor"}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Type"}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Status"}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"SSL"}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Expiration"}),e.jsx("th",{className:"h-12 px-4 text-right align-middle font-medium text-muted-foreground",children:"Actions"})]})}),e.jsx("tbody",{className:"[&_tr:last-child]:border-0",children:Array.from({length:5}).map((S,$)=>e.jsxs("tr",{className:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",children:[e.jsx("td",{className:"p-4 align-middle",children:e.jsx(E,{className:"h-4 w-40"})}),e.jsx("td",{className:"p-4 align-middle",children:e.jsx(E,{className:"h-4 w-24"})}),e.jsx("td",{className:"p-4 align-middle",children:e.jsx(E,{className:"h-4 w-16"})}),e.jsx("td",{className:"p-4 align-middle",children:e.jsx(E,{className:"h-5 w-16"})}),e.jsx("td",{className:"p-4 align-middle",children:e.jsx(E,{className:"h-4 w-20"})}),e.jsx("td",{className:"p-4 align-middle",children:e.jsx(E,{className:"h-4 w-24"})}),e.jsx("td",{className:"p-4 align-middle text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(E,{className:"h-8 w-8 rounded-md"}),e.jsx(E,{className:"h-8 w-8 rounded-md"}),e.jsx(E,{className:"h-8 w-8 rounded-md"})]})})]},$))})]})})})]})]}):e.jsxs(P,{children:[e.jsxs(I,{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-2 md:space-y-0",children:[e.jsxs("div",{children:[e.jsx(M,{children:"Domain Management"}),e.jsx(re,{children:s?"Manage domains for this vendor":"Manage all domains connected to vendor stores"})]}),e.jsxs(p,{onClick:t,children:[e.jsx(Ye,{className:"mr-2 h-4 w-4"}),"Add New Domain"]})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(He,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(L,{placeholder:"Search domains...",value:d,onChange:S=>n(S.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs($e,{value:x,onValueChange:m,children:[e.jsx(Ae,{className:"w-full sm:w-[180px]",children:e.jsx(Oe,{placeholder:"All Statuses"})}),e.jsxs(Le,{children:[e.jsx(te,{value:"all",children:"All Statuses"}),e.jsx(te,{value:"active",children:"Active"}),e.jsx(te,{value:"pending",children:"Pending"}),e.jsx(te,{value:"error",children:"Error"})]})]}),e.jsxs($e,{value:u,onValueChange:i,children:[e.jsx(Ae,{className:"w-full sm:w-[180px]",children:e.jsx(Oe,{placeholder:"All Types"})}),e.jsxs(Le,{children:[e.jsx(te,{value:"all",children:"All Types"}),e.jsx(te,{value:"subdomain",children:"Subdomain"}),e.jsx(te,{value:"custom",children:"Custom Domain"})]})]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsxs("table",{className:"w-full caption-bottom text-sm",children:[e.jsx("thead",{className:"[&_tr]:border-b",children:e.jsxs("tr",{className:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",children:[e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Domain"}),!s&&e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Vendor"}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Type"}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Status"}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"SSL"}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Expiration"}),e.jsx("th",{className:"h-12 px-4 text-right align-middle font-medium text-muted-foreground",children:"Actions"})]})}),e.jsx("tbody",{className:"[&_tr:last-child]:border-0",children:b.length>0?b.map(S=>{var U;const $=V(S.sslStatus);return e.jsxs("tr",{className:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",children:[e.jsx("td",{className:"p-4 align-middle",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ye,{className:"h-4 w-4 text-muted-foreground mr-2"}),e.jsx("span",{className:"font-medium",children:S.name}),S.isPrimary&&e.jsx(J,{variant:"secondary",className:"ml-2",children:"Primary"})]})}),!s&&e.jsx("td",{className:"p-4 align-middle text-sm",children:((U=S.vendor)==null?void 0:U.companyName)||"Unknown Vendor"}),e.jsx("td",{className:"p-4 align-middle text-sm capitalize",children:S.type}),e.jsx("td",{className:"p-4 align-middle",children:e.jsx(J,{variant:y(S.status),children:S.status.charAt(0).toUpperCase()+S.status.slice(1)})}),e.jsx("td",{className:"p-4 align-middle text-sm",children:e.jsxs("div",{className:`flex items-center ${$.className}`,children:[$.icon,e.jsx("span",{children:$.text})]})}),e.jsx("td",{className:"p-4 align-middle text-sm text-muted-foreground",children:new Date(S.expiresAt).toLocaleDateString()}),e.jsx("td",{className:"p-4 align-middle text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(je,{href:`/domains/${S.id}`,children:e.jsxs(p,{variant:"ghost",size:"icon",children:[e.jsx(kt,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"View"})]})}),e.jsxs(p,{variant:"ghost",size:"icon",onClick:()=>a(S.id),children:[e.jsx(Ks,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Edit"})]}),e.jsxs(p,{variant:"ghost",size:"icon",onClick:()=>r(S.id),children:[e.jsx(ze,{className:"h-4 w-4 text-destructive"}),e.jsx("span",{className:"sr-only",children:"Delete"})]})]})})]},S.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:s?6:7,className:"p-4 text-center text-muted-foreground",children:"No domains found. Adjust filters or add a new domain."})})})]})})}),k>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",e.jsx("span",{className:"font-medium",children:(o-1)*l+1})," ","to"," ",e.jsx("span",{className:"font-medium",children:Math.min(o*l,g.length)})," ","of ",e.jsx("span",{className:"font-medium",children:g.length})," domains"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(p,{variant:"outline",size:"icon",onClick:()=>c(S=>Math.max(S-1,1)),disabled:o===1,children:[e.jsx(ot,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Previous Page"})]}),e.jsxs(p,{variant:"outline",size:"icon",onClick:()=>c(S=>Math.min(S+1,k)),disabled:o===k,children:[e.jsx(Bs,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Next Page"})]})]})]})]})]})},ks=h.forwardRef(({className:s,...t},a)=>e.jsx(gr,{ref:a,className:C("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...t,children:e.jsx(Hi,{className:C("flex items-center justify-center text-current"),children:e.jsx(Ke,{className:"h-4 w-4"})})}));ks.displayName=gr.displayName;const _n=T.object({vendorId:T.number(),name:T.string().min(2,"Domain name is required"),type:T.enum(["subdomain","custom"]),isPrimary:T.boolean().default(!1)}),wt=({domainId:s,vendorId:t,onSuccess:a})=>{const{toast:r}=me(),d=Qe(),{data:n}=Z({queryKey:["/api/vendors"],enabled:!t}),{data:x,isLoading:m}=Z({queryKey:["/api/domains",s],enabled:!!s}),u=Pe({resolver:ke(_n),defaultValues:{vendorId:t||0,name:"",type:"subdomain",isPrimary:!1}});h.useEffect(()=>{x&&s?u.reset({vendorId:x.vendorId,name:x.name,type:x.type,isPrimary:x.isPrimary}):t&&u.setValue("vendorId",t)},[x,s,t,u]);const i=ne({mutationFn:async l=>{s?await ee("PATCH",`/api/domains/${s}`,l):await ee("POST","/api/domains",l)},onSuccess:()=>{r({title:s?"Domain updated":"Domain created",description:s?"The domain has been updated successfully.":"The domain has been created successfully."}),d.invalidateQueries({queryKey:["/api/domains"]}),t&&d.invalidateQueries({queryKey:["/api/vendors",t,"domains"]}),s&&d.invalidateQueries({queryKey:["/api/domains",s]}),a&&a()},onError:l=>{r({title:"Error",description:`Failed to ${s?"update":"create"} domain: ${l.message}`,variant:"destructive"})}}),o=l=>{i.mutate(l)},c=u.watch("type");return m&&s?e.jsx(P,{children:e.jsx(D,{className:"pt-6",children:e.jsx("div",{className:"flex items-center justify-center p-6",children:e.jsx(oe,{className:"h-8 w-8 animate-spin text-primary"})})})}):e.jsxs(P,{children:[e.jsx(I,{children:e.jsx(M,{children:s?"Edit Domain":"Add New Domain"})}),e.jsx(D,{children:e.jsx(Me,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(o),className:"space-y-6",children:[!t&&e.jsx(K,{control:u.control,name:"vendorId",render:({field:l})=>{var v;return e.jsxs(q,{children:[e.jsx(_,{children:"Vendor *"}),e.jsxs($e,{onValueChange:j=>l.onChange(parseInt(j)),defaultValue:(v=l.value)==null?void 0:v.toString(),children:[e.jsx(G,{children:e.jsx(Ae,{children:e.jsx(Oe,{placeholder:"Select a vendor"})})}),e.jsx(Le,{children:n==null?void 0:n.map(j=>e.jsx(te,{value:j.id.toString(),children:j.companyName},j.id))})]}),e.jsx(Q,{})]})}}),e.jsx(K,{control:u.control,name:"type",render:({field:l})=>e.jsxs(q,{children:[e.jsx(_,{children:"Domain Type *"}),e.jsxs($e,{onValueChange:l.onChange,defaultValue:l.value,children:[e.jsx(G,{children:e.jsx(Ae,{children:e.jsx(Oe,{placeholder:"Select domain type"})})}),e.jsxs(Le,{children:[e.jsx(te,{value:"subdomain",children:"Subdomain"}),e.jsx(te,{value:"custom",children:"Custom Domain"})]})]}),e.jsx(Q,{})]})}),e.jsx(K,{control:u.control,name:"name",render:({field:l})=>e.jsxs(q,{children:[e.jsx(_,{children:"Domain Name *"}),c==="subdomain"?e.jsxs("div",{className:"flex",children:[e.jsx(G,{children:e.jsx(L,{placeholder:"yourdomain",...l})}),e.jsx("span",{className:"flex items-center ml-2 text-gray-500",children:".multivend.com"})]}):e.jsx(G,{children:e.jsx(L,{placeholder:"yourdomain.com",...l})}),e.jsx(ie,{children:c==="custom"?"Enter your custom domain name. You'll need to configure DNS records.":"Enter your desired subdomain."}),e.jsx(Q,{})]})}),e.jsx(K,{control:u.control,name:"isPrimary",render:({field:l})=>e.jsxs(q,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(G,{children:e.jsx(ks,{checked:l.value,onCheckedChange:l.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:"Primary Domain"}),e.jsx(ie,{children:"Set as the primary domain for this vendor"})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(p,{type:"button",variant:"outline",onClick:a,children:"Cancel"}),e.jsxs(p,{type:"submit",disabled:i.isPending,children:[i.isPending&&e.jsx(oe,{className:"mr-2 h-4 w-4 animate-spin"}),s?"Update Domain":"Create Domain"]})]})]})})})]})},Qn=({id:s})=>{var y,V,S;const t=parseInt(s),[a,r]=h.useState(!1),[d,n]=h.useState(!1),[x,m]=h.useState(!1),[u,i]=h.useState(null),{data:o,isLoading:c}=Z({queryKey:["/api/vendors",t]}),{data:l}=Z({queryKey:[`/api/vendors/${t}/products`],enabled:!!t}),{data:v}=Z({queryKey:[`/api/vendors/${t}/orders`],enabled:!!t}),j=()=>{r(!0)},g=()=>{n(!0)},k=$=>{i($),m(!0)},b=$=>{console.log("Delete domain",$)};return c?e.jsx(ue,{title:"Vendor Details",subtitle:"Loading...",children:e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(E,{className:"h-8 w-64 mb-2"}),e.jsx(E,{className:"h-4 w-48"})]}),e.jsxs(D,{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:Array.from({length:4}).map(($,U)=>e.jsx(E,{className:"h-24 w-full"},U))}),e.jsx(E,{className:"h-64 w-full"})]})]})}):o?e.jsxs(ue,{title:o.companyName,subtitle:`Vendor ID: ${o.id} • Created ${$s(o.createdAt)}`,children:[e.jsxs(ve,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(fe,{className:"w-full grid grid-cols-1 md:grid-cols-6 h-auto mb-4",children:[e.jsx(B,{value:"overview",children:"Overview"}),e.jsx(B,{value:"domains",children:"Domains"}),e.jsx(B,{value:"products",children:"Products"}),e.jsx(B,{value:"orders",children:"Orders"}),e.jsx(B,{value:"analytics",children:"Analytics"}),e.jsx(B,{value:"settings",children:"Settings"})]}),e.jsx(H,{value:"overview",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(P,{className:"md:col-span-2",children:[e.jsx(I,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(M,{children:"Vendor Information"}),e.jsx(re,{children:"Basic details about this vendor"})]}),e.jsx(p,{variant:"outline",size:"sm",onClick:j,children:"Edit Vendor"})]})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Business Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Company Name"}),e.jsx("div",{className:"text-sm",children:o.companyName})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Description"}),e.jsx("div",{className:"text-sm",children:o.description||"No description provided"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Status"}),e.jsx(J,{variant:o.status==="active"?"success":o.status==="pending"?"warning":"error",children:o.status.charAt(0).toUpperCase()+o.status.slice(1)})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Owner Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Full Name"}),e.jsx("div",{className:"text-sm",children:o.user?`${o.user.firstName} ${o.user.lastName}`:"Unknown"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Email"}),e.jsx("div",{className:"text-sm",children:((y=o.user)==null?void 0:y.email)||"No email provided"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Member Since"}),e.jsx("div",{className:"text-sm",children:$s(o.createdAt)})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Subscription Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Plan"}),e.jsx("div",{className:"text-sm",children:((V=o.subscriptionPlan)==null?void 0:V.name)||"Free"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Status"}),e.jsx(J,{variant:o.subscriptionStatus==="active"?"success":o.subscriptionStatus==="trial"?"warning":"error",children:o.subscriptionStatus.charAt(0).toUpperCase()+o.subscriptionStatus.slice(1)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Next Billing"}),e.jsx("div",{className:"text-sm",children:o.nextBillingDate?$s(o.nextBillingDate):"N/A"})]})]})]})]})]}),e.jsxs(P,{children:[e.jsx(I,{children:e.jsx(M,{children:"Store Statistics"})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ps,{className:"h-4 w-4 text-muted-foreground mr-2"}),e.jsx("span",{className:"text-sm",children:"Products"})]}),e.jsx("span",{className:"font-medium",children:(l==null?void 0:l.length)||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(os,{className:"h-4 w-4 text-muted-foreground mr-2"}),e.jsx("span",{className:"text-sm",children:"Orders"})]}),e.jsx("span",{className:"font-medium",children:(v==null?void 0:v.length)||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ye,{className:"h-4 w-4 text-muted-foreground mr-2"}),e.jsx("span",{className:"text-sm",children:"Domains"})]}),e.jsx("span",{className:"font-medium",children:((S=o.domains)==null?void 0:S.length)||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Pt,{className:"h-4 w-4 text-muted-foreground mr-2"}),e.jsx("span",{className:"text-sm",children:"Revenue"})]}),e.jsxs("span",{className:"font-medium",children:["$",(v==null?void 0:v.reduce(($,U)=>U.paymentStatus==="paid"?$+parseFloat(U.total.toString()):$,0).toFixed(2))||"0.00"]})]})]}),e.jsx(p,{variant:"outline",className:"w-full",asChild:!0,children:e.jsxs("a",{href:`/vendors/${t}/analytics`,children:[e.jsx(zt,{className:"h-4 w-4 mr-2"}),"View Analytics"]})})]})]})]})}),e.jsx(H,{value:"domains",children:e.jsx(Yr,{vendorId:t,onAddDomain:g,onEditDomain:k,onDeleteDomain:b})}),e.jsx(H,{value:"products",children:e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"Products"}),e.jsx(re,{children:"Products offered by this vendor"})]}),e.jsx(D,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Os,{className:"h-12 w-12 text-muted-foreground/40 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Coming Soon"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:"The product management interface for this vendor is under development."}),e.jsx(p,{asChild:!0,children:e.jsx("a",{href:`/products?vendorId=${t}`,children:"View Products"})})]})})]})}),e.jsx(H,{value:"orders",children:e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"Orders"}),e.jsx(re,{children:"Order history for this vendor"})]}),e.jsx(D,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(os,{className:"h-12 w-12 text-muted-foreground/40 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Coming Soon"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:"The order management interface for this vendor is under development."}),e.jsx(p,{asChild:!0,children:e.jsx("a",{href:`/orders?vendorId=${t}`,children:"View Orders"})})]})})]})}),e.jsx(H,{value:"analytics",children:e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"Analytics"}),e.jsx(re,{children:"Performance metrics for this vendor"})]}),e.jsx(D,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(zt,{className:"h-12 w-12 text-muted-foreground/40 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Coming Soon"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:"The analytics interface for this vendor is under development."}),e.jsx(p,{asChild:!0,children:e.jsx("a",{href:`/analytics?vendorId=${t}`,children:"View Analytics"})})]})})]})}),e.jsx(H,{value:"settings",children:e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"Settings"}),e.jsx(re,{children:"Manage vendor settings"})]}),e.jsx(D,{children:e.jsx(bt,{vendorId:t})})]})})]}),e.jsx(Re,{open:a,onOpenChange:r,children:e.jsx(Te,{className:"max-w-3xl",children:e.jsx(bt,{vendorId:t,onSuccess:()=>r(!1)})})}),e.jsx(Re,{open:d,onOpenChange:n,children:e.jsx(Te,{className:"max-w-xl",children:e.jsx(wt,{vendorId:t,onSuccess:()=>n(!1)})})}),e.jsx(Re,{open:x,onOpenChange:m,children:e.jsx(Te,{className:"max-w-xl",children:e.jsx(wt,{vendorId:t,domainId:u||void 0,onSuccess:()=>m(!1)})})})]}):e.jsx(ue,{title:"Vendor Details",subtitle:"Vendor not found",children:e.jsx(P,{children:e.jsxs(D,{className:"py-12 text-center",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Vendor not found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"The vendor you're looking for doesn't exist or has been removed."}),e.jsx(p,{asChild:!0,children:e.jsx("a",{href:"/vendors",children:"Back to Vendors"})})]})})})},Wn=()=>{const[s,t]=h.useState(!1),[a,r]=h.useState(!1),[d,n]=h.useState(!1),[x,m]=h.useState(null),{toast:u}=me(),i=Qe(),o=ne({mutationFn:async g=>{await ee("DELETE",`/api/domains/${g}`)},onSuccess:()=>{u({title:"Domain deleted",description:"The domain has been deleted successfully."}),i.invalidateQueries({queryKey:["/api/domains"]}),n(!1)},onError:g=>{u({title:"Error",description:`Failed to delete domain: ${g.message}`,variant:"destructive"})}}),c=()=>{t(!0)},l=g=>{m(g),r(!0)},v=g=>{m(g),n(!0)},j=()=>{x&&o.mutate(x)};return e.jsxs(ue,{title:"Domains",subtitle:"Manage all domains connected to vendor stores",children:[e.jsx(Yr,{onAddDomain:c,onEditDomain:l,onDeleteDomain:v}),e.jsx(Re,{open:s,onOpenChange:t,children:e.jsx(Te,{className:"max-w-xl",children:e.jsx(wt,{onSuccess:()=>t(!1)})})}),e.jsx(Re,{open:a,onOpenChange:r,children:e.jsx(Te,{className:"max-w-xl",children:e.jsx(wt,{domainId:x||void 0,onSuccess:()=>r(!1)})})}),e.jsx(hs,{open:d,onOpenChange:n,children:e.jsxs(ts,{children:[e.jsxs(as,{children:[e.jsx(is,{children:"Are you sure?"}),e.jsx(ls,{children:"This action cannot be undone. This will permanently delete the domain and remove it from the vendor's store."})]}),e.jsxs(rs,{children:[e.jsx(cs,{children:"Cancel"}),e.jsx(ns,{onClick:j,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})},Ve=h.forwardRef(({className:s,orientation:t="horizontal",decorative:a=!0,...r},d)=>e.jsx(fr,{ref:d,decorative:a,orientation:t,className:C("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...r}));Ve.displayName=fr.displayName;function va({domain:s}){const[t,a]=h.useState(!1),r=Qe(),{toast:d}=me(),n=ne({mutationFn:async()=>(await ee("GET",`/api/domains/${s.id}/dns-records`)).json(),onSuccess:()=>{a(!0),d({title:"DNS records retrieved",description:"Please follow the instructions to verify your domain"})},onError:o=>{d({title:"Failed to retrieve DNS records",description:o.message,variant:"destructive"})}}),x=ne({mutationFn:async()=>(await ee("POST",`/api/domains/${s.id}/generate-token`)).json(),onSuccess:o=>{r.setQueryData(["/api/domains",s.id],o),n.mutate(),d({title:"Verification token generated",description:"A new verification token has been generated for your domain"})},onError:o=>{d({title:"Failed to generate verification token",description:o.message,variant:"destructive"})}}),m=ne({mutationFn:async()=>(await ee("POST",`/api/domains/${s.id}/verify`)).json(),onSuccess:o=>{r.setQueryData(["/api/domains",s.id],o),d({title:"Domain verified successfully",description:"Your domain has been verified and is now active"}),a(!1)},onError:o=>{d({title:"Verification failed",description:o.message,variant:"destructive"})}}),u=o=>{navigator.clipboard.writeText(o),d({title:"Copied to clipboard",description:"The value has been copied to your clipboard"})},i=()=>{switch(s.verificationStatus){case"verified":return e.jsx(J,{className:"bg-green-500 hover:bg-green-600",children:"Verified"});case"pending":return e.jsx(J,{className:"bg-yellow-500 hover:bg-yellow-600",children:"Pending Verification"});case"failed":return e.jsx(J,{className:"bg-red-500 hover:bg-red-600",children:"Verification Failed"});default:return e.jsx(J,{className:"bg-gray-500 hover:bg-gray-600",children:"Not Verified"})}};return s.type==="subdomain"?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Domain Verification"}),e.jsxs(ws,{children:[e.jsx(ft,{children:"No verification needed"}),e.jsx(Cs,{children:"Subdomains are automatically verified and do not require DNS configuration."})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Domain Verification"}),i()]}),s.verificationStatus==="verified"?e.jsxs(ws,{className:"bg-green-50 border-green-200",children:[e.jsx(Ke,{className:"h-4 w-4 text-green-500"}),e.jsx(ft,{children:"Domain Verified"}),e.jsx(Cs,{children:"Your domain has been successfully verified and is active."})]}):e.jsxs(e.Fragment,{children:[e.jsxs(ws,{className:"bg-yellow-50 border-yellow-200",children:[e.jsx(_e,{className:"h-4 w-4 text-yellow-500"}),e.jsx(ft,{children:"Verification Required"}),e.jsx(Cs,{children:"Your domain needs to be verified before it can be used. Please follow the instructions below."})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(p,{onClick:()=>x.mutate(),disabled:x.isPending||n.isPending,children:x.isPending?"Generating...":"Generate Verification Token"}),e.jsx(p,{variant:"outline",onClick:()=>m.mutate(),disabled:m.isPending||!s.verificationToken,children:m.isPending?"Verifying...":"Verify Domain"})]}),t&&n.data&&e.jsxs(P,{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"DNS Configuration Instructions"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:'Add the following DNS records to your domain registrar. Once added, click "Verify Domain" to confirm.'}),e.jsx("div",{className:"space-y-4",children:n.data.map((o,c)=>e.jsxs("div",{className:"border rounded-md p-3 bg-gray-50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"font-medium",children:[o.type," Record"]}),e.jsx(J,{variant:"outline",children:o.type})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Name/Host:"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("pre",{className:"bg-white p-1 border rounded-md flex-1 text-xs overflow-x-auto",children:o.name}),e.jsx(p,{variant:"ghost",size:"sm",onClick:()=>u(o.name),className:"ml-2",children:e.jsx(ma,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Value/Points to:"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("pre",{className:"bg-white p-1 border rounded-md flex-1 text-xs overflow-x-auto",children:o.value}),e.jsx(p,{variant:"ghost",size:"sm",onClick:()=>u(o.value),className:"ml-2",children:e.jsx(ma,{className:"h-4 w-4"})})]})]})]})]},c))})]}),e.jsxs("div",{className:"flex justify-between items-center bg-blue-50 p-3 rounded-md border border-blue-100",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Need help with DNS configuration?"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Check your domain registrar's documentation for instructions on how to add DNS records."})]}),e.jsxs(p,{variant:"outline",size:"sm",className:"gap-1",children:[e.jsx(Nr,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:"Help Guide"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(p,{variant:"default",onClick:()=>m.mutate(),disabled:m.isPending,className:"gap-2",children:m.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ut,{className:"h-4 w-4 animate-spin"}),"Verifying..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"h-4 w-4"}),"Verify Domain"]})})})]})]})]})}const Yn=()=>{var v;const[,s]=Ge(),{id:t}=vr(),[a,r]=h.useState("overview"),d=parseInt(t),{data:n,isLoading:x}=Z({queryKey:["/api/domains",d],enabled:!isNaN(d)}),m=j=>{switch(j){case"active":return e.jsx(J,{variant:"success",className:"ml-2",children:"Active"});case"pending":return e.jsx(J,{variant:"warning",className:"ml-2",children:"Pending"});case"error":return e.jsx(J,{variant:"destructive",className:"ml-2",children:"Error"});default:return e.jsx(J,{variant:"secondary",className:"ml-2",children:j})}},u=j=>{switch(j){case"verified":return e.jsx(Ft,{className:"h-5 w-5 text-green-500"});case"failed":return e.jsx(xa,{className:"h-5 w-5 text-red-500"});default:return e.jsx(Ut,{className:"h-5 w-5 text-amber-500"})}},i=j=>{switch(j){case"valid":return e.jsx(lt,{className:"h-5 w-5 text-green-500"});case"invalid":return e.jsx(xa,{className:"h-5 w-5 text-red-500"});default:return e.jsx(Ut,{className:"h-5 w-5 text-amber-500"})}},o=j=>new Date(j).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});if(x)return e.jsxs(ue,{title:"Domain Details",subtitle:"Loading domain information...",children:[e.jsx("div",{className:"mb-4",children:e.jsxs(p,{variant:"ghost",onClick:()=>s("/domains"),children:[e.jsx(bs,{className:"mr-2 h-4 w-4"}),"Back to Domains"]})}),e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(E,{className:"h-8 w-64 mb-2"}),e.jsx(E,{className:"h-4 w-40"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(E,{className:"h-24 w-full"}),e.jsx(E,{className:"h-24 w-full"})]}),e.jsx(E,{className:"h-64 w-full"})]})})]})]});if(!n)return e.jsxs(ue,{title:"Domain Details",subtitle:"Domain not found",children:[e.jsx("div",{className:"mb-4",children:e.jsxs(p,{variant:"ghost",onClick:()=>s("/domains"),children:[e.jsx(bs,{className:"mr-2 h-4 w-4"}),"Back to Domains"]})}),e.jsx(P,{children:e.jsxs(D,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"rounded-full bg-muted p-4 mb-4",children:e.jsx(Ye,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Domain Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"The domain you are looking for does not exist or has been deleted."}),e.jsx(p,{onClick:()=>s("/domains"),children:"Go Back to Domains"})]})})]});const c=n.status==="active",l=n.type==="custom";return e.jsxs(ue,{title:"Domain Details",subtitle:"View and manage details for this domain",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs(p,{variant:"ghost",onClick:()=>s("/domains"),className:"mr-4",children:[e.jsx(bs,{className:"mr-2 h-4 w-4"}),"Back to Domains"]}),e.jsxs("h2",{className:"text-2xl font-bold flex items-center",children:[n.name,m(n.status),n.isPrimary&&e.jsx(J,{variant:"secondary",className:"ml-2",children:"Primary"})]})]}),e.jsx("div",{children:c&&e.jsxs(p,{variant:"outline",className:"mr-2",onClick:()=>window.open(`https://${n.name}`,"_blank"),children:[e.jsx(Nr,{className:"mr-2 h-4 w-4"}),"Visit Domain"]})})]}),e.jsxs(ve,{defaultValue:"overview",value:a,onValueChange:r,children:[e.jsxs(fe,{className:"mb-6",children:[e.jsx(B,{value:"overview",children:"Overview"}),l&&e.jsx(B,{value:"verification",children:"Verification & DNS"}),e.jsx(B,{value:"settings",children:"Settings"})]}),e.jsxs(H,{value:"overview",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs(P,{children:[e.jsx(I,{children:e.jsx(M,{children:"Domain Information"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("span",{className:"font-medium text-muted-foreground",children:"Domain Name:"}),e.jsx("span",{className:"col-span-2",children:n.name})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("span",{className:"font-medium text-muted-foreground",children:"Type:"}),e.jsx("span",{className:"col-span-2 capitalize",children:n.type})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("span",{className:"font-medium text-muted-foreground",children:"Created:"}),e.jsx("span",{className:"col-span-2",children:n.createdAt?o(n.createdAt):"N/A"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("span",{className:"font-medium text-muted-foreground",children:"Expires:"}),e.jsx("span",{className:"col-span-2",children:n.expiresAt?o(n.expiresAt):"N/A"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("span",{className:"font-medium text-muted-foreground",children:"Primary:"}),e.jsx("span",{className:"col-span-2",children:n.isPrimary?"Yes":"No"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("span",{className:"font-medium text-muted-foreground",children:"Vendor:"}),e.jsx("span",{className:"col-span-2",children:((v=n.vendor)==null?void 0:v.companyName)||"Unknown"})]})]})})]}),e.jsxs(P,{children:[e.jsx(I,{children:e.jsx(M,{children:"Status"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Domain Status"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n.status==="active"?"Domain is active and operational":n.status==="pending"?"Domain is pending activation":"Domain has errors and is not working"})]}),m(n.status)]}),e.jsx(Ve,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Verification Status"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n.verificationStatus==="verified"?"Domain ownership is verified":n.verificationStatus==="failed"?"Domain verification failed":"Domain ownership verification is pending"})]}),e.jsx("div",{className:"flex items-center",children:u(n.verificationStatus)})]}),e.jsx(Ve,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{className:"text-sm font-medium",children:"SSL Status"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n.sslStatus==="valid"?"SSL certificate is valid and secure":n.sslStatus==="invalid"?"SSL certificate is invalid or expired":"SSL certificate is pending issuance"})]}),e.jsx("div",{className:"flex items-center",children:i(n.sslStatus)})]})]})})]})]}),l&&e.jsx(va,{domain:n})]}),l&&e.jsx(H,{value:"verification",children:e.jsx(va,{domain:n})}),e.jsx(H,{value:"settings",children:e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"Domain Settings"}),e.jsx(re,{children:"Configure settings for this domain"})]}),e.jsx(D,{children:e.jsx("p",{className:"text-muted-foreground",children:"Domain settings will be implemented in the next phase."})})]})})]})]})},Hn=T.object({name:T.string().min(2,{message:"Name is required"}),description:T.string().min(10,{message:"Description should be at least 10 characters"}),price:T.string().regex(/^\d+(\.\d{1,2})?$/,{message:"Please enter a valid price"}),yearlyPrice:T.string().regex(/^\d+(\.\d{1,2})?$/,{message:"Please enter a valid price"}).optional(),productLimit:T.string().regex(/^\d+$/,{message:"Please enter a valid number"}),storageLimit:T.string().regex(/^\d+$/,{message:"Please enter a valid number"}),customDomainLimit:T.string().regex(/^\d+$/,{message:"Please enter a valid number"}),supportLevel:T.string(),trialDays:T.string().regex(/^\d+$/,{message:"Please enter a valid number"}).default("7"),features:T.string().transform(s=>s.split(`
`).filter(Boolean)),isActive:T.boolean().default(!0),isDefault:T.boolean().default(!1),currency:T.string().default("INR")}),Jn=()=>{const[s,t]=h.useState("plans"),[a,r]=h.useState(!1),[d,n]=h.useState(!1),[x,m]=h.useState(!1),[u,i]=h.useState(null),{toast:o}=me(),c=Qe(),{data:l,isLoading:v}=Z({queryKey:["/api/subscription-plans"]}),j=ne({mutationFn:async F=>{await ee("DELETE",`/api/subscription-plans/${F}`)},onSuccess:()=>{o({title:"Plan deleted",description:"The subscription plan has been deleted successfully."}),c.invalidateQueries({queryKey:["/api/subscription-plans"]}),m(!1)},onError:F=>{var z,O;((z=F.response)==null?void 0:z.status)===409||(O=F.message)!=null&&O.includes("in use")?o({title:"Cannot delete plan",description:"This plan is currently in use by one or more vendors. Please reassign those vendors to a different plan before deleting.",variant:"destructive"}):o({title:"Error",description:`Failed to delete plan: ${F.message}`,variant:"destructive"}),m(!1)}}),g=Pe({resolver:ke(Hn),defaultValues:{name:"",description:"",price:"",yearlyPrice:"",productLimit:"",storageLimit:"",customDomainLimit:"",supportLevel:"email",trialDays:"7",features:[],isActive:!0,isDefault:!1,currency:"INR"}});l==null||l.find(F=>F.id===u);const k=F=>{F?g.reset({name:F.name||"",description:F.description||"",price:F.price.toString()||"",yearlyPrice:F.yearlyPrice?F.yearlyPrice.toString():"",productLimit:F.productLimit.toString()||"",storageLimit:F.storageLimit.toString()||"",customDomainLimit:F.customDomainLimit.toString()||"",supportLevel:F.supportLevel||"email",trialDays:F.trialDays?F.trialDays.toString():"7",features:F.features?F.features.join(`
`):"",isActive:F.isActive??!0,isDefault:F.isDefault??!1,currency:F.currency||"INR"}):g.reset({name:"",description:"",price:"",yearlyPrice:"",productLimit:"",storageLimit:"",customDomainLimit:"",supportLevel:"email",trialDays:"7",features:"",isActive:!0,isDefault:!1,currency:"INR"})},b=ne({mutationFn:async F=>{const z={...F,price:F.price,yearlyPrice:F.yearlyPrice||null,productLimit:parseInt(F.productLimit),storageLimit:parseInt(F.storageLimit),customDomainLimit:parseInt(F.customDomainLimit),trialDays:parseInt(F.trialDays||"7"),currency:F.currency||"INR"};return u?ee("PATCH",`/api/subscription-plans/${u}`,z):ee("POST","/api/subscription-plans",z)},onSuccess:()=>{o({title:u?"Plan updated":"Plan created",description:u?"The subscription plan has been updated successfully.":"The subscription plan has been created successfully."}),c.invalidateQueries({queryKey:["/api/subscription-plans"]}),r(!1),n(!1)},onError:F=>{o({title:"Error",description:`Failed to ${u?"update":"create"} plan: ${F.message}`,variant:"destructive"})}}),y=()=>{i(null),k(null),r(!0)},V=F=>{i(F);const z=l==null?void 0:l.find(O=>O.id===F);k(z),n(!0)},S=F=>{i(F),m(!0)},$=()=>{u&&j.mutate(u)},U=F=>{b.mutate(F)};return e.jsxs(ue,{title:"Subscription Plans",subtitle:"Manage platform subscription plans for vendors",children:[e.jsxs(ve,{value:s,onValueChange:t,className:"space-y-6",children:[e.jsxs(fe,{className:"grid w-full grid-cols-2 h-auto",children:[e.jsx(B,{value:"plans",children:"Plans"}),e.jsx(B,{value:"analytics",children:"Analytics"})]}),e.jsxs(H,{value:"plans",className:"space-y-6",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(p,{onClick:y,children:[e.jsx(Is,{className:"mr-2 h-4 w-4"}),"Create New Plan"]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:v?Array.from({length:4}).map((F,z)=>e.jsxs(P,{className:"border border-gray-200 shadow-sm",children:[e.jsxs(I,{className:"pb-2",children:[e.jsx(M,{className:"text-lg skeleton-text h-6 w-24 bg-gray-200 rounded"}),e.jsx("div",{className:"mt-4 h-8 w-32 bg-gray-200 rounded"}),e.jsx("div",{className:"mt-2 h-16 w-full bg-gray-200 rounded"})]}),e.jsxs(D,{className:"space-y-2",children:[e.jsx("div",{className:"h-4 w-full bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 w-full bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 w-full bg-gray-200 rounded"})]})]},z)):l==null?void 0:l.map(F=>e.jsxs(P,{className:C("overflow-hidden relative",F.name==="Pro"&&"border-2 border-primary"),children:[F.name==="Pro"&&e.jsx("div",{className:"absolute top-0 right-0",children:e.jsx("div",{className:"bg-primary text-white text-xs font-semibold px-3 py-1 rounded-bl-lg",children:"Popular"})}),e.jsxs(I,{children:[e.jsx(M,{children:F.name}),e.jsx("div",{className:"mt-2 flex items-baseline",children:e.jsx("span",{className:"text-3xl font-bold",children:ra(parseFloat(F.price),"monthly")})}),e.jsx(re,{className:"mt-2",children:F.description})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-semibold",children:"Features:"}),e.jsx("ul",{className:"space-y-2",children:F.features.map((z,O)=>e.jsxs("li",{className:"flex text-sm",children:[e.jsx(Ke,{className:"h-5 w-5 text-green-500 flex-shrink-0 mr-2"}),e.jsx("span",{children:z})]},O))})]})}),e.jsxs(Ze,{className:"bg-muted/50 px-6 py-4 flex justify-between items-center border-t",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:F.name==="Free"?"12 vendors":F.name==="Basic"?"45 vendors":F.name==="Pro"?"156 vendors":"41 vendors"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>V(F.id),children:e.jsx(Ks,{className:"h-4 w-4"})}),e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>S(F.id),children:e.jsx(ze,{className:"h-4 w-4 text-destructive"})})]})]})]},F.id))}),e.jsxs(P,{className:"mt-8",children:[e.jsx(I,{children:e.jsx(M,{children:"Plan Features Comparison"})}),e.jsx(D,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-muted",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Feature"}),l==null?void 0:l.map(F=>e.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-muted-foreground uppercase tracking-wider",children:F.name},F.id))]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:"Custom Domains"}),l==null?void 0:l.map(F=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center",children:F.customDomainLimit},F.id))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:"Products"}),l==null?void 0:l.map(F=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center",children:F.productLimit>=1e4?"Unlimited":F.productLimit},F.id))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:"Storage"}),l==null?void 0:l.map(F=>e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center",children:[F.storageLimit," GB"]},F.id))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:"Support"}),l==null?void 0:l.map(F=>e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center",children:[F.supportLevel==="email"&&"Email",F.supportLevel==="priority_email"&&"Priority Email",F.supportLevel==="phone_email"&&"Phone & Email",F.supportLevel==="dedicated"&&"Dedicated"]},F.id))]})]})]})})})]})]}),e.jsx(H,{value:"analytics",children:e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"Subscription Analytics"}),e.jsx(re,{children:"Track and analyze subscription plan performance"})]}),e.jsx(D,{className:"h-96 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Coming Soon"}),e.jsx("p",{className:"text-muted-foreground max-w-md",children:"We're working on detailed analytics for your subscription plans. Check back soon!"})]})})]})})]}),e.jsx(Re,{open:a||d,onOpenChange:F=>{F||(r(!1),n(!1))},children:e.jsxs(Te,{className:"max-w-3xl",children:[e.jsxs(ms,{children:[e.jsx(xs,{children:u?"Edit Subscription Plan":"Create New Subscription Plan"}),e.jsx(js,{children:u?"Update the details of this subscription plan":"Create a new subscription plan for vendors"})]}),e.jsxs("form",{onSubmit:g.handleSubmit(U),className:"space-y-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"name",children:"Plan Name *"}),e.jsx(L,{id:"name",placeholder:"e.g. Basic, Pro, Enterprise",...g.register("name")}),g.formState.errors.name&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:g.formState.errors.name.message})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"description",children:"Description *"}),e.jsx(ss,{id:"description",placeholder:"Describe the plan in a few sentences",rows:3,...g.register("description")}),g.formState.errors.description&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:g.formState.errors.description.message})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"price",children:"Monthly Price (₹) *"}),e.jsx(L,{id:"price",placeholder:"0.00",...g.register("price")}),g.formState.errors.price&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:g.formState.errors.price.message})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"yearlyPrice",children:"Yearly Price (₹) (Optional)"}),e.jsx(L,{id:"yearlyPrice",placeholder:"0.00",...g.register("yearlyPrice")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Leave empty to disable yearly payment option"}),g.formState.errors.yearlyPrice&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:g.formState.errors.yearlyPrice.message})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"trialDays",children:"Free Trial Days"}),e.jsx(L,{id:"trialDays",placeholder:"7",...g.register("trialDays")}),g.formState.errors.trialDays&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:g.formState.errors.trialDays.message})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"supportLevel",children:"Support Level *"}),e.jsxs("select",{id:"supportLevel",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",...g.register("supportLevel"),children:[e.jsx("option",{value:"email",children:"Email Support"}),e.jsx("option",{value:"priority_email",children:"Priority Email Support"}),e.jsx("option",{value:"phone_email",children:"Phone & Email Support"}),e.jsx("option",{value:"dedicated",children:"Dedicated Support"})]}),g.formState.errors.supportLevel&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:g.formState.errors.supportLevel.message})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"productLimit",children:"Product Limit *"}),e.jsx(L,{id:"productLimit",placeholder:"e.g. 100, 1000, 10000",...g.register("productLimit")}),g.formState.errors.productLimit&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:g.formState.errors.productLimit.message})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"storageLimit",children:"Storage Limit (GB) *"}),e.jsx(L,{id:"storageLimit",placeholder:"e.g. 1, 5, 20",...g.register("storageLimit")}),g.formState.errors.storageLimit&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:g.formState.errors.storageLimit.message})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"customDomainLimit",children:"Custom Domain Limit *"}),e.jsx(L,{id:"customDomainLimit",placeholder:"e.g. 0, 1, 3",...g.register("customDomainLimit")}),g.formState.errors.customDomainLimit&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:g.formState.errors.customDomainLimit.message})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"features",children:"Features (one per line) *"}),e.jsx(ss,{id:"features",placeholder:`e.g. 1 custom domain
Up to 100 products
Basic analytics`,rows:6,...g.register("features")}),g.formState.errors.features&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:g.formState.errors.features.message})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary",...g.register("isActive")}),e.jsx(Y,{htmlFor:"isActive",children:"Plan is active and available to vendors"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"isDefault",className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary",...g.register("isDefault")}),e.jsx(Y,{htmlFor:"isDefault",children:"Set as default plan for new vendors"}),e.jsx(qt,{className:"h-4 w-4 text-muted-foreground cursor-help",title:"Only one plan can be the default. Setting this plan as default will remove default status from any other plan."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>{r(!1),n(!1)},children:"Cancel"}),e.jsxs(p,{type:"submit",disabled:b.isPending,children:[b.isPending&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),u?"Update Plan":"Create Plan"]})]})]})]})}),e.jsx(hs,{open:x,onOpenChange:m,children:e.jsxs(ts,{children:[e.jsxs(as,{children:[e.jsx(is,{children:"Are you sure?"}),e.jsxs(ls,{children:["This action cannot be undone and will permanently delete the subscription plan.",e.jsxs("div",{className:"mt-2 p-3 bg-amber-50 border border-amber-200 rounded-md text-amber-800",children:[e.jsx("strong",{children:"Important:"})," Plans that are currently assigned to vendors cannot be deleted. You must first reassign those vendors to a different plan."]})]})]}),e.jsxs(rs,{children:[e.jsx(cs,{children:"Cancel"}),e.jsx(ns,{onClick:$,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})},Xn=()=>{const{data:s,isLoading:t}=Z({queryKey:["/api/analytics"]});return e.jsxs(ue,{title:"Analytics",subtitle:"Platform performance and insights",children:[e.jsx("div",{className:"mb-6",children:e.jsx(ve,{defaultValue:"30days",className:"w-full",children:e.jsxs(fe,{className:"w-full md:w-auto grid grid-cols-4 mb-6",children:[e.jsx(B,{value:"7days",children:"7 Days"}),e.jsx(B,{value:"30days",children:"30 Days"}),e.jsx(B,{value:"90days",children:"90 Days"}),e.jsx(B,{value:"year",children:"12 Months"})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs(P,{children:[e.jsx(I,{className:"pb-2",children:e.jsx(M,{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"})}),e.jsx(D,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",t?"--":"248,719"]}),e.jsxs("div",{className:"bg-green-100 text-green-800 flex items-center text-xs px-2 py-1 rounded",children:[e.jsx(Xe,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:"+12.5%"})]})]})})]}),e.jsxs(P,{children:[e.jsx(I,{className:"pb-2",children:e.jsx(M,{className:"text-sm font-medium text-muted-foreground",children:"New Vendors"})}),e.jsx(D,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:t?"--":"32"}),e.jsxs("div",{className:"bg-green-100 text-green-800 flex items-center text-xs px-2 py-1 rounded",children:[e.jsx(Xe,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:"+8.2%"})]})]})})]}),e.jsxs(P,{children:[e.jsx(I,{className:"pb-2",children:e.jsx(M,{className:"text-sm font-medium text-muted-foreground",children:"Active Subscriptions"})}),e.jsx(D,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:t?"--":"254"}),e.jsxs("div",{className:"bg-green-100 text-green-800 flex items-center text-xs px-2 py-1 rounded",children:[e.jsx(Xe,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:"+5.7%"})]})]})})]}),e.jsxs(P,{children:[e.jsx(I,{className:"pb-2",children:e.jsx(M,{className:"text-sm font-medium text-muted-foreground",children:"Churn Rate"})}),e.jsx(D,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:t?"--":"2.3%"}),e.jsxs("div",{className:"bg-red-100 text-red-800 flex items-center text-xs px-2 py-1 rounded",children:[e.jsx(Es,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:"+0.5%"})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"Revenue Over Time"}),e.jsx(re,{children:"Monthly revenue for the platform"})]}),e.jsx(D,{children:e.jsx("div",{className:"h-80",children:t?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx(E,{className:"h-full w-full"})}):e.jsx("div",{className:"h-full flex items-end space-x-2",children:Array.from({length:12}).map((a,r)=>e.jsx("div",{className:"bg-primary/20 dark:bg-primary/30 relative flex-1 rounded-t-md",style:{height:`${20+Math.random()*80}%`},children:e.jsx("div",{className:"absolute bottom-0 inset-x-0 bg-primary rounded-t-md",style:{height:`${60+Math.random()*40}%`}})},r))})})})]}),e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"Vendor Growth"}),e.jsx(re,{children:"New vendors over time"})]}),e.jsx(D,{children:e.jsx("div",{className:"h-80",children:t?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx(E,{className:"h-full w-full"})}):e.jsx("div",{className:"h-full relative",children:e.jsx("div",{className:"absolute inset-0",children:e.jsxs("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",className:"w-full h-full",children:[e.jsx("path",{d:"M0,90 L10,85 L20,80 L30,70 L40,60 L50,55 L60,40 L70,35 L80,30 L90,20 L100,10",fill:"none",stroke:"hsl(var(--primary))",strokeWidth:"2"}),e.jsx("path",{d:"M0,90 L10,85 L20,80 L30,70 L40,60 L50,55 L60,40 L70,35 L80,30 L90,20 L100,10 L100,100 L0,100",fill:"hsl(var(--primary)/0.1)",strokeWidth:"0"})]})})})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(P,{children:[e.jsx(I,{children:e.jsx(M,{children:"Subscription Plan Distribution"})}),e.jsxs(D,{children:[e.jsx("div",{className:"relative h-40 mx-auto",children:t?e.jsx(E,{className:"h-full w-full rounded-full"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"w-32 h-32 rounded-full border-8 border-primary relative",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-8 border-blue-500 overflow-hidden",style:{clipPath:"polygon(50% 50%, 100% 50%, 100% 100%, 50% 100%)"}}),e.jsx("div",{className:"absolute inset-0 rounded-full border-8 border-green-500 overflow-hidden",style:{clipPath:"polygon(50% 50%, 0 50%, 0 100%, 50% 100%)"}}),e.jsx("div",{className:"absolute inset-0 rounded-full border-8 border-gray-300 overflow-hidden",style:{clipPath:"polygon(50% 50%, 0 0, 50% 0)"}})]})})}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-primary rounded-full mr-2"}),e.jsx("span",{className:"text-sm",children:"Pro (62%)"})]}),e.jsx("span",{className:"text-sm font-medium",children:"156"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-blue-500 rounded-full mr-2"}),e.jsx("span",{className:"text-sm",children:"Basic (18%)"})]}),e.jsx("span",{className:"text-sm font-medium",children:"45"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),e.jsx("span",{className:"text-sm",children:"Enterprise (16%)"})]}),e.jsx("span",{className:"text-sm font-medium",children:"41"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-gray-300 rounded-full mr-2"}),e.jsx("span",{className:"text-sm",children:"Free (4%)"})]}),e.jsx("span",{className:"text-sm font-medium",children:"12"})]})]})]})]}),e.jsxs(P,{className:"col-span-2",children:[e.jsxs(I,{children:[e.jsx(M,{children:"Top Performing Vendors"}),e.jsx(re,{children:"By revenue in the last 30 days"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:t?Array.from({length:5}).map((a,r)=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(E,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{className:"h-4 w-40"}),e.jsx(E,{className:"h-3 w-24"})]}),e.jsx("div",{className:"ml-auto",children:e.jsx(E,{className:"h-5 w-20"})})]},r)):e.jsx(e.Fragment,{children:[{name:"Tech Haven",revenue:"$42,105",growth:"+15.3%"},{name:"Fashion Forward",revenue:"$38,721",growth:"+12.7%"},{name:"Gourmet Delights",revenue:"$27,890",growth:"+8.4%"},{name:"Fitness Empire",revenue:"$23,456",growth:"+5.6%"},{name:"Home Essentials",revenue:"$19,872",growth:"+3.2%"}].map((a,r)=>e.jsxs("div",{className:"flex items-center py-2",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary font-medium",children:a.name.split(" ").map(d=>d[0]).join("")}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium",children:a.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[r+1," active stores"]})]}),e.jsxs("div",{className:"ml-auto flex items-center",children:[e.jsx("p",{className:"text-sm font-semibold",children:a.revenue}),e.jsx("span",{className:"ml-2 text-xs text-green-600",children:a.growth})]})]},r))})})})]})]})]})};function Hr({className:s,classNames:t,showOutsideDays:a=!0,...r}){return e.jsx(Ji,{showOutsideDays:a,className:C("p-3",s),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:C(Us({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:C(Us({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({className:d,...n})=>e.jsx(ot,{className:C("h-4 w-4",d),...n}),IconRight:({className:d,...n})=>e.jsx(Bs,{className:C("h-4 w-4",d),...n})},...r})}Hr.displayName="Calendar";const Ct=Zi,St=el,ct=h.forwardRef(({className:s,align:t="center",sideOffset:a=4,...r},d)=>e.jsx(Xi,{children:e.jsx(yr,{ref:d,align:t,sideOffset:a,className:C("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",s),...r})}));ct.displayName=yr.displayName;function Zn({value:s,onChange:t,className:a}){const[r,d]=h.useState(!1);return e.jsx("div",{className:C("grid gap-2",a),children:e.jsxs(Ct,{open:r,onOpenChange:d,children:[e.jsx(St,{asChild:!0,children:e.jsxs(p,{id:"date",variant:"outline",size:"sm",className:C("w-full justify-start text-left font-normal",!s&&"text-muted-foreground"),children:[e.jsx(Nt,{className:"mr-2 h-4 w-4"}),s!=null&&s.from?s.to?e.jsxs(e.Fragment,{children:[Ms(s.from,"LLL dd, y")," -"," ",Ms(s.to,"LLL dd, y")]}):Ms(s.from,"LLL dd, y"):e.jsx("span",{children:"Pick a date range"})]})}),e.jsx(ct,{className:"w-auto p-0",align:"start",children:e.jsx(Hr,{initialFocus:!0,mode:"range",defaultMonth:s==null?void 0:s.from,selected:s,onSelect:n=>{t(n||{}),n!=null&&n.from&&(n!=null&&n.to)&&d(!1)},numberOfMonths:2})})]})})}const ec=()=>{const{user:s}=We(),{toast:t}=me(),[a,r]=h.useState("30days"),[d,n]=h.useState({from:Qs(new Date,30),to:new Date}),x=()=>{const N=new Date;switch(a){case"7days":return{from:Qs(N,7),to:N};case"30days":return{from:Qs(N,30),to:N};case"90days":return{from:Qs(N,90),to:N};case"year":return{from:nl(N),to:cl(N)};case"custom":return d;default:return{from:Qs(N,30),to:N}}},m=(s==null?void 0:s.role)==="vendor"?s.id:void 0,u=x(),i=Ms(u.from,"yyyy-MM-dd"),o=Ms(u.to,"yyyy-MM-dd"),{data:c,isLoading:l}=Z({queryKey:m?[`/api/vendors/${m}/analytics`,i,o]:null,enabled:!!m}),{data:v,isLoading:j}=Z({queryKey:m?[`/api/vendors/${m}/analytics/top-products`]:null,enabled:!!m}),{data:g,isLoading:k}=Z({queryKey:m?[`/api/vendors/${m}/analytics/sales-by-hour`]:null,enabled:!!m}),{data:b,isLoading:y}=Z({queryKey:m?[`/api/vendors/${m}/analytics/sales-by-category`]:null,enabled:!!m}),S=!c||!Array.isArray(c)?[]:[...c].sort((N,R)=>new Date(N.date).getTime()-new Date(R.date).getTime()).map(N=>({date:Ms(new Date(N.date),"MMM dd"),revenue:parseFloat(N.revenue||"0"),orders:N.orders||0,visitors:N.visitors||0,pageViews:N.pageViews||0,conversionRate:parseFloat(N.conversionRate||"0")})),U=(()=>{if(!S.length)return{totalRevenue:0,totalOrders:0,totalVisitors:0,avgConversionRate:0,revenueGrowth:0,ordersGrowth:0,visitorsGrowth:0,conversionGrowth:0};const N=S.reduce((be,we)=>be+we.revenue,0),R=S.reduce((be,we)=>be+we.orders,0),xe=S.reduce((be,we)=>be+we.visitors,0),ae=S.reduce((be,we)=>be+we.conversionRate,0)/S.length,Ne=S.length>1?(S[S.length-1].revenue/(S[0].revenue||1)-1)*100:0,ye=S.length>1?(S[S.length-1].orders/(S[0].orders||1)-1)*100:0,De=S.length>1?(S[S.length-1].visitors/(S[0].visitors||1)-1)*100:0,Je=S.length>1?(S[S.length-1].conversionRate/(S[0].conversionRate||1)-1)*100:0;return{totalRevenue:N,totalOrders:R,totalVisitors:xe,avgConversionRate:ae,revenueGrowth:Ne,ordersGrowth:ye,visitorsGrowth:De,conversionGrowth:Je}})(),F=["#4f46e5","#10b981","#f59e0b","#ef4444"],z=N=>{N.from&&N.to&&(n({from:N.from,to:N.to}),r("custom"))},O=()=>{if(!S.length){t({title:"No data to export",description:"There is no analytics data available for export.",variant:"destructive"});return}const N=`Date,Revenue,Orders,Visitors,Page Views,Conversion Rate
`,R=S.map(ye=>`${ye.date},${ye.revenue},${ye.orders},${ye.visitors},${ye.pageViews},${ye.conversionRate}`).join(`
`),xe=`data:text/csv;charset=utf-8,${N}${R}`,ae=encodeURI(xe),Ne=document.createElement("a");Ne.setAttribute("href",ae),Ne.setAttribute("download",`analytics_${i}_to_${o}.csv`),document.body.appendChild(Ne),Ne.click(),document.body.removeChild(Ne),t({title:"Export successful",description:`Analytics data from ${i} to ${o} has been downloaded.`})};return e.jsxs(ue,{title:"Analytics Dashboard",subtitle:"Track your store's performance metrics",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsx(ve,{value:a,onValueChange:N=>r(N),className:"w-full md:w-auto",children:e.jsxs(fe,{className:"grid grid-cols-5 w-full",children:[e.jsx(B,{value:"7days",children:"7 Days"}),e.jsx(B,{value:"30days",children:"30 Days"}),e.jsx(B,{value:"90days",children:"90 Days"}),e.jsx(B,{value:"year",children:"Year"}),e.jsx(B,{value:"custom",children:"Custom"})]})}),a==="custom"&&e.jsx("div",{className:"w-full md:w-auto",children:e.jsx(Zn,{value:d,onChange:z})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs(P,{children:[e.jsx(I,{className:"pb-2",children:e.jsx(M,{className:"text-sm font-medium text-muted-foreground",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(zs,{className:"h-4 w-4 mr-1 text-green-500"}),e.jsx("span",{children:"Total Revenue"})]})})}),e.jsx(D,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:l?e.jsx(E,{className:"h-8 w-24"}):`$${U.totalRevenue.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}),!l&&e.jsxs("div",{className:`${U.revenueGrowth>=0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"} flex items-center text-xs px-2 py-1 rounded`,children:[U.revenueGrowth>=0?e.jsx(Xe,{className:"h-3 w-3 mr-1"}):e.jsx(Es,{className:"h-3 w-3 mr-1"}),e.jsxs("span",{children:[U.revenueGrowth.toFixed(1),"%"]})]})]})})]}),e.jsxs(P,{children:[e.jsx(I,{className:"pb-2",children:e.jsx(M,{className:"text-sm font-medium text-muted-foreground",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ie,{className:"h-4 w-4 mr-1 text-blue-500"}),e.jsx("span",{children:"Total Orders"})]})})}),e.jsx(D,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:l?e.jsx(E,{className:"h-8 w-16"}):U.totalOrders.toLocaleString()}),!l&&e.jsxs("div",{className:`${U.ordersGrowth>=0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"} flex items-center text-xs px-2 py-1 rounded`,children:[U.ordersGrowth>=0?e.jsx(Xe,{className:"h-3 w-3 mr-1"}):e.jsx(Es,{className:"h-3 w-3 mr-1"}),e.jsxs("span",{children:[U.ordersGrowth.toFixed(1),"%"]})]})]})})]}),e.jsxs(P,{children:[e.jsx(I,{className:"pb-2",children:e.jsx(M,{className:"text-sm font-medium text-muted-foreground",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Vs,{className:"h-4 w-4 mr-1 text-purple-500"}),e.jsx("span",{children:"Total Visitors"})]})})}),e.jsx(D,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:l?e.jsx(E,{className:"h-8 w-20"}):U.totalVisitors.toLocaleString()}),!l&&e.jsxs("div",{className:`${U.visitorsGrowth>=0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"} flex items-center text-xs px-2 py-1 rounded`,children:[U.visitorsGrowth>=0?e.jsx(Xe,{className:"h-3 w-3 mr-1"}):e.jsx(Es,{className:"h-3 w-3 mr-1"}),e.jsxs("span",{children:[U.visitorsGrowth.toFixed(1),"%"]})]})]})})]}),e.jsxs(P,{children:[e.jsx(I,{className:"pb-2",children:e.jsx(M,{className:"text-sm font-medium text-muted-foreground",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(et,{className:"h-4 w-4 mr-1 text-amber-500"}),e.jsx("span",{children:"Conversion Rate"})]})})}),e.jsx(D,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:l?e.jsx(E,{className:"h-8 w-16"}):`${U.avgConversionRate.toFixed(2)}%`}),!l&&e.jsxs("div",{className:`${U.conversionGrowth>=0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"} flex items-center text-xs px-2 py-1 rounded`,children:[U.conversionGrowth>=0?e.jsx(Xe,{className:"h-3 w-3 mr-1"}):e.jsx(Es,{className:"h-3 w-3 mr-1"}),e.jsxs("span",{children:[U.conversionGrowth.toFixed(1),"%"]})]})]})})]})]}),e.jsxs(ve,{defaultValue:"revenue",className:"w-full mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs(fe,{children:[e.jsx(B,{value:"revenue",children:"Revenue"}),e.jsx(B,{value:"orders",children:"Orders"}),e.jsx(B,{value:"visitors",children:"Visitors"}),e.jsx(B,{value:"conversion",children:"Conversion"})]}),e.jsx("button",{onClick:O,className:"inline-flex items-center px-3 py-1 text-sm font-medium rounded-md bg-primary/10 text-primary hover:bg-primary/20 transition-colors",children:"Export CSV"})]}),e.jsx(P,{children:e.jsxs(D,{className:"pt-6",children:[e.jsx(H,{value:"revenue",className:"mt-0",children:e.jsx("div",{className:"h-[400px]",children:l?e.jsx("div",{className:"h-full w-full flex items-center justify-center",children:e.jsx(E,{className:"h-full w-full"})}):S.length?e.jsx(Ds,{width:"100%",height:"100%",children:e.jsxs(sl,{data:S,margin:{top:10,right:30,left:0,bottom:30},children:[e.jsx(xt,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),e.jsx(Ws,{dataKey:"date",tick:{fontSize:12},tickMargin:10,angle:-45}),e.jsx(Ys,{tick:{fontSize:12},tickFormatter:N=>`$${N}`}),e.jsx(Ts,{formatter:N=>[`$${Number(N).toFixed(2)}`,"Revenue"],labelFormatter:N=>`Date: ${N}`}),e.jsx(tl,{type:"monotone",dataKey:"revenue",stroke:"#4f46e5",fill:"#4f46e5",fillOpacity:.2})]})}):e.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center text-center",children:[e.jsx(Xs,{className:"h-16 w-16 text-muted-foreground/30 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No data available"}),e.jsx("p",{className:"text-muted-foreground max-w-md",children:"There is no revenue data for the selected time period."})]})})}),e.jsx(H,{value:"orders",className:"mt-0",children:e.jsx("div",{className:"h-[400px]",children:l?e.jsx("div",{className:"h-full w-full flex items-center justify-center",children:e.jsx(E,{className:"h-full w-full"})}):S.length?e.jsx(Ds,{width:"100%",height:"100%",children:e.jsxs(ha,{data:S,margin:{top:10,right:30,left:0,bottom:30},children:[e.jsx(xt,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),e.jsx(Ws,{dataKey:"date",tick:{fontSize:12},tickMargin:10,angle:-45}),e.jsx(Ys,{tick:{fontSize:12},allowDecimals:!1}),e.jsx(Ts,{formatter:N=>[N,"Orders"],labelFormatter:N=>`Date: ${N}`}),e.jsx(ua,{dataKey:"orders",fill:"#10b981"})]})}):e.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center text-center",children:[e.jsx(Ie,{className:"h-16 w-16 text-muted-foreground/30 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No data available"}),e.jsx("p",{className:"text-muted-foreground max-w-md",children:"There is no order data for the selected time period."})]})})}),e.jsx(H,{value:"visitors",className:"mt-0",children:e.jsx("div",{className:"h-[400px]",children:l?e.jsx("div",{className:"h-full w-full flex items-center justify-center",children:e.jsx(E,{className:"h-full w-full"})}):S.length?e.jsx(Ds,{width:"100%",height:"100%",children:e.jsxs(Xs,{data:S,margin:{top:10,right:30,left:0,bottom:30},children:[e.jsx(xt,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),e.jsx(Ws,{dataKey:"date",tick:{fontSize:12},tickMargin:10,angle:-45}),e.jsx(Ys,{tick:{fontSize:12},allowDecimals:!1}),e.jsx(Ts,{formatter:N=>[N,"Visitors"],labelFormatter:N=>`Date: ${N}`}),e.jsx(al,{}),e.jsx(Line,{type:"monotone",dataKey:"visitors",stroke:"#8b5cf6",strokeWidth:2,dot:{r:4},activeDot:{r:6}}),e.jsx(Line,{type:"monotone",dataKey:"pageViews",stroke:"#475569",strokeWidth:2,dot:{r:4},activeDot:{r:6}})]})}):e.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center text-center",children:[e.jsx(Vs,{className:"h-16 w-16 text-muted-foreground/30 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No data available"}),e.jsx("p",{className:"text-muted-foreground max-w-md",children:"There is no visitor data for the selected time period."})]})})}),e.jsx(H,{value:"conversion",className:"mt-0",children:e.jsx("div",{className:"h-[400px]",children:l?e.jsx("div",{className:"h-full w-full flex items-center justify-center",children:e.jsx(E,{className:"h-full w-full"})}):S.length?e.jsx(Ds,{width:"100%",height:"100%",children:e.jsxs(Xs,{data:S,margin:{top:10,right:30,left:0,bottom:30},children:[e.jsx(xt,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),e.jsx(Ws,{dataKey:"date",tick:{fontSize:12},tickMargin:10,angle:-45}),e.jsx(Ys,{tick:{fontSize:12},tickFormatter:N=>`${N}%`}),e.jsx(Ts,{formatter:N=>[`${Number(N).toFixed(2)}%`,"Conversion Rate"],labelFormatter:N=>`Date: ${N}`}),e.jsx(Line,{type:"monotone",dataKey:"conversionRate",stroke:"#f59e0b",strokeWidth:2,dot:{r:4},activeDot:{r:6}})]})}):e.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center text-center",children:[e.jsx(et,{className:"h-16 w-16 text-muted-foreground/30 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No data available"}),e.jsx("p",{className:"text-muted-foreground max-w-md",children:"There is no conversion rate data for the selected time period."})]})})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsxs(M,{className:"flex items-center",children:[e.jsx(Nt,{className:"h-4 w-4 mr-2 text-muted-foreground"}),"Sales By Hour"]}),e.jsx(re,{children:"Sales distribution throughout the day"})]}),e.jsx(D,{children:e.jsx("div",{className:"h-[250px]",children:k?e.jsx(E,{className:"h-full w-full"}):!g||!g.length?e.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center text-center",children:[e.jsx(Nt,{className:"h-12 w-12 text-muted-foreground/30 mb-4"}),e.jsx("h4",{className:"text-lg font-semibold mb-1",children:"No data available"}),e.jsx("p",{className:"text-muted-foreground text-sm max-w-md",children:"There is no hourly sales data available."})]}):e.jsx(Ds,{width:"100%",height:"100%",children:e.jsxs(ha,{data:g,margin:{top:10,right:10,left:-20,bottom:0},children:[e.jsx(Ws,{dataKey:"hour",tick:{fontSize:12}}),e.jsx(Ys,{tick:{fontSize:12}}),e.jsx(Ts,{formatter:N=>[N,"Orders"],labelFormatter:N=>`Time: ${N}`}),e.jsx(ua,{dataKey:"sales",fill:"#4f46e5"})]})})})})]}),e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsxs(M,{className:"flex items-center",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2 text-muted-foreground"}),"Top Products"]}),e.jsx(re,{children:"Best selling products"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:j?Array.from({length:5}).map((N,R)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{className:"h-8 w-8 rounded-md mr-3"}),e.jsxs("div",{className:"space-y-1 flex-1",children:[e.jsx(E,{className:"h-4 w-3/4"}),e.jsx(E,{className:"h-3 w-1/2"})]}),e.jsx(E,{className:"h-5 w-16"})]},R)):!v||!v.length?e.jsxs("div",{className:"h-[200px] w-full flex flex-col items-center justify-center text-center",children:[e.jsx(Ie,{className:"h-12 w-12 text-muted-foreground/30 mb-4"}),e.jsx("h4",{className:"text-lg font-semibold mb-1",children:"No data available"}),e.jsx("p",{className:"text-muted-foreground text-sm max-w-md",children:"There are no product sales to display."})]}):e.jsx(e.Fragment,{children:v.map((N,R)=>e.jsxs("div",{className:"flex items-center py-1",children:[e.jsx("div",{className:"w-8 h-8 rounded-md bg-primary/10 flex items-center justify-center text-primary font-medium mr-3",children:R+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:N.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[N.quantity," units"]})]}),e.jsxs("p",{className:"text-sm font-semibold",children:["$",parseFloat(N.revenue).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]},R))})})})]}),e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsxs(M,{className:"flex items-center",children:[e.jsx(it,{className:"h-4 w-4 mr-2 text-muted-foreground"}),"Sales by Category"]}),e.jsx(re,{children:"Revenue distribution by product category"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"h-[180px] mb-4",children:y?e.jsx(E,{className:"h-full w-full rounded-full"}):!b||!b.length?e.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center text-center",children:[e.jsx(it,{className:"h-12 w-12 text-muted-foreground/30 mb-4"}),e.jsx("h4",{className:"text-lg font-semibold mb-1",children:"No data available"}),e.jsx("p",{className:"text-muted-foreground text-sm max-w-md",children:"There is no category sales data available."})]}):e.jsx(Ds,{width:"100%",height:"100%",children:e.jsxs(rl,{children:[e.jsx(il,{data:b,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"#8884d8",dataKey:"value",nameKey:"name",label:({name:N,percent:R})=>`${N} ${(R*100).toFixed(0)}%`,labelLine:!1,children:b.map((N,R)=>e.jsx(ll,{fill:F[R%F.length]},`cell-${R}`))}),e.jsx(Ts,{formatter:N=>[`${N}%`,"Percentage"]})]})})}),b&&b.length>0&&e.jsx("div",{className:"grid grid-cols-2 gap-2",children:b.map((N,R)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:F[R%F.length]}}),e.jsx("span",{className:"text-xs",children:N.name}),e.jsxs("span",{className:"text-xs font-semibold ml-auto",children:["$",parseFloat(N.revenue).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]},R))})]})]})]})]})},ds=h.forwardRef(({className:s,...t},a)=>e.jsx(br,{className:C("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...t,ref:a,children:e.jsx(dl,{className:C("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ds.displayName=br.displayName;const sc=T.object({platformName:T.string().min(2,"Platform name must be at least 2 characters"),supportEmail:T.string().email("Please enter a valid email address"),websiteUrl:T.string().url("Please enter a valid URL"),defaultCurrency:T.string().min(3,"Please select a currency"),logo:T.any().optional(),favicon:T.any().optional()}),tc=T.object({stripePublicKey:T.string().optional(),stripeSecretKey:T.string().optional(),sendgridApiKey:T.string().optional(),googleMapsApiKey:T.string().optional()}),ac=T.object({emailHost:T.string().min(1,"SMTP host is required"),emailPort:T.coerce.number().int("Port must be a number"),emailUser:T.string().min(1,"SMTP username is required"),emailPassword:T.string().min(1,"SMTP password is required"),emailFromAddress:T.string().email("Please enter a valid email address"),emailFromName:T.string().min(1,"From name is required")}),rc=()=>{const{toast:s}=me();We();const[t,a]=h.useState(!1),r=Pe({resolver:ke(sc),defaultValues:{platformName:"MultiVend",supportEmail:"support@multivend.com",websiteUrl:"https://multivend.com",defaultCurrency:"USD"}}),d=Pe({resolver:ke(tc),defaultValues:{stripePublicKey:"",stripeSecretKey:"",sendgridApiKey:"",googleMapsApiKey:""}}),n=Pe({resolver:ke(ac),defaultValues:{emailHost:"smtp.hostinger.com",emailPort:465,emailUser:"verification@lelekart.com",emailPassword:"",emailFromAddress:"verification@lelekart.com",emailFromName:"MultiVend Platform"}}),x=async i=>{a(!0);try{await ee("POST","/api/settings/general",i),s({title:"Settings updated",description:"Your general settings have been saved successfully."})}catch{s({title:"Error",description:"There was an error saving your settings. Please try again.",variant:"destructive"})}finally{a(!1)}},m=async i=>{a(!0);try{await ee("POST","/api/settings/api-keys",i),s({title:"API keys updated",description:"Your API keys have been saved successfully."})}catch{s({title:"Error",description:"There was an error saving your API keys. Please try again.",variant:"destructive"})}finally{a(!1)}},u=async i=>{a(!0);try{await ee("POST","/api/settings/email",i),s({title:"Email settings updated",description:"Your email settings have been saved successfully."})}catch{s({title:"Error",description:"There was an error saving your email settings. Please try again.",variant:"destructive"})}finally{a(!1)}};return e.jsx(ue,{title:"Settings",subtitle:"Configure platform settings and integrations",children:e.jsxs(ve,{defaultValue:"general",className:"space-y-6",children:[e.jsxs(fe,{className:"w-full md:w-auto grid grid-cols-3",children:[e.jsx(B,{value:"general",children:"General"}),e.jsx(B,{value:"api-keys",children:"API Keys"}),e.jsx(B,{value:"email",children:"Email"})]}),e.jsx(H,{value:"general",children:e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"General Settings"}),e.jsx(re,{children:"Configure basic platform settings and preferences"})]}),e.jsxs("form",{onSubmit:r.handleSubmit(x),children:[e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"platformName",children:"Platform Name"}),e.jsx(L,{id:"platformName",placeholder:"MultiVend",...r.register("platformName")}),r.formState.errors.platformName&&e.jsx("p",{className:"text-sm text-red-500",children:r.formState.errors.platformName.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"supportEmail",children:"Support Email"}),e.jsx(L,{id:"supportEmail",type:"email",placeholder:"support@multivend.com",...r.register("supportEmail")}),r.formState.errors.supportEmail&&e.jsx("p",{className:"text-sm text-red-500",children:r.formState.errors.supportEmail.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"websiteUrl",children:"Website URL"}),e.jsx(L,{id:"websiteUrl",placeholder:"https://multivend.com",...r.register("websiteUrl")}),r.formState.errors.websiteUrl&&e.jsx("p",{className:"text-sm text-red-500",children:r.formState.errors.websiteUrl.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"defaultCurrency",children:"Default Currency"}),e.jsxs("select",{id:"defaultCurrency",className:"w-full h-10 px-3 py-2 text-sm border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",...r.register("defaultCurrency"),children:[e.jsx("option",{value:"INR",children:"INR - Indian Rupee (₹)"}),e.jsx("option",{value:"USD",children:"USD - US Dollar"}),e.jsx("option",{value:"EUR",children:"EUR - Euro"}),e.jsx("option",{value:"GBP",children:"GBP - British Pound"}),e.jsx("option",{value:"CAD",children:"CAD - Canadian Dollar"}),e.jsx("option",{value:"AUD",children:"AUD - Australian Dollar"}),e.jsx("option",{value:"JPY",children:"JPY - Japanese Yen"})]}),r.formState.errors.defaultCurrency&&e.jsx("p",{className:"text-sm text-red-500",children:r.formState.errors.defaultCurrency.message})]})]}),e.jsx(Ve,{className:"my-4"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Branding"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"logo",children:"Logo"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-md flex items-center justify-center text-primary text-lg font-bold",children:"MV"}),e.jsx(L,{id:"logo",type:"file",className:"max-w-sm",...r.register("logo")})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"favicon",children:"Favicon"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-md flex items-center justify-center text-white text-xs font-bold",children:"MV"}),e.jsx(L,{id:"favicon",type:"file",className:"max-w-sm",...r.register("favicon")})]})]})]})]}),e.jsx(Ve,{className:"my-4"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"System Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Y,{htmlFor:"enableMaintenance",children:"Maintenance Mode"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable maintenance mode to temporarily block access to the platform"})]}),e.jsx(ds,{id:"enableMaintenance"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Y,{htmlFor:"enableRegistration",children:"Enable Vendor Registration"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow new vendors to register on the platform"})]}),e.jsx(ds,{id:"enableRegistration",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Y,{htmlFor:"enableAutoApproval",children:"Auto-approve Vendors"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically approve new vendor accounts"})]}),e.jsx(ds,{id:"enableAutoApproval"})]})]})]})]}),e.jsx(Ze,{className:"flex justify-end",children:e.jsx(p,{type:"submit",disabled:t,children:t?e.jsx(e.Fragment,{children:"Saving..."}):e.jsxs(e.Fragment,{children:[e.jsx(st,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})})]})]})}),e.jsx(H,{value:"api-keys",children:e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"API Keys & Integrations"}),e.jsx(re,{children:"Configure third-party service integrations"})]}),e.jsxs("form",{onSubmit:d.handleSubmit(m),children:[e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Stripe Integration"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"stripePublicKey",children:"Stripe Public Key"}),e.jsx(L,{id:"stripePublicKey",placeholder:"pk_...",...d.register("stripePublicKey")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"stripeSecretKey",children:"Stripe Secret Key"}),e.jsx(L,{id:"stripeSecretKey",type:"password",placeholder:"sk_...",...d.register("stripeSecretKey")})]})]})]}),e.jsx(Ve,{className:"my-4"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"SendGrid Integration"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"sendgridApiKey",children:"SendGrid API Key"}),e.jsx(L,{id:"sendgridApiKey",type:"password",placeholder:"SG...",...d.register("sendgridApiKey")})]})]}),e.jsx(Ve,{className:"my-4"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Google Maps Integration"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"googleMapsApiKey",children:"Google Maps API Key"}),e.jsx(L,{id:"googleMapsApiKey",placeholder:"AIza...",...d.register("googleMapsApiKey")})]})]})]}),e.jsx(Ze,{className:"flex justify-end",children:e.jsx(p,{type:"submit",disabled:t,children:t?e.jsx(e.Fragment,{children:"Saving..."}):e.jsxs(e.Fragment,{children:[e.jsx(st,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})})]})]})}),e.jsx(H,{value:"email",children:e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"Email Settings"}),e.jsx(re,{children:"Configure email server settings and templates"})]}),e.jsxs("form",{onSubmit:n.handleSubmit(u),children:[e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"SMTP Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"emailHost",children:"SMTP Host"}),e.jsx(L,{id:"emailHost",placeholder:"smtp.example.com",...n.register("emailHost")}),n.formState.errors.emailHost&&e.jsx("p",{className:"text-sm text-red-500",children:n.formState.errors.emailHost.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"emailPort",children:"SMTP Port"}),e.jsx(L,{id:"emailPort",type:"number",placeholder:"587",...n.register("emailPort")}),n.formState.errors.emailPort&&e.jsx("p",{className:"text-sm text-red-500",children:n.formState.errors.emailPort.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"emailUser",children:"SMTP Username"}),e.jsx(L,{id:"emailUser",placeholder:"username",...n.register("emailUser")}),n.formState.errors.emailUser&&e.jsx("p",{className:"text-sm text-red-500",children:n.formState.errors.emailUser.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"emailPassword",children:"SMTP Password"}),e.jsx(L,{id:"emailPassword",type:"password",placeholder:"••••••••",...n.register("emailPassword")}),n.formState.errors.emailPassword&&e.jsx("p",{className:"text-sm text-red-500",children:n.formState.errors.emailPassword.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"emailFromAddress",children:"From Email Address"}),e.jsx(L,{id:"emailFromAddress",type:"email",placeholder:"noreply@example.com",...n.register("emailFromAddress")}),n.formState.errors.emailFromAddress&&e.jsx("p",{className:"text-sm text-red-500",children:n.formState.errors.emailFromAddress.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"emailFromName",children:"From Name"}),e.jsx(L,{id:"emailFromName",placeholder:"MultiVend Platform",...n.register("emailFromName")}),n.formState.errors.emailFromName&&e.jsx("p",{className:"text-sm text-red-500",children:n.formState.errors.emailFromName.message})]})]})]}),e.jsx(Ve,{className:"my-4"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Test Email Configuration"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Send a test email to verify your settings"})]}),e.jsx(p,{type:"button",variant:"outline",children:"Send Test Email"})]})}),e.jsx(Ve,{className:"my-4"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Email Templates"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:"Welcome Email"}),e.jsx(p,{type:"button",variant:"outline",size:"sm",children:"Edit Template"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Sent to new users when they register an account"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:"Password Reset"}),e.jsx(p,{type:"button",variant:"outline",size:"sm",children:"Edit Template"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Sent when users request a password reset"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:"OTP Verification"}),e.jsx(p,{type:"button",variant:"outline",size:"sm",children:"Edit Template"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Sent with one-time password for account verification"})]})]})]})]}),e.jsx(Ze,{className:"flex justify-end",children:e.jsx(p,{type:"submit",disabled:t,children:t?e.jsx(e.Fragment,{children:"Saving..."}):e.jsxs(e.Fragment,{children:[e.jsx(st,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})})]})]})})]})})},ic=wr({name:he().min(1,{message:"Product name is required"}),description:he().optional(),status:ol(["draft","active","inactive","archived"],{required_error:"Please select a product status"}),categoryId:he().optional(),tags:Bt(he()).default([]),sellingPrice:he().refine(s=>!isNaN(parseFloat(s))&&parseFloat(s)>=0,{message:"Selling price must be a valid number greater than or equal to 0"}),purchasePrice:he().refine(s=>s===""||!isNaN(parseFloat(s))&&parseFloat(s)>=0,{message:"Purchase price must be a valid number greater than or equal to 0"}).optional().nullable(),mrp:he().refine(s=>s===""||!isNaN(parseFloat(s))&&parseFloat(s)>=0,{message:"MRP must be a valid number greater than or equal to 0"}).optional().nullable(),gst:he().refine(s=>s===""||!isNaN(parseFloat(s))&&parseFloat(s)>=0&&parseFloat(s)<=100,{message:"GST must be a valid percentage between 0 and 100"}).optional().nullable(),sku:he().optional().nullable(),barcode:he().optional().nullable(),inventoryQuantity:he().refine(s=>s===""||!isNaN(parseInt(s))&&parseInt(s)>=0,{message:"Inventory quantity must be a valid number greater than or equal to 0"}).default("0"),weight:he().refine(s=>s===""||!isNaN(parseFloat(s))&&parseFloat(s)>=0,{message:"Weight must be a valid number greater than or equal to 0"}).optional().nullable(),length:he().refine(s=>s===""||!isNaN(parseFloat(s))&&parseFloat(s)>=0,{message:"Length must be a valid number greater than or equal to 0"}).optional().nullable(),width:he().refine(s=>s===""||!isNaN(parseFloat(s))&&parseFloat(s)>=0,{message:"Width must be a valid number greater than or equal to 0"}).optional().nullable(),height:he().refine(s=>s===""||!isNaN(parseFloat(s))&&parseFloat(s)>=0,{message:"Height must be a valid number greater than or equal to 0"}).optional().nullable(),featuredImageUrl:he().optional().nullable(),images:Bt(he()).default([]),hasVariants:Cr().default(!1)});wr({color:he().min(1,{message:"Color is required"}),size:he().min(1,{message:"Size is required"}),sku:he().optional().nullable(),barcode:he().optional().nullable(),sellingPrice:he().refine(s=>!isNaN(parseFloat(s))&&parseFloat(s)>=0,{message:"Selling price must be a valid number greater than or equal to 0"}),purchasePrice:he().refine(s=>s===""||!isNaN(parseFloat(s))&&parseFloat(s)>=0,{message:"Purchase price must be a valid number greater than or equal to 0"}).optional().nullable(),mrp:he().refine(s=>s===""||!isNaN(parseFloat(s))&&parseFloat(s)>=0,{message:"MRP must be a valid number greater than or equal to 0"}).optional().nullable(),gst:he().refine(s=>s===""||!isNaN(parseFloat(s))&&parseFloat(s)>=0&&parseFloat(s)<=100,{message:"GST must be a valid percentage between 0 and 100"}).optional().nullable(),inventoryQuantity:he().refine(s=>s===""||!isNaN(parseInt(s))&&parseInt(s)>=0,{message:"Inventory quantity must be a valid number greater than or equal to 0"}).default("0"),weight:he().refine(s=>s===""||!isNaN(parseFloat(s))&&parseFloat(s)>=0,{message:"Weight must be a valid number greater than or equal to 0"}).optional().nullable(),isDefault:Cr().default(!1),images:Bt(he()).default([]),imageUrl:he().optional().nullable(),attributes:ml(he(),he()).optional()});const ya=xl,Jr=h.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(Sr,{ref:r,className:C("relative overflow-hidden",s),...a,children:[e.jsx(hl,{className:"h-full w-full rounded-[inherit]",children:t}),e.jsx(Xr,{}),e.jsx(ul,{})]}));Jr.displayName=Sr.displayName;const Xr=h.forwardRef(({className:s,orientation:t="vertical",...a},r)=>e.jsx(Pr,{ref:r,orientation:t,className:C("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...a,children:e.jsx(pl,{className:"relative flex-1 rounded-full bg-border"})}));Xr.displayName=Pr.displayName;function lc({value:s=[],featuredImage:t,onChange:a,onFeaturedImageChange:r}){const[d,n]=h.useState(!1),{toast:x}=me(),m=async o=>{var c;if((c=o.target.files)!=null&&c.length)try{n(!0);const v=Array.from(o.target.files).map(async k=>{const b=new FormData;b.append("image",k);const y=await fetch("/api/s3/upload/product-image",{method:"POST",body:b});if(!y.ok)throw new Error(`Failed to upload ${k.name}`);return(await y.json()).url}),j=await Promise.all(v),g=[...s,...j];a(g),r&&!t&&j.length>0&&r(j[0]),x({title:"Images uploaded",description:`Successfully uploaded ${j.length} image${j.length!==1?"s":""}`}),o.target.value=""}catch(l){console.error("Upload error:",l),x({title:"Upload failed",description:l instanceof Error?l.message:"Failed to upload images",variant:"destructive"})}finally{n(!1)}},u=o=>{const c=[...s],l=c.splice(o,1)[0];a(c),r&&t===l&&r(c.length>0?c[0]:null)},i=o=>{r&&r(o)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(Y,{htmlFor:"product-images",className:"text-base font-medium",children:"Product Images"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(p,{variant:"outline",onClick:()=>{var o;return(o=document.getElementById("product-images"))==null?void 0:o.click()},disabled:d,className:"w-full md:w-auto py-6 border-dashed",children:[d?e.jsx(oe,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(rt,{className:"mr-2 h-4 w-4"}),d?"Uploading...":"Upload Images"]}),e.jsx("input",{id:"product-images",type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:m,disabled:d})]})]}),t&&r&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{className:"text-base font-medium",children:"Featured Image"}),e.jsx(P,{className:"overflow-hidden",children:e.jsxs("div",{className:"relative group",children:[e.jsx(ya,{ratio:4/3,children:e.jsx("img",{src:t,alt:"Featured product image",className:"object-cover w-full h-full"})}),e.jsx("div",{className:"absolute top-2 right-2 flex gap-1",children:e.jsx(p,{variant:"destructive",size:"icon",className:"h-8 w-8 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>r(null),children:e.jsx(ps,{className:"h-4 w-4"})})}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 transition-colors"})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Y,{className:"text-base font-medium",children:["All Images (",s.length,")"]}),s.length>0?e.jsx(Jr,{className:"h-[300px] rounded-md border",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 p-4",children:s.map((o,c)=>e.jsx(P,{className:"overflow-hidden",children:e.jsxs("div",{className:"relative group",children:[e.jsx(ya,{ratio:1,children:e.jsx("img",{src:o,alt:`Product image ${c+1}`,className:C("object-cover w-full h-full",t===o&&"ring-2 ring-primary ring-offset-2")})}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100",children:e.jsxs("div",{className:"flex gap-1",children:[r&&t!==o&&e.jsx(p,{variant:"secondary",size:"sm",className:"h-8",onClick:()=>i(o),children:"Set as Featured"}),e.jsx(p,{variant:"destructive",size:"icon",className:"h-8 w-8",onClick:()=>u(c),children:e.jsx(ze,{className:"h-4 w-4"})})]})}),t===o&&e.jsx("div",{className:"absolute top-2 left-2 bg-primary text-primary-foreground text-xs px-2 py-1 rounded-sm",children:"Featured"})]})},c))})}):e.jsxs(P,{className:"flex flex-col items-center justify-center py-10",children:[e.jsx(Rs,{className:"h-16 w-16 text-muted-foreground/40 mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No product images uploaded yet"}),e.jsx(p,{variant:"link",className:"mt-2",onClick:()=>{var o;return(o=document.getElementById("product-images"))==null?void 0:o.click()},children:"Upload your first image"})]})]})]})}function nc({value:s=[],onChange:t,label:a="Tags",helpText:r="Add relevant keywords to help customers find your product"}){const[d,n]=h.useState(""),x=()=>{if(!d.trim())return;const i=d.trim().toLowerCase();s.some(o=>o.toLowerCase()===i)||t([...s,i]),n("")},m=i=>{t(s.filter((o,c)=>c!==i))},u=i=>{i.key==="Enter"?(i.preventDefault(),x()):i.key==="Backspace"&&!d&&s.length>0&&m(s.length-1)};return e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{className:"text-base font-medium",children:a}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:s.map((i,o)=>e.jsxs(J,{variant:"secondary",className:"py-1.5",children:[i,e.jsx(p,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0 ml-1 hover:bg-transparent",onClick:()=>m(o),children:e.jsx(ps,{className:"h-3 w-3"})})]},o))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{placeholder:"Add tag (press Enter to add)",value:d,onChange:i=>n(i.target.value),onKeyDown:u,className:"flex-1"}),e.jsx(p,{onClick:x,type:"button",disabled:!d.trim(),children:"Add"})]}),r&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:r})]})}function As({currentStep:s,totalSteps:t,onPrevious:a,onNext:r,onSave:d,isSaving:n=!1,isNextDisabled:x=!1,isPreviousDisabled:m=!1,isLastStep:u=!1}){return e.jsxs("div",{className:"flex items-center justify-between border-t pt-6 mt-8",children:[e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:["Step ",s," of ",t]}),e.jsxs("div",{className:"flex gap-2",children:[s>1&&e.jsxs(p,{type:"button",variant:"outline",onClick:a,disabled:m,children:[e.jsx(ot,{className:"mr-2 h-4 w-4"}),"Previous"]}),d&&e.jsxs(p,{type:"button",variant:"outline",onClick:d,disabled:n,children:[e.jsx(st,{className:"mr-2 h-4 w-4"}),"Save Progress"]}),u?e.jsx(p,{type:"submit",disabled:x||n,children:n?"Saving...":"Complete Product"}):e.jsxs(p,{type:"button",onClick:r,disabled:x,children:["Next",e.jsx(Bs,{className:"ml-2 h-4 w-4"})]})]})]})}function cc({currentStep:s,steps:t,onStepClick:a,className:r}){return e.jsxs("aside",{className:C("hidden lg:block px-6 py-8 border-r h-full",r),children:[e.jsx("div",{className:"font-semibold mb-6 text-lg",children:"Create New Product"}),e.jsx("nav",{className:"space-y-6",children:t.map((d,n)=>{const x=n+1,m=x===s,u=x<s,i=x>s;return e.jsxs("div",{className:C("flex items-start gap-3 py-2 px-3 rounded-md transition-colors cursor-pointer",m&&"bg-primary/5 text-primary border-l-4 border-primary pl-2",u&&"text-muted-foreground",a&&"hover:bg-muted"),onClick:()=>a==null?void 0:a(x),children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:e.jsx("div",{className:C("flex items-center justify-center h-8 w-8 rounded-full border text-base font-medium",m&&"border-primary bg-primary text-primary-foreground",u&&"border-green-500 bg-green-500 text-white",i&&"border-muted-foreground/30 text-muted-foreground/70"),children:u?"✓":x})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d.icon,e.jsx("span",{className:C("font-medium",m&&"text-primary",u&&"text-muted-foreground"),children:d.label})]}),d.description&&e.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:d.description})]})]},n)})})]})}const ba=[{label:"Basic Information",description:"Name, description and status",icon:e.jsx(jl,{className:"h-4 w-4"})},{label:"Category & Tags",description:"Organize your product",icon:e.jsx(kr,{className:"h-4 w-4"})},{label:"Pricing",description:"Set your price points",icon:e.jsx(zs,{className:"h-4 w-4"})},{label:"Inventory",description:"Track your stock",icon:e.jsx(Ps,{className:"h-4 w-4"})},{label:"Images",description:"Upload product photos",icon:e.jsx(Rs,{className:"h-4 w-4"})},{label:"Variants",description:"Create product options",icon:e.jsx(gl,{className:"h-4 w-4"})}],gs=h.forwardRef(({className:s,...t},a)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:a,className:C("w-full caption-bottom text-sm",s),...t})}));gs.displayName="Table";const fs=h.forwardRef(({className:s,...t},a)=>e.jsx("thead",{ref:a,className:C("[&_tr]:border-b",s),...t}));fs.displayName="TableHeader";const Ns=h.forwardRef(({className:s,...t},a)=>e.jsx("tbody",{ref:a,className:C("[&_tr:last-child]:border-0",s),...t}));Ns.displayName="TableBody";const dc=h.forwardRef(({className:s,...t},a)=>e.jsx("tfoot",{ref:a,className:C("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...t}));dc.displayName="TableFooter";const Fe=h.forwardRef(({className:s,...t},a)=>e.jsx("tr",{ref:a,className:C("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...t}));Fe.displayName="TableRow";const le=h.forwardRef(({className:s,...t},a)=>e.jsx("th",{ref:a,className:C("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...t}));le.displayName="TableHead";const se=h.forwardRef(({className:s,...t},a)=>e.jsx("td",{ref:a,className:C("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...t}));se.displayName="TableCell";const Zr=h.forwardRef(({className:s,...t},a)=>e.jsx("caption",{ref:a,className:C("mt-4 text-sm text-muted-foreground",s),...t}));Zr.displayName="TableCaption";const $t=[{name:"Red",value:"#e53935"},{name:"Blue",value:"#1e88e5"},{name:"Green",value:"#43a047"},{name:"Yellow",value:"#fdd835"},{name:"Black",value:"#212121"},{name:"White",value:"#f5f5f5"},{name:"Gray",value:"#9e9e9e"},{name:"Navy",value:"#0d47a1"},{name:"Purple",value:"#8e24aa"},{name:"Pink",value:"#d81b60"},{name:"Orange",value:"#fb8c00"},{name:"Brown",value:"#6d4c41"}],oc=["XS","S","M","L","XL","XXL","3XL","4XL"];function mc({colorValues:s,sizeValues:t,onColorValuesChange:a,onSizeValuesChange:r,onGenerateVariants:d}){const[n,x]=h.useState(""),[m,u]=h.useState(""),[i,o]=h.useState("colors"),c=h.useMemo(()=>s.length*t.length,[s,t]),l=()=>{n&&!s.includes(n)&&(a([...s,n]),x(""))},v=()=>{m&&!t.includes(m)&&(r([...t,m]),u(""))},j=y=>{a(s.filter(V=>V!==y))},g=y=>{r(t.filter(V=>V!==y))},k=y=>{s.includes(y)||a([...s,y])},b=y=>{t.includes(y)||r([...t,y])};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(P,{children:[e.jsxs(I,{className:"pb-3",children:[e.jsx(M,{children:"Create Variant Matrix"}),e.jsx(re,{children:"Add colors and sizes to generate all possible combinations as variants"})]}),e.jsx(D,{children:e.jsxs(ve,{value:i,onValueChange:y=>o(y),children:[e.jsxs(fe,{className:"grid w-full grid-cols-2",children:[e.jsx(B,{value:"colors",children:"Colors"}),e.jsx(B,{value:"sizes",children:"Sizes"})]}),e.jsxs(H,{value:"colors",className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{placeholder:"Add a color (e.g., Red, Blue, Green)",value:n,onChange:y=>x(y.target.value),onKeyDown:y=>y.key==="Enter"&&l()}),e.jsx(p,{type:"button",onClick:l,size:"icon",children:e.jsx(nt,{className:"h-4 w-4"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Quick add common colors"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:$t.map(y=>e.jsx($r,{children:e.jsxs(Zl,{children:[e.jsx(en,{asChild:!0,children:e.jsx("button",{type:"button",onClick:()=>k(y.name),className:`w-8 h-8 rounded-full border ${s.includes(y.name)?"border-primary":"border-muted"}`,style:{backgroundColor:y.value},children:s.includes(y.name)&&e.jsx("span",{className:"flex items-center justify-center",children:e.jsx(Ke,{className:"h-4 w-4 text-white drop-shadow-[0_0_1px_rgba(0,0,0,0.5)]"})})})}),e.jsx(Or,{side:"bottom",children:e.jsxs("p",{children:[y.name,s.includes(y.name)?" (Added)":""]})})]})},y.name))})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Selected colors (",s.length,")"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.length===0?e.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No colors selected"}):s.map(y=>{const V=$t.find(S=>S.name===y);return e.jsxs(J,{variant:"outline",className:"flex items-center gap-1",style:{backgroundColor:V?V.value+"20":void 0,borderColor:V?V.value:void 0},children:[V&&e.jsx("span",{className:"inline-block w-3 h-3 rounded-full mr-1",style:{backgroundColor:V.value}}),y,e.jsx("button",{onClick:()=>j(y),className:"ml-1 text-muted-foreground hover:text-destructive",children:e.jsx(ps,{className:"h-3 w-3"})})]},y)})})]})]}),e.jsxs(H,{value:"sizes",className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{placeholder:"Add a size (e.g., S, M, L, XL)",value:m,onChange:y=>u(y.target.value),onKeyDown:y=>y.key==="Enter"&&v()}),e.jsx(p,{type:"button",onClick:v,size:"icon",children:e.jsx(nt,{className:"h-4 w-4"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Quick add common sizes"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:oc.map(y=>e.jsxs(p,{type:"button",variant:t.includes(y)?"default":"outline",size:"sm",onClick:()=>b(y),children:[y,t.includes(y)?e.jsx(Ke,{className:"ml-1 h-3 w-3"}):null]},y))})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Selected sizes (",t.length,")"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.length===0?e.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No sizes selected"}):t.map(y=>e.jsxs(J,{variant:"outline",className:"flex items-center gap-1",children:[y,e.jsx("button",{onClick:()=>g(y),className:"ml-1 text-muted-foreground hover:text-destructive",children:e.jsx(ps,{className:"h-3 w-3"})})]},y))})]})]})]})})]}),s.length>0&&t.length>0&&e.jsxs(P,{children:[e.jsxs(I,{className:"pb-3",children:[e.jsx(M,{children:"Variant Matrix Preview"}),e.jsxs(re,{children:[c," variants will be created (",s.length," colors × ",t.length," sizes)"]})]}),e.jsxs(D,{children:[e.jsx("div",{className:"border rounded-md overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted/50",children:[e.jsx("th",{className:"px-4 py-2 text-left font-medium",children:"Color / Size"}),t.map(y=>e.jsx("th",{className:"px-4 py-2 text-center font-medium",children:y},y))]})}),e.jsx("tbody",{children:s.map((y,V)=>{const S=$t.find($=>$.name===y);return e.jsxs("tr",{className:V%2===0?"":"bg-muted/20",children:[e.jsxs("td",{className:"px-4 py-2 flex items-center gap-2",children:[S&&e.jsx("span",{className:"inline-block w-3 h-3 rounded-full",style:{backgroundColor:S.value}}),y]}),t.map($=>e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-xs text-primary",children:"✓"})},`${y}-${$}`))]},y)})})]})}),e.jsxs("div",{className:"mt-4",children:[e.jsxs(p,{type:"button",onClick:d,className:"w-full",disabled:s.length===0||t.length===0,children:["Generate ",c," Variants"]}),(s.length===0||t.length===0)&&e.jsx("p",{className:"text-sm text-muted-foreground mt-2 text-center",children:"You need at least one color and one size to generate variants"})]})]})]})]})}const xc=({product:s,initialVariant:t=null,initialAttributes:a,onClose:r})=>{var ye,De,Je,be,we,A,ce,w;const[d,n]=h.useState([]),[x,m]=h.useState("attributes"),[u,i]=h.useState([]),[o,c]=h.useState(!1),[l,v]=h.useState(!1),[j,g]=h.useState({}),[k,b]=h.useState([]),[y,V]=h.useState({}),S=Qe(),{toast:$}=me();h.useEffect(()=>{var f,W;if(t){c(!0),m("details");const X=[];X.push({name:"Color",values:[t.color],isColor:!0}),X.push({name:"Size",values:[t.size]}),Object.entries(t.attributes||{}).forEach(([pe,vs])=>{pe!=="Color"&&pe!=="Size"&&X.push({name:pe,values:[vs]})}),n(X),i([t])}else if(a){const X=[];a.colors&&a.colors.length>0&&X.push({name:"Color",values:a.colors,isColor:!0}),a.sizes&&a.sizes.length>0&&X.push({name:"Size",values:a.sizes}),X.length>0&&(n(X),(f=a.colors)!=null&&f.length&&((W=a.sizes)!=null&&W.length)&&m("matrix"))}},[t,a]);const U=ne({mutationFn:async()=>{if(o&&u.length===1){const f=u[0];await ee("PUT",`/api/products/${s.id}/variants/${f.id}`,{color:f.color,size:f.size,purchasePrice:f.purchasePrice,sellingPrice:f.sellingPrice,mrp:f.mrp,gst:f.gst,sku:f.sku,barcode:f.barcode,weight:f.weight,inventoryQuantity:f.inventoryQuantity,isDefault:f.isDefault,attributes:f.attributes,images:f.images,imageUrl:f.imageUrl})}else await Promise.all(u.map(f=>ee("POST",`/api/products/${s.id}/variants`,{color:f.color,size:f.size,purchasePrice:f.purchasePrice,sellingPrice:f.sellingPrice,mrp:f.mrp,gst:f.gst,sku:f.sku,barcode:f.barcode,weight:f.weight,inventoryQuantity:f.inventoryQuantity,isDefault:f.isDefault,attributes:f.attributes,images:f.images,imageUrl:f.imageUrl})))},onSuccess:()=>{S.invalidateQueries({queryKey:["/api/products",s.id,"variants"]}),$({title:o?"Variant updated":"Variants created",description:o?"The variant has been updated successfully.":"New variants have been created successfully."}),r()},onError:f=>{$({title:"Error",description:f instanceof Error?f.message:"Failed to save variants",variant:"destructive"})}}),F=()=>{const f=d.some(Ee=>Ee.name==="Color"&&Ee.values.length>0),W=d.some(Ee=>Ee.name==="Size"&&Ee.values.length>0);if(!f||!W){V({generate:"Both Color and Size attributes must have at least one value"});return}V({});const X=d.find(Ee=>Ee.name==="Color"),pe=d.find(Ee=>Ee.name==="Size"),vs=[],ys=[];if(s.sku)ys.push(s.sku);else if(s.name){const Ee=s.name.split(" ").map(Gs=>Gs.charAt(0).toUpperCase()).join("").substring(0,3);ys.push(Ee)}else ys.push("PROD");const ii=ys.join("-"),li=s.sellingPrice||"0",ni=s.gst||"18";let na=!0;for(const Ee of X.values)for(const Gs of pe.values){const ci=Ee.substring(0,3).toUpperCase(),di=Gs.toUpperCase(),oi=`${ii}-${ci}-${di}`.replace(/\s+/g,"-"),ca={Color:Ee,Size:Gs};d.forEach(_s=>{_s.name!=="Color"&&_s.name!=="Size"&&_s.values.length>0&&(ca[_s.name]=_s.values[0])}),vs.push({id:Ma(),createdAt:null,color:Ee,size:Gs,purchasePrice:null,sellingPrice:li,mrp:null,gst:ni,sku:oi,barcode:null,weight:null,inventoryQuantity:10,isDefault:na,productId:s.id,imageUrl:null,attributes:ca,images:[],position:null,updatedAt:null}),na=!1}i(vs),m("details")},z=(f,W,X)=>{const pe=[...u];pe[f]={...pe[f],[W]:X},i(pe)},O=f=>{const W=[...u];W.splice(f,1),i(W)},N=f=>{const W=u.map((X,pe)=>({...X,isDefault:pe===f}));i(W)},R=f=>{const W=f.toString();k.includes(W)?b(k.filter(X=>X!==W)):b([...k,W])},xe=()=>{if(k.length===0){$({title:"No variants selected",description:"Please select at least one variant to apply bulk edits",variant:"destructive"});return}const f=u.map(W=>{if(k.includes(W.id.toString())){const X={...W};return j.sellingPrice!==void 0&&(X.sellingPrice=j.sellingPrice||"0"),j.mrp!==void 0&&(X.mrp=j.mrp||null),j.gst!==void 0&&(X.gst=j.gst||null),j.purchasePrice!==void 0&&(X.purchasePrice=j.purchasePrice||null),j.inventoryQuantity!==void 0&&(X.inventoryQuantity=j.inventoryQuantity||0),j.sku!==void 0&&(X.sku=j.sku||null),j.barcode!==void 0&&(X.barcode=j.barcode||null),j.weight!==void 0&&(X.weight=j.weight||null),X}return W});i(f),v(!1),g({}),b([]),$({title:"Bulk edit applied",description:`Updated ${k.length} variants`})},ae=()=>{const f={};if(u.length===0)return f.variants="No variants to save",!1;let W=!0;return u.forEach((X,pe)=>{(!X.sellingPrice||Number(X.sellingPrice)<0)&&(f[`variant_${pe}_price`]="Price must be a positive number",W=!1),X.inventoryQuantity<0&&(f[`variant_${pe}_inventory`]="Inventory cannot be negative",W=!1)}),V(f),W},Ne=()=>{ae()?U.mutate():$({title:"Validation Error",description:"Please fix the errors before saving",variant:"destructive"})};return e.jsx(Re,{open:!0,onOpenChange:r,children:e.jsxs(Te,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ms,{children:[e.jsx(xs,{children:o?"Edit Variant":"Create Product Variants"}),e.jsx(js,{children:o?"Update variant details":"Define options like size and color to create product variants"})]}),e.jsxs(ve,{value:x,onValueChange:m,children:[e.jsxs(fe,{className:"mb-4",children:[e.jsx(B,{value:"attributes",children:"1. Define Attributes"}),e.jsx(B,{value:"matrix",disabled:!d.some(f=>f.name==="Color"&&f.values.length>0)||!d.some(f=>f.name==="Size"&&f.values.length>0),children:"2. Matrix Preview"}),e.jsx(B,{value:"details",disabled:u.length===0,children:"3. Variant Details"})]}),e.jsxs(H,{value:"attributes",children:[e.jsx(mc,{colorValues:((ye=d.find(f=>f.name==="Color"))==null?void 0:ye.values)||[],sizeValues:((De=d.find(f=>f.name==="Size"))==null?void 0:De.values)||[],onColorValuesChange:f=>{const W=[...d],X=W.findIndex(pe=>pe.name==="Color");X>=0?W[X].values=f:W.push({name:"Color",values:f,isColor:!0}),n(W)},onSizeValuesChange:f=>{const W=[...d],X=W.findIndex(pe=>pe.name==="Size");X>=0?W[X].values=f:W.push({name:"Size",values:f}),n(W)},onGenerateVariants:F}),y.generate&&e.jsxs("div",{className:"mt-4 text-sm text-destructive flex items-center gap-2",children:[e.jsx(_e,{className:"h-4 w-4"}),y.generate]})]}),e.jsx(H,{value:"matrix",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Variant Matrix Preview"}),e.jsxs(p,{onClick:F,disabled:!d.some(f=>f.name==="Color"&&f.values.length>0)||!d.some(f=>f.name==="Size"&&f.values.length>0),children:["Generate ",((Je=d.find(f=>f.name==="Color"))==null?void 0:Je.values.length)||0," × ",((be=d.find(f=>f.name==="Size"))==null?void 0:be.values.length)||0," Variants"]})]}),e.jsx("div",{className:"border rounded-md overflow-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted/50",children:[e.jsx("th",{className:"px-3 py-2 text-left",children:"Color / Size"}),(we=d.find(f=>f.name==="Size"))==null?void 0:we.values.map(f=>e.jsx("th",{className:"px-3 py-2 text-center",children:f},f))]})}),e.jsx("tbody",{children:(A=d.find(f=>f.name==="Color"))==null?void 0:A.values.map((f,W)=>{var X;return e.jsxs("tr",{className:W%2===0?"":"bg-muted/20",children:[e.jsxs("td",{className:"px-3 py-2 flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:f==="Red"?"#e53935":f==="Blue"?"#1e88e5":f==="Green"?"#43a047":f==="Black"?"#212121":f==="White"?"#f5f5f5":f==="Yellow"?"#fdd835":f==="Purple"?"#8e24aa":f.startsWith("#")?f:"#9e9e9e"}}),f]}),(X=d.find(pe=>pe.name==="Size"))==null?void 0:X.values.map(pe=>e.jsx("td",{className:"px-3 py-2 text-center",children:e.jsx("div",{className:"p-1 rounded border border-primary/20 bg-primary/5 text-primary text-xs font-medium",children:"✓ Will be created"})},`${f}-${pe}`))]},f)})})]})}),e.jsxs("div",{className:"flex flex-col gap-4 mt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"default-price",children:"Default Selling Price"}),e.jsx(L,{id:"default-price",type:"text",inputMode:"decimal",placeholder:"e.g. 19.99",value:s.sellingPrice||"",onChange:f=>{}}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Applied to all new variants"})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"default-inventory",children:"Default Inventory"}),e.jsx(L,{id:"default-inventory",type:"number",placeholder:"e.g. 10",defaultValue:"10"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Initial stock for each variant"})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"default-sku",children:"SKU Prefix"}),e.jsx(L,{id:"default-sku",placeholder:"e.g. SHIRT-",defaultValue:s.sku||""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Will be combined with variant attributes"})]})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(p,{className:"w-full py-6 text-lg font-medium",onClick:F,disabled:!d.some(f=>f.name==="Color"&&f.values.length>0)||!d.some(f=>f.name==="Size"&&f.values.length>0),children:["Generate ",((ce=d.find(f=>f.name==="Color"))==null?void 0:ce.values.length)||0," × ",((w=d.find(f=>f.name==="Size"))==null?void 0:w.values.length)||0," Variants"]}),e.jsxs("div",{className:"rounded-md p-3 bg-blue-50 border border-blue-100 text-blue-800 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Note:"})," After generating variants, you'll be able to:"]}),e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[e.jsx("li",{children:"Edit each variant individually"}),e.jsx("li",{children:"Bulk edit multiple variants at once"}),e.jsx("li",{children:"Upload images for each variant"}),e.jsx("li",{children:"Set default variant for product page"})]})]})]})]})]})}),e.jsx(H,{value:"details",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium",children:[u.length," ",u.length===1?"Variant":"Variants"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[u.length>1&&!l&&e.jsx(p,{variant:"outline",onClick:()=>{v(!0),b([])},children:"Bulk Edit"}),l&&e.jsx(p,{variant:"outline",onClick:()=>{v(!1),b([])},children:"Cancel Bulk Edit"})]})]}),l&&e.jsxs("div",{className:"p-4 border rounded-md mb-4 bg-muted/50",children:[e.jsxs("h4",{className:"font-medium mb-2",children:["Bulk Edit ",k.length," Selected Variants"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"bulk-price",children:"Selling Price"}),e.jsx(L,{id:"bulk-price",type:"text",inputMode:"decimal",placeholder:"e.g. 19.99",value:j.sellingPrice||"",onChange:f=>g({...j,sellingPrice:f.target.value})})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"bulk-mrp",children:"MRP"}),e.jsx(L,{id:"bulk-mrp",type:"text",inputMode:"decimal",placeholder:"e.g. 24.99",value:j.mrp||"",onChange:f=>g({...j,mrp:f.target.value})})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"bulk-purchase-price",children:"Purchase Price"}),e.jsx(L,{id:"bulk-purchase-price",type:"text",inputMode:"decimal",placeholder:"e.g. 12.99",value:j.purchasePrice||"",onChange:f=>g({...j,purchasePrice:f.target.value})})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"bulk-gst",children:"GST %"}),e.jsx(L,{id:"bulk-gst",type:"text",inputMode:"decimal",placeholder:"e.g. 18",value:j.gst||"",onChange:f=>g({...j,gst:f.target.value})})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"bulk-inventory",children:"Inventory"}),e.jsx(L,{id:"bulk-inventory",type:"number",placeholder:"e.g. 10",value:j.inventoryQuantity||"",onChange:f=>g({...j,inventoryQuantity:parseInt(f.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"bulk-sku",children:"SKU"}),e.jsx(L,{id:"bulk-sku",placeholder:"e.g. PRODUCT-001",value:j.sku||"",onChange:f=>g({...j,sku:f.target.value})})]})]}),e.jsx(p,{onClick:xe,children:"Apply Changes"})]}),e.jsx("div",{className:"border rounded-md overflow-hidden",children:e.jsxs(gs,{children:[e.jsx(fs,{children:e.jsxs(Fe,{children:[l&&e.jsx(le,{style:{width:40},children:e.jsx(ks,{checked:k.length===u.length,onCheckedChange:f=>{b(f?u.map(W=>W.id.toString()):[])}})}),e.jsx(le,{children:"Colors & Size"}),e.jsx(le,{children:"Price"}),e.jsx(le,{children:"MRP"}),e.jsx(le,{children:"Inventory"}),e.jsx(le,{children:"SKU"}),e.jsx(le,{children:"Images"}),e.jsx(le,{style:{width:100},children:"Actions"})]})}),e.jsx(Ns,{children:u.map((f,W)=>e.jsxs(Fe,{children:[l&&e.jsx(se,{children:e.jsx(ks,{checked:k.includes(f.id.toString()),onCheckedChange:()=>R(f.id)})}),e.jsx(se,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[f.attributes.Color&&f.attributes.Color.startsWith("#")?e.jsx("div",{className:"w-5 h-5 rounded-full border",style:{backgroundColor:f.attributes.Color}}):e.jsx(J,{variant:"outline",children:f.color}),e.jsx(J,{children:f.size}),f.isDefault&&e.jsx(J,{variant:"secondary",children:"Default"})]})}),e.jsxs(se,{children:[e.jsx(L,{type:"text",inputMode:"decimal",className:"w-24",value:f.sellingPrice||"",onChange:X=>z(W,"sellingPrice",X.target.value),"aria-invalid":y[`variant_${W}_price`]?"true":void 0}),y[`variant_${W}_price`]&&e.jsx("p",{className:"text-xs text-destructive mt-1",children:y[`variant_${W}_price`]})]}),e.jsx(se,{children:e.jsx(L,{type:"text",inputMode:"decimal",className:"w-24",value:f.mrp||"",onChange:X=>z(W,"mrp",X.target.value)})}),e.jsxs(se,{children:[e.jsx(L,{type:"number",className:"w-20",value:f.inventoryQuantity,onChange:X=>z(W,"inventoryQuantity",parseInt(X.target.value)||0),"aria-invalid":y[`variant_${W}_inventory`]?"true":void 0}),y[`variant_${W}_inventory`]&&e.jsx("p",{className:"text-xs text-destructive mt-1",children:y[`variant_${W}_inventory`]})]}),e.jsx(se,{children:e.jsx(L,{className:"w-32",value:f.sku||"",onChange:X=>z(W,"sku",X.target.value)})}),e.jsx(se,{children:e.jsx("div",{className:"flex items-center gap-2",children:f.images&&f.images.length>0?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("img",{src:f.images[0],alt:`${f.color} ${f.size}`,className:"w-8 h-8 object-cover rounded border"}),f.images.length>1&&e.jsxs(J,{variant:"outline",children:["+",f.images.length-1]})]}):e.jsxs(p,{variant:"outline",size:"sm",className:"h-8 px-2",children:[e.jsx(fl,{className:"h-3.5 w-3.5 mr-1"}),"Upload"]})})}),e.jsx(se,{children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsxs(p,{variant:"ghost",size:"icon",onClick:()=>N(W),disabled:f.isDefault,title:"Set as default",children:[e.jsx("span",{className:"sr-only",children:"Set as default"}),f.isDefault?"★":"☆"]}),u.length>1&&e.jsxs(p,{variant:"ghost",size:"icon",onClick:()=>O(W),title:"Remove variant",children:[e.jsx(ps,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Remove"})]})]})})]},f.id.toString()))})]})})]})})]}),e.jsxs(qs,{className:"mt-6 flex items-center justify-between",children:[e.jsx(p,{variant:"outline",onClick:r,children:"Cancel"}),e.jsx(p,{onClick:Ne,disabled:u.length===0||U.isPending,children:U.isPending?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(st,{className:"mr-2 h-4 w-4"}),"Save Variants"]})})]})]})})},hc=s=>{const t=typeof s=="string"?parseFloat(s):s;return isNaN(t)?"₹0.00":`₹${t.toFixed(2)}`};function ei({productId:s,onSuccess:t,onCancel:a}){const[r,d]=h.useState(1),[n,x]=h.useState(!1),[m,u]=h.useState([]),[i,o]=h.useState([]),[c,l]=h.useState([]),[v,j]=h.useState(""),[g,k]=h.useState(""),b=Qe(),{toast:y}=me(),[,V]=Ge(),{user:S}=We(),$=!!s,U=ba.length,F=(S==null?void 0:S.role)==="vendor"?S.id:void 0,z=Pe({resolver:ke(ic),defaultValues:{name:"",description:"",status:"draft",categoryId:void 0,tags:[],sellingPrice:"0",purchasePrice:"",mrp:"",gst:"",sku:"",barcode:"",inventoryQuantity:"0",weight:"",length:"",width:"",height:"",featuredImageUrl:null,images:[],hasVariants:!1}}),O=z.watch("name"),N=z.watch("sellingPrice");z.watch("status");const R=z.watch("hasVariants");z.watch("featuredImageUrl");const{data:xe}=Z({queryKey:[`/api/vendors/${F}/product-categories`],enabled:!!F}),{data:ae,isLoading:Ne}=Z({queryKey:["/api/products",s],enabled:!!s}),{data:ye=[]}=Z({queryKey:["/api/products",s,"variants"],enabled:!!s});h.useEffect(()=>{var w,f,W,X,pe,vs,ys;ae&&$&&z.reset({name:ae.name||"",description:ae.description||"",status:ae.status||"draft",categoryId:(w=ae.categoryId)==null?void 0:w.toString(),tags:ae.tags||[],sellingPrice:((f=ae.sellingPrice)==null?void 0:f.toString())||"0",purchasePrice:((W=ae.purchasePrice)==null?void 0:W.toString())||"",mrp:((X=ae.mrp)==null?void 0:X.toString())||"",gst:((pe=ae.gst)==null?void 0:pe.toString())||"",sku:ae.sku||"",barcode:ae.barcode||"",inventoryQuantity:((vs=ae.inventoryQuantity)==null?void 0:vs.toString())||"0",weight:((ys=ae.weight)==null?void 0:ys.toString())||"",length:ae.dimensions&&ae.dimensions.split("x")[0]||"",width:ae.dimensions&&ae.dimensions.split("x")[1]||"",height:ae.dimensions&&ae.dimensions.split("x")[2]||"",featuredImageUrl:ae.featuredImageUrl||null,images:ae.images||[],hasVariants:ye.length>0})},[ae,$,z,ye]),h.useEffect(()=>{ye&&ye.length>0&&u(ye)},[ye]);const De=ne({mutationFn:async w=>{const f={...w,sellingPrice:parseFloat(w.sellingPrice),purchasePrice:w.purchasePrice?parseFloat(w.purchasePrice):null,mrp:w.mrp?parseFloat(w.mrp):null,gst:w.gst?parseFloat(w.gst):null,inventoryQuantity:w.inventoryQuantity?parseInt(w.inventoryQuantity):0,weight:w.weight?parseFloat(w.weight):null,dimensions:w.length||w.width||w.height?`${w.length||0}x${w.width||0}x${w.height||0}`:null,...$?{}:{vendorId:F}};return $?(await ee("PUT",`/api/products/${s}`,f)).json():(await ee("POST","/api/products",f)).json()},onSuccess:w=>{b.invalidateQueries({queryKey:["/api/products"]}),$&&b.invalidateQueries({queryKey:["/api/products",s]}),y({title:$?"Product updated":"Product created",description:$?"Your product has been updated successfully.":"Your product has been created successfully."}),t?t():$||V(`/products/${w.id}`)},onError:w=>{y({title:"Something went wrong",description:w instanceof Error?w.message:"Failed to save product",variant:"destructive"})}}),Je=w=>{De.mutate(w)},be=()=>{const w=z.getValues();w.name?De.mutate(w):y({title:"Cannot save yet",description:"Please provide at least a product name before saving.",variant:"destructive"})},we=()=>{r<U&&(d(r+1),window.scrollTo(0,0))},A=()=>{r>1&&(d(r-1),window.scrollTo(0,0))},ce=w=>{w>=1&&w<=U&&(d(w),window.scrollTo(0,0))};return Ne?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(oe,{className:"animate-spin h-8 w-8 text-muted-foreground"})}):e.jsxs("div",{className:"flex flex-col lg:flex-row h-full",children:[e.jsx(cc,{currentStep:r,steps:ba,onStepClick:ce,className:"w-64 flex-shrink-0"}),e.jsx("div",{className:"flex-1 max-w-3xl mx-auto px-6 py-8",children:e.jsx(Me,{...z,children:e.jsxs("form",{onSubmit:z.handleSubmit(Je),className:"space-y-8",children:[e.jsx("div",{className:"lg:hidden",children:e.jsxs(p,{type:"button",variant:"ghost",onClick:a,className:"mb-4",children:[e.jsx(bs,{className:"mr-2 h-4 w-4"}),"Back to Products"]})}),r===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Basic Information"}),e.jsx("p",{className:"text-muted-foreground",children:"Provide essential details about your product"})]}),e.jsx(P,{children:e.jsxs(D,{className:"pt-6 space-y-6",children:[e.jsx(K,{control:z.control,name:"name",render:({field:w})=>e.jsxs(q,{children:[e.jsxs(_,{className:"text-base font-medium",children:["Product Name ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(G,{children:e.jsx(L,{...w,placeholder:"Enter product name",className:"text-base py-6"})}),e.jsx(ie,{children:"A clear, specific name that helps customers find your product"}),e.jsx(Q,{})]})}),e.jsx(K,{control:z.control,name:"description",render:({field:w})=>e.jsxs(q,{children:[e.jsx(_,{className:"text-base font-medium",children:"Product Description"}),e.jsx(G,{children:e.jsx(ss,{...w,placeholder:"Describe your product in detail",className:"resize-y min-h-[150px]"})}),e.jsx(ie,{children:"Provide a detailed description of your product including key features and benefits"}),e.jsx(Q,{})]})}),e.jsx(K,{control:z.control,name:"status",render:({field:w})=>e.jsxs(q,{children:[e.jsx(_,{className:"text-base font-medium",children:"Product Status"}),e.jsxs($e,{value:w.value,onValueChange:w.onChange,children:[e.jsx(G,{children:e.jsx(Ae,{className:"text-base py-6",children:e.jsx(Oe,{placeholder:"Select product status"})})}),e.jsxs(Le,{children:[e.jsx(te,{value:"draft",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{variant:"outline",className:"bg-slate-100 text-slate-800",children:"Draft"}),e.jsx("span",{children:"Not visible to customers"})]})}),e.jsx(te,{value:"active",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{variant:"outline",className:"bg-green-100 text-green-800",children:"Active"}),e.jsx("span",{children:"Visible and available for purchase"})]})}),e.jsx(te,{value:"inactive",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{variant:"outline",className:"bg-amber-100 text-amber-800",children:"Inactive"}),e.jsx("span",{children:"Temporarily hidden from customers"})]})}),e.jsx(te,{value:"archived",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{variant:"outline",className:"bg-gray-100 text-gray-800",children:"Archived"}),e.jsx("span",{children:"Permanently hidden from customers"})]})})]})]}),e.jsx(ie,{children:"Control the visibility of this product in your store"}),e.jsx(Q,{})]})})]})}),e.jsx(As,{currentStep:r,totalSteps:U,onPrevious:A,onNext:we,onSave:be,isSaving:De.isPending,isNextDisabled:!O,isPreviousDisabled:!1})]}),r===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Category & Tags"}),e.jsx("p",{className:"text-muted-foreground",children:"Organize your product to help customers find it"})]}),e.jsx(P,{children:e.jsxs(D,{className:"pt-6 space-y-6",children:[e.jsx(K,{control:z.control,name:"categoryId",render:({field:w})=>e.jsxs(q,{children:[e.jsx(_,{className:"text-base font-medium",children:"Category"}),e.jsxs($e,{value:w.value,onValueChange:w.onChange,children:[e.jsx(G,{children:e.jsx(Ae,{className:"text-base py-6",children:e.jsx(Oe,{placeholder:"Select a category"})})}),e.jsx(Le,{children:xe==null?void 0:xe.map(f=>e.jsx(te,{value:f.id.toString(),children:f.name},f.id))})]}),e.jsx(ie,{children:"Assign this product to a category to help customers find it"}),e.jsx(Q,{})]})}),e.jsx(K,{control:z.control,name:"tags",render:({field:w})=>e.jsxs(q,{children:[e.jsx(G,{children:e.jsx(nc,{value:w.value,onChange:w.onChange})}),e.jsx(Q,{})]})})]})}),e.jsx(As,{currentStep:r,totalSteps:U,onPrevious:A,onNext:we,onSave:be,isSaving:De.isPending})]}),r===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Pricing Information"}),e.jsx("p",{className:"text-muted-foreground",children:"Set up your product's pricing details"})]}),e.jsx(P,{children:e.jsx(D,{className:"pt-6 space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(K,{control:z.control,name:"sellingPrice",render:({field:w})=>e.jsxs(q,{children:[e.jsxs(_,{className:"text-base font-medium",children:["Selling Price ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(G,{children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"₹"}),e.jsx(L,{...w,type:"text",inputMode:"decimal",className:"pl-8 text-base py-6",placeholder:"0.00"})]})}),e.jsx(ie,{children:"The price customers will pay for this product"}),e.jsx(Q,{})]})}),e.jsx(K,{control:z.control,name:"mrp",render:({field:w})=>e.jsxs(q,{children:[e.jsx(_,{className:"text-base font-medium",children:"MRP (Maximum Retail Price)"}),e.jsx(G,{children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"₹"}),e.jsx(L,{...w,type:"text",inputMode:"decimal",className:"pl-8 text-base py-6",placeholder:"0.00"})]})}),e.jsx(ie,{children:"The maximum retail price printed on the product"}),e.jsx(Q,{})]})}),e.jsx(K,{control:z.control,name:"purchasePrice",render:({field:w})=>e.jsxs(q,{children:[e.jsx(_,{className:"text-base font-medium",children:"Purchase Price"}),e.jsx(G,{children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"₹"}),e.jsx(L,{...w,type:"text",inputMode:"decimal",className:"pl-8 text-base py-6",placeholder:"0.00"})]})}),e.jsx(ie,{children:"Your cost to purchase or produce this product"}),e.jsx(Q,{})]})}),e.jsx(K,{control:z.control,name:"gst",render:({field:w})=>e.jsxs(q,{children:[e.jsx(_,{className:"text-base font-medium",children:"GST Percentage"}),e.jsx(G,{children:e.jsxs("div",{className:"relative",children:[e.jsx(L,{...w,type:"text",inputMode:"decimal",className:"text-base py-6",placeholder:"0"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"%"})]})}),e.jsx(ie,{children:"GST percentage applicable to this product"}),e.jsx(Q,{})]})})]})})}),e.jsx(As,{currentStep:r,totalSteps:U,onPrevious:A,onNext:we,onSave:be,isSaving:De.isPending,isNextDisabled:!N||N==="0"})]}),r===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Inventory & Specifications"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage stock levels and product details"})]}),e.jsx(P,{children:e.jsxs(D,{className:"pt-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(K,{control:z.control,name:"sku",render:({field:w})=>e.jsxs(q,{children:[e.jsx(_,{className:"text-base font-medium",children:"SKU (Stock Keeping Unit)"}),e.jsx(G,{children:e.jsx(L,{...w,className:"text-base py-6",placeholder:"Enter product SKU"})}),e.jsx(ie,{children:"A unique identifier for tracking your inventory"}),e.jsx(Q,{})]})}),e.jsx(K,{control:z.control,name:"barcode",render:({field:w})=>e.jsxs(q,{children:[e.jsx(_,{className:"text-base font-medium",children:"Barcode / UPC"}),e.jsx(G,{children:e.jsx(L,{...w,className:"text-base py-6",placeholder:"Enter product barcode"})}),e.jsx(ie,{children:"Universal Product Code or barcode number"}),e.jsx(Q,{})]})})]}),e.jsx(Ve,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(K,{control:z.control,name:"inventoryQuantity",render:({field:w})=>e.jsxs(q,{children:[e.jsx(_,{className:"text-base font-medium",children:"Inventory Quantity"}),e.jsx(G,{children:e.jsx(L,{...w,type:"text",inputMode:"numeric",className:"text-base py-6",placeholder:"0"})}),e.jsx(ie,{children:"Number of units available for sale"}),e.jsx(Q,{})]})}),e.jsx(K,{control:z.control,name:"weight",render:({field:w})=>e.jsxs(q,{children:[e.jsx(_,{className:"text-base font-medium",children:"Weight (kg)"}),e.jsx(G,{children:e.jsx(L,{...w,type:"text",inputMode:"decimal",className:"text-base py-6",placeholder:"0.0"})}),e.jsx(ie,{children:"Product weight in kilograms"}),e.jsx(Q,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(K,{control:z.control,name:"length",render:({field:w})=>e.jsxs(q,{children:[e.jsx(_,{className:"text-base font-medium",children:"Length (cm)"}),e.jsx(G,{children:e.jsx(L,{...w,type:"text",inputMode:"decimal",className:"text-base py-6",placeholder:"0.0"})}),e.jsx(Q,{})]})}),e.jsx(K,{control:z.control,name:"width",render:({field:w})=>e.jsxs(q,{children:[e.jsx(_,{className:"text-base font-medium",children:"Width (cm)"}),e.jsx(G,{children:e.jsx(L,{...w,type:"text",inputMode:"decimal",className:"text-base py-6",placeholder:"0.0"})}),e.jsx(Q,{})]})}),e.jsx(K,{control:z.control,name:"height",render:({field:w})=>e.jsxs(q,{children:[e.jsx(_,{className:"text-base font-medium",children:"Height (cm)"}),e.jsx(G,{children:e.jsx(L,{...w,type:"text",inputMode:"decimal",className:"text-base py-6",placeholder:"0.0"})}),e.jsx(Q,{})]})})]})]})}),e.jsx(As,{currentStep:r,totalSteps:U,onPrevious:A,onNext:we,onSave:be,isSaving:De.isPending})]}),r===5&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Product Images"}),e.jsx("p",{className:"text-muted-foreground",children:"Upload high-quality photos of your product"})]}),e.jsx(P,{children:e.jsx(D,{className:"pt-6",children:e.jsx(K,{control:z.control,name:"images",render:({field:w})=>e.jsxs(q,{children:[e.jsx(G,{children:e.jsx(lc,{value:w.value,onChange:w.onChange,featuredImage:z.watch("featuredImageUrl"),onFeaturedImageChange:f=>{z.setValue("featuredImageUrl",f)}})}),e.jsx(Q,{})]})})})}),e.jsx(As,{currentStep:r,totalSteps:U,onPrevious:A,onNext:we,onSave:be,isSaving:De.isPending})]}),r===6&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Product Variants"}),e.jsx("p",{className:"text-muted-foreground",children:"Define different versions of your product (e.g., size, color)"})]}),e.jsx(P,{children:e.jsxs(D,{className:"pt-6 space-y-6",children:[e.jsx(K,{control:z.control,name:"hasVariants",render:({field:w})=>e.jsxs(q,{className:"flex flex-row items-center justify-between p-3 border rounded-md",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{className:"text-base font-medium",children:"Enable Variants"}),e.jsx(ie,{children:"Create multiple versions of this product (like different colors, sizes, etc.)"})]}),e.jsx(G,{children:e.jsx(ds,{checked:w.value,onCheckedChange:w.onChange})})]})}),R?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsx("h3",{className:"text-base font-medium mb-2",children:"Product Variant Attributes"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Available Colors"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["Red","Blue","Green","Black","White","Yellow","Purple"].map(w=>e.jsxs(p,{type:"button",variant:i.includes(w)?"default":"outline",size:"sm",className:"flex items-center gap-1",onClick:()=>{i.includes(w)?o(i.filter(f=>f!==w)):o([...i,w])},children:[e.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:w==="Red"?"#e53935":w==="Blue"?"#1e88e5":w==="Green"?"#43a047":w==="Black"?"#212121":w==="White"?"#f5f5f5":w==="Yellow"?"#fdd835":w==="Purple"?"#8e24aa":"#9e9e9e"}}),w]},w))}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(L,{placeholder:"Add custom color...",className:"h-8 rounded-r-none",value:v,onChange:w=>j(w.target.value),onKeyDown:w=>{w.key==="Enter"&&v.trim()&&(w.preventDefault(),i.includes(v.trim())||(o([...i,v.trim()]),j("")))}}),e.jsx(p,{type:"button",size:"sm",className:"h-8 rounded-l-none",onClick:()=>{v.trim()&&!i.includes(v.trim())&&(o([...i,v.trim()]),j(""))},children:"Add"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Available Sizes"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["XS","S","M","L","XL","XXL"].map(w=>e.jsx(p,{type:"button",variant:c.includes(w)?"default":"outline",size:"sm",onClick:()=>{c.includes(w)?l(c.filter(f=>f!==w)):l([...c,w])},children:w},w))}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(L,{placeholder:"Add custom size...",className:"h-8 rounded-r-none",value:g,onChange:w=>k(w.target.value),onKeyDown:w=>{w.key==="Enter"&&g.trim()&&(w.preventDefault(),c.includes(g.trim())||(l([...c,g.trim()]),k("")))}}),e.jsx(p,{type:"button",size:"sm",className:"h-8 rounded-l-none",onClick:()=>{g.trim()&&!c.includes(g.trim())&&(l([...c,g.trim()]),k(""))},children:"Add"})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Preview: ",i.length," colors × ",c.length," sizes = ",i.length*c.length," possible variants"]}),i.length>0&&c.length>0?e.jsx("div",{className:"border rounded-md overflow-hidden max-h-36 overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted/50 sticky top-0",children:[e.jsx("th",{className:"px-2 py-1 text-left font-medium",children:"Color / Size"}),c.map(w=>e.jsx("th",{className:"px-2 py-1 text-center font-medium",children:w},w))]})}),e.jsx("tbody",{children:i.map((w,f)=>e.jsxs("tr",{className:f%2===0?"":"bg-muted/20",children:[e.jsxs("td",{className:"px-2 py-1 flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:w==="Red"?"#e53935":w==="Blue"?"#1e88e5":w==="Green"?"#43a047":w==="Black"?"#212121":w==="White"?"#f5f5f5":w==="Yellow"?"#fdd835":w==="Purple"?"#8e24aa":"#9e9e9e"}}),w]}),c.map(W=>e.jsx("td",{className:"px-2 py-1 text-center",children:e.jsx("span",{className:"inline-flex items-center justify-center w-4 h-4 rounded-full bg-primary/10 text-xs text-primary",children:"✓"})},`${w}-${W}`))]},w))})]})}):e.jsx("div",{className:"border rounded-md p-4 text-center text-muted-foreground",children:!i.length&&!c.length?e.jsx("p",{children:"Select at least one color and one size to preview variants"}):i.length?e.jsx("p",{children:"Select at least one size to preview variants"}):e.jsx("p",{children:"Select at least one color to preview variants"})})]}),s?e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(p,{type:"button",onClick:()=>x(!0),children:"Generate Variants"})}):e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"rounded-md bg-blue-50 p-3 border border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(qt,{className:"w-4 h-4 text-blue-500 mt-0.5"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Save this product first to generate all variants. Your variant selections will be preserved."})]})})})]}),e.jsx("div",{className:"rounded-md bg-primary/5 p-4 border border-primary/10",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(qt,{className:"w-5 h-5 text-primary mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:s?"Click the button above to generate variants using our matrix generator. The system will automatically create all combinations of colors and sizes.":"Save this product first, then you can create variants with different colors, sizes, and other attributes."}),e.jsx(p,{type:"button",className:"mt-3",onClick:()=>x(!0),disabled:!s,children:s?"Advanced Variant Options":"Save Product First"})]})]})}),n&&s&&e.jsx(xc,{product:{id:s,name:z.watch("name"),sku:z.watch("sku")||void 0,sellingPrice:z.watch("sellingPrice")||"0",gst:z.watch("gst")||void 0},initialAttributes:{colors:i,sizes:c},onClose:()=>{x(!1),b.invalidateQueries({queryKey:["/api/products",s,"variants"]})}}),s&&m.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-md bg-muted p-3",children:[e.jsx("div",{className:"font-medium mb-1",children:"Current Variants"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["You have ",m.length," variant",m.length!==1?"s":""," defined for this product."]})]}),e.jsx("div",{className:"border rounded-md overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium",children:"Variant"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium",children:"Price"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium",children:"Stock"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium",children:"SKU"})]})}),e.jsxs("tbody",{children:[m.slice(0,5).map((w,f)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[w.imageUrl&&e.jsx("div",{className:"w-8 h-8 rounded-md overflow-hidden flex-shrink-0",children:e.jsx("img",{src:w.imageUrl,alt:`${w.color} ${w.size}`,className:"w-full h-full object-cover"})}),e.jsxs("span",{children:[w.color,", ",w.size]})]})}),e.jsx("td",{className:"px-4 py-2",children:hc(w.sellingPrice)}),e.jsx("td",{className:"px-4 py-2",children:w.inventoryQuantity}),e.jsx("td",{className:"px-4 py-2",children:w.sku||"-"})]},f)),m.length>5&&e.jsx("tr",{className:"border-t",children:e.jsxs("td",{colSpan:4,className:"px-4 py-2 text-center text-sm text-muted-foreground",children:["+",m.length-5," more variants"]})})]})]})}),e.jsx(p,{type:"button",variant:"outline",onClick:()=>x(!0),children:"Manage Variants"})]}):s?e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 border rounded-md border-dashed",children:[e.jsx(Ps,{className:"h-12 w-12 text-muted-foreground/40 mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"No variants have been created yet"}),e.jsx(p,{type:"button",onClick:()=>x(!0),children:"Create Variants"})]}):null]}):e.jsx("div",{className:"rounded-md bg-muted p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(_e,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),e.jsx("div",{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your product is configured as a single product without variants. Enable variants if you need to sell this product in multiple versions."})})]})})]})}),e.jsx(As,{currentStep:r,totalSteps:U,onPrevious:A,onNext:we,onSave:be,isSaving:De.isPending,isLastStep:!0})]})]})})})]})}function wa({open:s,onOpenChange:t,productId:a,title:r="Add New Product"}){return e.jsx(Re,{open:s,onOpenChange:t,children:e.jsxs(Te,{className:"max-w-[95vw] h-[90vh] max-h-[90vh] p-0 overflow-hidden flex flex-col",children:[e.jsxs(ms,{className:"bg-primary-foreground p-6 border-b",children:[e.jsxs(p,{variant:"ghost",className:"absolute left-6 h-8 w-8 p-0 rounded-full",onClick:()=>t(!1),children:[e.jsx(bs,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),e.jsx(xs,{className:"text-center",children:r})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx(ei,{productId:a,onSuccess:()=>t(!1),onCancel:()=>t(!1)})})]})})}const uc=()=>{const{user:s}=We(),[t,a]=h.useState("");Ge();const[r,d]=h.useState(!1),[n,x]=h.useState(void 0),m=(s==null?void 0:s.role)==="vendor"?s.id:void 0,{data:u,isLoading:i}=Z({queryKey:m?[`/api/vendors/${m}/products`]:["/api/products"],enabled:!!s}),o=u==null?void 0:u.filter(c=>{var l;return c.name.toLowerCase().includes(t.toLowerCase())||((l=c.description)==null?void 0:l.toLowerCase().includes(t.toLowerCase()))});return e.jsxs(ue,{title:"Products",subtitle:"View your product catalog",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx(He,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(L,{placeholder:"Search products...",className:"pl-8 w-full",value:t,onChange:c=>a(c.target.value)})]}),e.jsx(je,{href:"/product-categories",children:e.jsxs(p,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(it,{className:"h-4 w-4"}),"Manage Categories"]})})]}),e.jsxs(p,{onClick:()=>d(!0),children:[e.jsx(Is,{className:"mr-2 h-4 w-4"}),"Add Product"]})]}),e.jsx(wa,{open:r,onOpenChange:d,title:"Add New Product"}),n&&e.jsx(wa,{open:!!n,onOpenChange:c=>{c||x(void 0)},productId:n,title:"Edit Product"}),i?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Array.from({length:6}).map((c,l)=>e.jsxs(P,{className:"shadow-sm",children:[e.jsx("div",{className:"w-full aspect-video bg-muted animate-pulse"}),e.jsxs(I,{className:"pb-2",children:[e.jsx("div",{className:"h-6 w-3/4 bg-muted animate-pulse rounded"}),e.jsx("div",{className:"h-4 w-1/2 bg-muted animate-pulse rounded mt-2"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"h-4 w-full bg-muted animate-pulse rounded mb-2"}),e.jsx("div",{className:"h-4 w-3/4 bg-muted animate-pulse rounded"})]})]},l))}):u!=null&&u.length?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o==null?void 0:o.map(c=>e.jsxs(P,{className:"overflow-hidden shadow-sm hover:shadow transition-shadow cursor-pointer group",onClick:()=>x(c.id),children:[c.imageUrl?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:c.imageUrl,alt:c.name,className:"w-full aspect-video object-cover group-hover:opacity-90 transition-opacity"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100",children:e.jsx(p,{size:"sm",variant:"secondary",className:"shadow-md",children:"Edit Product"})})]}):e.jsxs("div",{className:"w-full aspect-video bg-muted flex items-center justify-center relative",children:[e.jsx(Ps,{className:"h-12 w-12 text-muted-foreground/50"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100",children:e.jsx(p,{size:"sm",variant:"secondary",className:"shadow-md",children:"Edit Product"})})]}),e.jsxs(I,{className:"pb-2",children:[e.jsx(M,{className:"text-lg",children:c.name}),e.jsxs(re,{children:[c.inStock?e.jsx("span",{className:"text-green-600 font-medium",children:"In Stock"}):e.jsx("span",{className:"text-red-600 font-medium",children:"Out of Stock"})," • ","₹",typeof c.price=="string"?parseFloat(c.price).toFixed(2):c.price.toFixed(2)]})]}),e.jsx(D,{children:e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:c.description||"No description available"})})]},c.id))}):e.jsx(P,{className:"w-full",children:e.jsxs(D,{className:"py-16 flex flex-col items-center justify-center",children:[e.jsx(Ps,{className:"h-16 w-16 text-muted-foreground/30 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No products yet"}),e.jsx("p",{className:"text-muted-foreground text-center max-w-md mb-6",children:"Start building your product catalog by adding your first product."}),e.jsxs(p,{onClick:()=>d(!0),children:[e.jsx(Is,{className:"mr-2 h-4 w-4"}),"Add Your First Product"]})]})})]})},pc=({id:s})=>{const[,t]=Ge(),[a,r]=h.useState("general"),{toast:d}=me(),{user:n}=qe(),[x,m]=h.useState(null),[u,i]=h.useState(null),[o,c]=h.useState(null),{data:l,isLoading:v,error:j}=Z({queryKey:["/api/products",parseInt(s)],queryFn:()=>fetch(`/api/products/${s}`).then(U=>U.json()),refetchOnWindowFocus:!1});h.useEffect(()=>{var U;(U=l==null?void 0:l.colors)!=null&&U.length&&!x&&m(l.colors[0].hex)},[l,x]);const g=ne({mutationFn:async()=>{await ee("DELETE",`/api/products/${s}`)},onSuccess:()=>{Ce.invalidateQueries({queryKey:["/api/products"]}),d({title:"Product deleted",description:"Product has been deleted successfully"}),t("/products")},onError:U=>{d({title:"Error",description:U.message||"Failed to delete product",variant:"destructive"})}});if(v)return e.jsx(ue,{title:"Product Details",children:e.jsx("div",{className:"flex items-center justify-center min-h-[70vh]",children:e.jsx(oe,{className:"w-8 h-8 animate-spin text-primary"})})});if(j||!l)return e.jsx(ue,{title:"Product Not Found",children:e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[70vh] text-center",children:[e.jsx(Kt,{className:"w-16 h-16 text-destructive mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Product Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"The product you're looking for doesn't exist or has been removed."}),e.jsx(p,{onClick:()=>t("/products"),children:"Return to Products"})]})});const k=U=>{if(!U)return l.defaultImage;const F=l.colors.find(z=>z.hex===U);return(F==null?void 0:F.imageUrl)||l.defaultImage},b=()=>k(u||x),y=Ur(),V=()=>{var F;if(!x||!o){d({title:"Selection Required",description:"Please select both color and size before adding to cart.",variant:"destructive"});return}const U={productId:l.id,name:l.name,price:l.price||"0.00",quantity:1,imageUrl:k(x),variant:`${o} / ${((F=l.colors.find(z=>z.hex===x))==null?void 0:F.name)||x}`,colorHex:x,size:o,vendorId:l.vendorId||1};y.addToCart(U)},S=()=>{if(!n){d({title:"Not Signed In",description:"Please sign in to purchase products.",variant:"destructive"}),t("/signin");return}d({title:"Purchase Started",description:"Proceeding to checkout."})},$=({product:U,selectedColor:F,onColorChange:z,user:O})=>{const N=["S","M","L","XL","XXL"];return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex gap-4",children:U.colors.map(R=>e.jsx("button",{"aria-label":`Select color ${R.name}`,style:{backgroundColor:R.hex,border:F===R.hex?"3px solid #000":"1px solid #ccc"},className:"w-8 h-8 rounded-full",onClick:()=>z(R.hex),onMouseEnter:()=>i(R.hex),onMouseLeave:()=>i(null)},R.id))}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Size:"}),e.jsx("div",{className:"flex gap-2",children:N.map(R=>e.jsx("button",{className:`px-3 py-1 border rounded-md ${o===R?"border-black bg-black text-white":"border-gray-300 hover:border-gray-500"}`,onClick:()=>c(R),children:R},R))})]}),e.jsx("div",{children:e.jsx("img",{src:b(),alt:"Product in selected color",className:"w-64 h-64 object-contain border"})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(p,{onClick:V,children:"Add to Cart"}),e.jsx(p,{disabled:!O,onClick:S,children:"Buy Now"})]}),!O&&e.jsx("p",{className:"text-red-600 text-sm mt-2",children:"Please sign in to buy this product."})]})};return e.jsxs(ue,{title:`${l.name} | Product Details`,children:[e.jsx(mt,{children:e.jsx("title",{children:`${l.name} | Product Details`})}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{variant:"outline",size:"icon",onClick:()=>t("/products"),children:e.jsx(bs,{className:"h-4 w-4"})}),e.jsx("h1",{className:"text-2xl font-bold",children:l.name})]}),e.jsxs(hs,{children:[e.jsx(ia,{asChild:!0,children:e.jsxs(p,{variant:"destructive",children:[e.jsx(ze,{className:"h-4 w-4 mr-2"}),"Delete Product"]})}),e.jsxs(ts,{children:[e.jsxs(as,{children:[e.jsx(is,{children:"Are you absolutely sure?"}),e.jsx(ls,{children:"This action cannot be undone. This will permanently delete this product and remove it from our servers."})]}),e.jsxs(rs,{children:[e.jsx(cs,{children:"Cancel"}),e.jsx(ns,{onClick:()=>g.mutate(),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:g.isPending?e.jsx(oe,{className:"h-4 w-4 animate-spin"}):"Delete"})]})]})]})]}),e.jsxs(ve,{value:a,onValueChange:r,children:[e.jsxs(fe,{className:"mb-6",children:[e.jsx(B,{value:"general",children:"General Information"}),e.jsx(B,{value:"variants",children:"Variants"}),e.jsx(B,{value:"seo",children:"SEO & Meta"})]}),e.jsx(H,{value:"general",className:"space-y-6",children:e.jsx(ei,{productId:parseInt(s),onSuccess:()=>{d({title:"Success",description:"Product updated successfully"})}})}),e.jsx(H,{value:"variants",className:"space-y-6",children:e.jsx($,{product:l,selectedColor:x,onColorChange:m,user:n})}),e.jsx(H,{value:"seo",className:"space-y-6",children:e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"SEO Information"}),e.jsx(re,{children:"Optimize your product's visibility on search engines"})]}),e.jsx(D,{children:e.jsx("p",{className:"text-muted-foreground",children:"SEO settings will be implemented soon."})})]})})]})]})};function jc({onSuccess:s,onError:t,endpoint:a="upload",className:r,accept:d="image/*",maxFiles:n=1,maxSizeMB:x=5,buttonText:m="Upload File",showPreview:u=!0,multiple:i=!1}){const o=h.useRef(null),[c,l]=h.useState(null),[v,j]=h.useState([]),[g,k]=h.useState(null),{toast:b}=me(),y=ne({mutationFn:async O=>{const N=new FormData,R=a==="upload/product-image"?"image":"file";return N.append(R,O),(await ee("POST",`/api/s3/${a}`,N)).json()},onSuccess:O=>{s&&s(O),b({title:"Upload successful",description:"Your file has been uploaded successfully."})},onError:O=>{console.error("Upload error:",O),t&&t(O),b({title:"Upload failed",description:O.message||"Failed to upload the file. Please try again.",variant:"destructive"})}}),V=ne({mutationFn:async O=>{const N=new FormData;return O.forEach(xe=>{N.append("files",xe)}),(await ee("POST",`/api/s3/${a}`,N)).json()},onSuccess:O=>{s&&s(O);const N=v.length;b({title:"Upload successful",description:`${N} ${N===1?"file has":"files have"} been uploaded successfully.`}),j([]),l(null),k(null),o.current&&(o.current.value="")},onError:O=>{console.error("Upload error:",O),t&&t(O),b({title:"Upload failed",description:O.message||"Failed to upload files. Please try again.",variant:"destructive"})}}),S=O=>{const N=O.target.files;if(!(!N||N.length===0))if(i){const R=Array.from(N),xe=R.filter(Ne=>Ne.size>x*1024*1024);if(xe.length>0){b({title:"Files too large",description:`${xe.length} ${xe.length===1?"file exceeds":"files exceed"} the maximum size of ${x}MB.`,variant:"destructive"});return}j(R);const ae=R.find(Ne=>Ne.type.startsWith("image/"));if(ae&&u){const Ne=new FileReader;Ne.onloadend=()=>{k(Ne.result)},Ne.readAsDataURL(ae)}else k(null)}else{const R=N[0];if(R.size>x*1024*1024){b({title:"File too large",description:`Maximum file size is ${x}MB.`,variant:"destructive"});return}if(l(R),R.type.startsWith("image/")&&u){const xe=new FileReader;xe.onloadend=()=>{k(xe.result)},xe.readAsDataURL(R)}else k(null)}},$=()=>{i&&v.length>0?V.mutate(v):c&&y.mutate(c)},U=()=>{var O;(O=o.current)==null||O.click()},F=()=>{l(null),j([]),k(null),o.current&&(o.current.value="")},z=()=>c?c.type.startsWith("image/")?e.jsx(Rs,{className:"h-5 w-5 mr-2"}):e.jsx(vl,{className:"h-5 w-5 mr-2"}):null;return e.jsxs("div",{className:C("space-y-4",r),children:[e.jsx("input",{type:"file",ref:o,onChange:S,className:"hidden",accept:d,multiple:i}),!c&&v.length===0?e.jsxs(p,{type:"button",variant:"outline",onClick:U,className:"w-full border-dashed p-8 h-auto flex flex-col items-center justify-center",children:[e.jsx(rt,{className:"h-8 w-8 mb-2 text-muted-foreground"}),e.jsx("div",{className:"text-sm font-medium",children:m}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[d==="image/*"?"PNG, JPG, WEBP or GIF":"Select a file"," up to ",x,"MB"]})]}):e.jsxs("div",{className:"border rounded-md p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center",children:i&&v.length>0?e.jsxs(e.Fragment,{children:[e.jsx(Nl,{className:"h-5 w-5 mr-2 text-blue-500"}),e.jsxs("div",{className:"truncate max-w-xs",children:[e.jsxs("div",{className:"font-medium text-sm",children:[v.length," ",v.length===1?"file":"files"," selected"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[(v.reduce((O,N)=>O+N.size,0)/1024/1024).toFixed(2)," MB total"]})]})]}):c?e.jsxs(e.Fragment,{children:[z(),e.jsxs("div",{className:"truncate max-w-xs",children:[e.jsx("div",{className:"font-medium text-sm",children:c.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[(c.size/1024/1024).toFixed(2)," MB"]})]})]}):null}),e.jsx("button",{type:"button",onClick:F,className:"text-gray-500 hover:text-gray-700",children:e.jsx(ps,{className:"h-5 w-5"})})]}),g&&u&&e.jsx("div",{className:"mt-3 relative w-full h-40 overflow-hidden rounded-md",children:e.jsx("img",{src:g,alt:"Preview",className:"absolute inset-0 w-full h-full object-contain"})}),e.jsxs("div",{className:"mt-3 flex space-x-2",children:[e.jsx(p,{type:"button",onClick:$,disabled:y.isPending||V.isPending,className:"flex-1",children:y.isPending||V.isPending?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):y.isSuccess||V.isSuccess?e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"mr-2 h-4 w-4"}),"Uploaded"]}):"Upload"}),e.jsx(p,{type:"button",variant:"outline",onClick:U,disabled:y.isPending,children:"Change"})]})]})]})}const Hs=s=>s.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""),gc=()=>{var we;const{user:s}=We(),t=Qe(),{toast:a}=me(),[r,d]=Ge(),[n,x]=h.useState(""),[m,u]=h.useState(""),[i,o]=h.useState(!1),[c,l]=h.useState(!1),[v,j]=h.useState(!1),[g,k]=h.useState(null),[b,y]=h.useState({name:"",description:"",parentId:null,imageUrl:"",slug:"",isGlobal:!1}),V=(s==null?void 0:s.role)==="vendor"?s.id:void 0,{data:S=[],isLoading:$}=Z({queryKey:[`/api/vendors/${V}/product-categories`],enabled:!!V}),{data:U=[],isLoading:F}=Z({queryKey:["/api/global-product-categories"]}),z=h.useMemo(()=>[...S,...U],[S,U]),O=$||F,N=ne({mutationFn:async A=>{const ce=A.parentId?2:1,w=A.slug||Hs(A.name),f=!!A.isGlobal;return ee("POST","/api/product-categories",{...A,slug:w,vendorId:f?null:V,level:ce,isGlobal:f})},onSuccess:()=>{t.invalidateQueries({queryKey:[`/api/vendors/${V}/product-categories`]}),t.invalidateQueries({queryKey:["/api/global-product-categories"]}),o(!1),y({name:"",description:"",parentId:null,imageUrl:null,slug:null,isGlobal:!1}),a({title:"Category created",description:"Category has been created successfully"})},onError:A=>{a({title:"Error creating category",description:A.message,variant:"destructive"})}}),R=ne({mutationFn:async({id:A,data:ce})=>{const w=ce.parentId?2:1,f=ce.slug||Hs(ce.name),W=!!ce.isGlobal,X=W?null:V;return ee("PATCH",`/api/product-categories/${A}`,{...ce,slug:f,level:w,isGlobal:W,vendorId:X})},onSuccess:()=>{t.invalidateQueries({queryKey:[`/api/vendors/${V}/product-categories`]}),t.invalidateQueries({queryKey:["/api/global-product-categories"]}),o(!1),k(null),y({name:"",description:"",parentId:null,imageUrl:null,slug:null,isGlobal:!1}),a({title:"Category updated",description:"Category has been updated successfully"})},onError:A=>{a({title:"Error updating category",description:A.message,variant:"destructive"})}}),xe=ne({mutationFn:async A=>ee("DELETE",`/api/product-categories/${A}`),onSuccess:()=>{t.invalidateQueries({queryKey:[`/api/vendors/${V}/product-categories`]}),l(!1),k(null),a({title:"Category deleted",description:"Category has been deleted successfully"})},onError:A=>{a({title:"Error deleting category",description:A.message,variant:"destructive"})}}),ae=z==null?void 0:z.filter(A=>{var ce;return A.name.toLowerCase().includes(n.toLowerCase())||((ce=A.description)==null?void 0:ce.toLowerCase().includes(n.toLowerCase()))});h.useEffect(()=>{if(b.name){const A=Hs(b.name);y(ce=>({...ce,slug:A}))}},[b.name]);const Ne=A=>{y(ce=>({...ce,imageUrl:A})),a({title:"Image uploaded",description:"Category image has been uploaded successfully"})},ye=A=>{if(A.preventDefault(),!b.name.trim()){a({title:"Validation error",description:"Category name is required",variant:"destructive"});return}const ce={...b,slug:b.slug||Hs(b.name)};g?R.mutate({id:g.id,data:ce}):N.mutate(ce)},De=A=>{k(A),y({name:A.name,description:A.description||"",parentId:A.parentId||null,imageUrl:A.imageUrl||null,slug:A.slug||Hs(A.name),isGlobal:A.isGlobal||!1}),o(!0)},Je=A=>{k(A),l(!0)},be=A=>{d(`/products?category=${A}`)};return e.jsx(ue,{title:"Category Management",subtitle:"Manage your product categories and subcategories",children:e.jsxs(ve,{defaultValue:"categories",className:"w-full",children:[e.jsxs(fe,{className:"mb-6",children:[e.jsx(B,{value:"categories",children:"Categories"}),e.jsx(B,{value:"subcategories",children:"Subcategories"})]}),e.jsxs(H,{value:"categories",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx(He,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(L,{placeholder:"Search categories...",className:"pl-8 w-full",value:n,onChange:A=>x(A.target.value)})]}),e.jsx(je,{href:"/products",children:e.jsxs(p,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Ps,{className:"h-4 w-4"}),"Back to Products"]})})]}),e.jsxs(p,{onClick:()=>{k(null),y({name:"",description:"",parentId:null,imageUrl:null,slug:"",isGlobal:!1}),o(!0)},children:[e.jsx(Is,{className:"mr-2 h-4 w-4"}),"Add Category"]})]}),e.jsx(Re,{open:i,onOpenChange:o,children:e.jsxs(Te,{children:[e.jsxs(ms,{children:[e.jsx(xs,{children:g?"Edit Category":"Add New Category"}),e.jsx(js,{children:g?"Update your category details":"Create a new category for your products"})]}),e.jsxs("form",{onSubmit:ye,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Y,{htmlFor:"name",className:"required",children:"Name"}),e.jsx(L,{id:"name",placeholder:"Category name",value:b.name,onChange:A=>y({...b,name:A.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Y,{htmlFor:"description",children:"Description"}),e.jsx(L,{id:"description",placeholder:"Category description (optional)",value:b.description,onChange:A=>y({...b,description:A.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Y,{htmlFor:"parent",children:"Parent Category"}),e.jsxs($e,{value:((we=b.parentId)==null?void 0:we.toString())||"null",onValueChange:A=>y({...b,parentId:A!=="null"?parseInt(A):null}),children:[e.jsx(Ae,{children:e.jsx(Oe,{placeholder:"No parent (top-level category)"})}),e.jsxs(Le,{children:[e.jsx(te,{value:"null",children:"No parent (top-level category)"}),ae==null?void 0:ae.filter(A=>(A.level===1||A.level===void 0)&&(!g||A.id!==g.id)).map(A=>e.jsx(te,{value:A.id.toString(),children:A.name},A.id))]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Select a parent to make this a subcategory"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Y,{htmlFor:"image",children:"Category Image"}),b.imageUrl?e.jsxs("div",{className:"relative w-full h-40 bg-muted rounded-md overflow-hidden mb-2",children:[e.jsx("img",{src:b.imageUrl,alt:b.name||"Category image",className:"w-full h-full object-cover"}),e.jsx(p,{type:"button",size:"sm",variant:"destructive",className:"absolute top-2 right-2",onClick:()=>y({...b,imageUrl:null}),children:e.jsx(ze,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-md p-4 text-center",children:[e.jsx(Rs,{className:"h-10 w-10 mx-auto mb-2 text-muted-foreground/50"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Upload an image for this category"}),e.jsx(jc,{onSuccess:Ne,endpoint:"product-image",acceptedFileTypes:["image/jpeg","image/png","image/webp"],children:e.jsxs(p,{type:"button",variant:"outline",size:"sm",children:[e.jsx(rt,{className:"h-4 w-4 mr-2"}),"Upload Image"]})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Recommended size: 800x600px. Max size: 5MB."})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Y,{htmlFor:"slug",children:"SEO-Friendly URL"}),e.jsx(L,{id:"slug",placeholder:"category-slug",value:b.slug||"",onChange:A=>y({...b,slug:A.target.value})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Auto-generated from name. Edit if needed for better SEO."})]}),(s==null?void 0:s.role)==="admin"&&e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ks,{id:"isGlobal",checked:b.isGlobal,onCheckedChange:A=>y({...b,isGlobal:!!A,vendorId:A?null:V})}),e.jsxs(Y,{htmlFor:"isGlobal",className:"font-medium",children:["Global Category",e.jsx("span",{className:"ml-2 px-1.5 py-0.5 text-[10px] bg-blue-100 text-blue-800 rounded-full",children:"Admin Only"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground ml-6",children:"Global categories are available to all vendors in the platform and will display on all storefronts."})]})]}),e.jsx(qs,{children:e.jsxs(p,{type:"submit",disabled:N.isPending||R.isPending,children:[(N.isPending||R.isPending)&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),g?"Update Category":"Create Category"]})})]})]})}),e.jsx(hs,{open:c,onOpenChange:l,children:e.jsxs(ts,{children:[e.jsxs(as,{children:[e.jsx(is,{children:"Are you sure?"}),e.jsxs(ls,{children:['This will permanently delete the category "',g==null?void 0:g.name,'".',g!=null&&g.productCount?e.jsxs("div",{className:"mt-2 flex items-center text-amber-600",children:[e.jsx(_e,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{children:["This category contains ",g.productCount," products. They will not be deleted but will no longer be categorized."]})]}):null]})]}),e.jsxs(rs,{children:[e.jsx(cs,{children:"Cancel"}),e.jsxs(ns,{onClick:()=>g&&xe.mutate(g.id),className:"bg-red-600 hover:bg-red-700",children:[xe.isPending?e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):null,"Delete"]})]})]})}),O?e.jsx(P,{children:e.jsx(D,{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("svg",{className:"animate-spin h-8 w-8 text-primary",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})})})}):ae!=null&&ae.length?e.jsx(P,{children:e.jsx(D,{className:"p-0",children:e.jsxs(gs,{children:[e.jsx(fs,{children:e.jsxs(Fe,{children:[e.jsx(le,{className:"w-[250px]",children:"Name"}),e.jsx(le,{children:"Description"}),e.jsx(le,{children:"Image"}),e.jsx(le,{children:"Products"}),e.jsx(le,{className:"text-right",children:"Actions"})]})}),e.jsx(Ns,{children:ae==null?void 0:ae.filter(A=>!A.parentId).map(A=>e.jsxs(pt.Fragment,{children:[e.jsxs(Fe,{children:[e.jsx(se,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[A.name,A.isGlobal&&e.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-800 font-medium",children:"Global"})]})}),e.jsx(se,{children:A.description||"—"}),e.jsx(se,{children:A.imageUrl?e.jsx("div",{className:"h-10 w-10 bg-muted rounded-md overflow-hidden",children:e.jsx("img",{src:A.imageUrl,alt:A.name,className:"w-full h-full object-cover"})}):e.jsx("div",{className:"h-10 w-10 rounded-md bg-muted flex items-center justify-center",children:e.jsx(Rs,{className:"h-6 w-6 text-muted-foreground/50"})})}),e.jsx(se,{children:e.jsxs(p,{variant:"link",className:"p-0 h-auto",onClick:()=>be(A.id),children:[A.productCount||0," products"]})}),e.jsx(se,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsxs(p,{variant:"ghost",size:"sm",onClick:()=>De(A),children:[e.jsx(Zs,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Edit"})]}),e.jsxs(p,{variant:"ghost",size:"sm",onClick:()=>Je(A),children:[e.jsx(ze,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Delete"})]})]})})]}),ae==null?void 0:ae.filter(ce=>ce.parentId===A.id).map(ce=>e.jsxs(Fe,{className:"bg-muted/30",children:[e.jsx(se,{className:"font-medium pl-8",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 border-l-2 border-b-2 h-4 border-muted-foreground/30 mr-2"}),e.jsxs("div",{className:"flex items-center gap-2",children:[ce.name,ce.isGlobal&&e.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-800 font-medium",children:"Global"})]})]})}),e.jsx(se,{children:ce.description||"—"}),e.jsx(se,{children:ce.imageUrl?e.jsx("div",{className:"h-10 w-10 bg-muted rounded-md overflow-hidden",children:e.jsx("img",{src:ce.imageUrl,alt:ce.name,className:"w-full h-full object-cover"})}):e.jsx("div",{className:"h-10 w-10 rounded-md bg-muted flex items-center justify-center",children:e.jsx(Rs,{className:"h-6 w-6 text-muted-foreground/50"})})}),e.jsx(se,{children:e.jsxs(p,{variant:"link",className:"p-0 h-auto",onClick:()=>be(ce.id),children:[ce.productCount||0," products"]})}),e.jsx(se,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsxs(p,{variant:"ghost",size:"sm",onClick:()=>De(ce),children:[e.jsx(Zs,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Edit"})]}),e.jsxs(p,{variant:"ghost",size:"sm",onClick:()=>Je(ce),children:[e.jsx(ze,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Delete"})]})]})})]},ce.id))]},A.id))})]})})}):e.jsx(P,{className:"w-full",children:e.jsxs(D,{className:"py-16 flex flex-col items-center justify-center",children:[e.jsx(it,{className:"h-16 w-16 text-muted-foreground/30 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No categories yet"}),e.jsx("p",{className:"text-muted-foreground text-center max-w-md mb-6",children:"Start organizing your products by creating categories."}),e.jsxs(p,{onClick:()=>{k(null),y({name:"",description:"",parentId:null,imageUrl:null,slug:null}),o(!0)},children:[e.jsx(Is,{className:"mr-2 h-4 w-4"}),"Add Your First Category"]})]})})]}),e.jsxs(H,{value:"subcategories",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx(He,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(L,{placeholder:"Search subcategories...",className:"pl-8",value:m,onChange:A=>u(A.target.value)})]})}),e.jsxs(p,{onClick:()=>j(!0),children:[e.jsx(Is,{className:"h-4 w-4 mr-2"}),"Add Subcategory"]})]}),e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"Subcategories"}),e.jsx(re,{children:"These subcategories will be available for products in your store"})]}),e.jsx(D,{children:e.jsxs(gs,{children:[e.jsx(fs,{children:e.jsxs(Fe,{children:[e.jsx(le,{children:"Name"}),e.jsx(le,{children:"Parent Category"}),e.jsx(le,{children:"Description"}),e.jsx(le,{children:"Actions"})]})}),e.jsx(Ns,{children:z.filter(A=>A.parentId!==null&&(m===""||A.name.toLowerCase().includes(m.toLowerCase()))).map(A=>{var ce;return e.jsxs(Fe,{children:[e.jsx(se,{className:"font-medium",children:A.name}),e.jsx(se,{children:((ce=z.find(w=>w.id===A.parentId))==null?void 0:ce.name)||"Unknown"}),e.jsx(se,{children:A.description||"No description"}),e.jsx(se,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>De(A),children:e.jsx(Zs,{className:"h-4 w-4"})}),e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>Je(A.id),children:e.jsx(ze,{className:"h-4 w-4"})})]})})]},A.id)})})]})})]})]})]})})},fc=T.object({name:T.string().min(2,"Name must be at least 2 characters"),description:T.string().optional(),parentId:T.string().min(1,"Parent category is required"),isGlobal:T.boolean().optional().default(!1)}),Nc=()=>{const{user:s}=We(),{toast:t}=me(),a=Qe(),r=(s==null?void 0:s.role)==="vendor"?s.id:void 0,[d,n]=h.useState(!1),[x,m]=h.useState(!1),[u,i]=h.useState(!1),[o,c]=h.useState(null),{data:l=[]}=Z({queryKey:[`/api/vendors/${r}/product-categories`],enabled:!!r}),{data:v=[]}=Z({queryKey:["/api/global-categories"]}),j=[...l,...v],g=j.filter(N=>!N.parentId),k=j.filter(N=>N.parentId),b=Pe({resolver:ke(fc),defaultValues:{name:"",description:"",parentId:g.length>0?g[0].id.toString():"null",isGlobal:!1}}),y=()=>{b.reset({name:"",description:"",parentId:g.length>0?g[0].id.toString():"null",isGlobal:!1}),n(!0)},V=N=>{var R;c(N),b.reset({name:N.name,description:N.description||"",parentId:((R=N.parentId)==null?void 0:R.toString())||"null",isGlobal:N.isGlobal||!1}),m(!0)},S=N=>{c(N),i(!0)},$=ne({mutationFn:async N=>{const R={...N,parentId:parseInt(N.parentId),vendorId:N.isGlobal?null:r,isActive:!0},xe=N.isGlobal?"/api/global-categories":`/api/vendors/${r}/product-categories`;return await ee("POST",xe,R)},onSuccess:()=>{t({title:"Subcategory created",description:"The subcategory has been created successfully."}),n(!1),a.invalidateQueries({queryKey:[`/api/vendors/${r}/product-categories`]}),a.invalidateQueries({queryKey:["/api/global-categories"]})},onError:N=>{t({title:"Error",description:`Failed to create subcategory: ${N.message}`,variant:"destructive"})}}),U=ne({mutationFn:async N=>{if(!o)throw new Error("No category selected for update");const R={...N,parentId:parseInt(N.parentId),vendorId:N.isGlobal?null:r},xe=o.isGlobal||N.isGlobal?`/api/global-categories/${o.id}`:`/api/vendors/${r}/product-categories/${o.id}`;return await ee("PATCH",xe,R)},onSuccess:()=>{t({title:"Subcategory updated",description:"The subcategory has been updated successfully."}),m(!1),a.invalidateQueries({queryKey:[`/api/vendors/${r}/product-categories`]}),a.invalidateQueries({queryKey:["/api/global-categories"]})},onError:N=>{t({title:"Error",description:`Failed to update subcategory: ${N.message}`,variant:"destructive"})}}),F=ne({mutationFn:async()=>{if(!o)throw new Error("No category selected for deletion");const N=o.isGlobal?`/api/global-categories/${o.id}`:`/api/vendors/${r}/product-categories/${o.id}`;return await ee("DELETE",N)},onSuccess:()=>{t({title:"Subcategory deleted",description:"The subcategory has been deleted successfully."}),i(!1),a.invalidateQueries({queryKey:[`/api/vendors/${r}/product-categories`]}),a.invalidateQueries({queryKey:["/api/global-categories"]})},onError:N=>{t({title:"Error",description:`Failed to delete subcategory: ${N.message}`,variant:"destructive"})}}),z=N=>{x?U.mutate(N):$.mutate(N)},O=N=>{const R=j.find(xe=>xe.id===N);return R?R.name:"Unknown"};return e.jsxs(ue,{title:"Product Subcategories",children:[e.jsxs("div",{className:"container mx-auto py-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Product Subcategories"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage subcategories for organizing your products"})]}),e.jsxs(p,{onClick:y,children:[e.jsx(nt,{className:"mr-2 h-4 w-4"})," Add Subcategory"]})]}),e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"Subcategories"}),e.jsx(re,{children:"These subcategories will be available when adding or editing products"})]}),e.jsx(D,{children:e.jsxs(gs,{children:[e.jsx(Zr,{children:"List of subcategories for your store"}),e.jsx(fs,{children:e.jsxs(Fe,{children:[e.jsx(le,{children:"Name"}),e.jsx(le,{children:"Parent Category"}),e.jsx(le,{children:"Description"}),e.jsx(le,{className:"w-24",children:"Actions"})]})}),e.jsx(Ns,{children:k.length===0?e.jsx(Fe,{children:e.jsx(se,{colSpan:4,className:"text-center py-8 text-muted-foreground",children:"No subcategories found. Create your first subcategory to get started."})}):k.map(N=>{var R;return e.jsxs(Fe,{children:[e.jsx(se,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[N.name,N.isGlobal&&e.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-800 font-medium",children:"Global"})]})}),e.jsx(se,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[O(N.parentId),((R=j.find(xe=>xe.id===N.parentId))==null?void 0:R.isGlobal)&&e.jsx("span",{className:"px-1.5 py-0.5 text-[10px] rounded-full bg-blue-100 text-blue-800 font-medium",children:"Global"})]})}),e.jsx(se,{className:"max-w-md truncate",children:N.description||"-"}),e.jsx(se,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(p,{variant:"outline",size:"sm",onClick:()=>V(N),children:e.jsx(Ks,{className:"h-4 w-4"})}),e.jsx(p,{variant:"outline",size:"sm",onClick:()=>S(N),children:e.jsx(ze,{className:"h-4 w-4"})})]})})]},N.id)})})]})})]})]}),e.jsx(Re,{open:d,onOpenChange:n,children:e.jsxs(Te,{children:[e.jsxs(ms,{children:[e.jsx(xs,{children:"Add New Subcategory"}),e.jsx(js,{children:"Create a new subcategory for organizing your products"})]}),e.jsx(Me,{...b,children:e.jsxs("form",{onSubmit:b.handleSubmit(z),className:"space-y-4",children:[e.jsx(K,{control:b.control,name:"name",render:({field:N})=>e.jsxs(q,{children:[e.jsx(_,{children:"Name"}),e.jsx(G,{children:e.jsx(L,{placeholder:"Enter subcategory name",...N})}),e.jsx(Q,{})]})}),e.jsx(K,{control:b.control,name:"parentId",render:({field:N})=>e.jsxs(q,{children:[e.jsx(_,{children:"Parent Category"}),e.jsxs($e,{onValueChange:N.onChange,defaultValue:N.value,children:[e.jsx(G,{children:e.jsx(Ae,{children:e.jsx(Oe,{placeholder:"Select parent category"})})}),e.jsx(Le,{children:g.map(R=>e.jsxs(te,{value:R.id.toString(),children:[R.name,R.isGlobal&&" (Global)"]},R.id))})]}),e.jsx(ie,{children:"This is the main category this subcategory belongs to"}),e.jsx(Q,{})]})}),e.jsx(K,{control:b.control,name:"description",render:({field:N})=>e.jsxs(q,{children:[e.jsx(_,{children:"Description"}),e.jsx(G,{children:e.jsx(ss,{placeholder:"Enter subcategory description (optional)",...N})}),e.jsx(Q,{})]})}),(s==null?void 0:s.role)==="admin"&&e.jsx(K,{control:b.control,name:"isGlobal",render:({field:N})=>e.jsxs(q,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(G,{children:e.jsx(ks,{checked:N.value,onCheckedChange:N.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:"Global Category"}),e.jsx(ie,{children:"Make this subcategory available to all vendors on the platform"})]})]})}),e.jsx(qs,{children:e.jsx(p,{type:"submit",disabled:$.isPending,children:$.isPending?"Creating...":"Create Subcategory"})})]})})]})}),e.jsx(Re,{open:x,onOpenChange:m,children:e.jsxs(Te,{children:[e.jsxs(ms,{children:[e.jsx(xs,{children:"Edit Subcategory"}),e.jsx(js,{children:"Make changes to the subcategory"})]}),e.jsx(Me,{...b,children:e.jsxs("form",{onSubmit:b.handleSubmit(z),className:"space-y-4",children:[e.jsx(K,{control:b.control,name:"name",render:({field:N})=>e.jsxs(q,{children:[e.jsx(_,{children:"Name"}),e.jsx(G,{children:e.jsx(L,{placeholder:"Enter subcategory name",...N})}),e.jsx(Q,{})]})}),e.jsx(K,{control:b.control,name:"parentId",render:({field:N})=>e.jsxs(q,{children:[e.jsx(_,{children:"Parent Category"}),e.jsxs($e,{onValueChange:N.onChange,defaultValue:N.value,children:[e.jsx(G,{children:e.jsx(Ae,{children:e.jsx(Oe,{placeholder:"Select parent category"})})}),e.jsx(Le,{children:g.map(R=>e.jsxs(te,{value:R.id.toString(),children:[R.name,R.isGlobal&&" (Global)"]},R.id))})]}),e.jsx(ie,{children:"This is the main category this subcategory belongs to"}),e.jsx(Q,{})]})}),e.jsx(K,{control:b.control,name:"description",render:({field:N})=>e.jsxs(q,{children:[e.jsx(_,{children:"Description"}),e.jsx(G,{children:e.jsx(ss,{placeholder:"Enter subcategory description (optional)",...N})}),e.jsx(Q,{})]})}),(s==null?void 0:s.role)==="admin"&&e.jsx(K,{control:b.control,name:"isGlobal",render:({field:N})=>e.jsxs(q,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(G,{children:e.jsx(ks,{checked:N.value,onCheckedChange:N.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:"Global Category"}),e.jsx(ie,{children:"Make this subcategory available to all vendors on the platform"})]})]})}),e.jsx(qs,{children:e.jsx(p,{type:"submit",disabled:U.isPending,children:U.isPending?"Saving...":"Save Changes"})})]})})]})}),e.jsx(hs,{open:u,onOpenChange:i,children:e.jsxs(ts,{children:[e.jsxs(as,{children:[e.jsx(is,{children:"Are you sure?"}),e.jsx(ls,{children:"This will permanently delete the subcategory. Products in this subcategory will not be deleted, but they may need to be recategorized."})]}),e.jsxs(rs,{children:[e.jsx(cs,{children:"Cancel"}),e.jsx(ns,{onClick:()=>F.mutate(),className:"bg-red-600 hover:bg-red-700",disabled:F.isPending,children:F.isPending?"Deleting...":"Delete"})]})]})})]})},vc=()=>{const{user:s}=We(),[t,a]=h.useState(""),[r,d]=h.useState("all"),[n,x]=h.useState("desc"),m=(s==null?void 0:s.role)==="vendor"?s.id:void 0,{data:u,isLoading:i}=Z({queryKey:[`/api/vendors/${m}/orders`],enabled:!!m}),o=u?u.filter(l=>{var v;return(r==="all"||l.status===r)&&(t===""||l.orderNumber.toLowerCase().includes(t.toLowerCase())||((v=l.customer)==null?void 0:v.email.toLowerCase().includes(t.toLowerCase())))}).sort((l,v)=>{const j=new Date(l.createdAt).getTime(),g=new Date(v.createdAt).getTime();return n==="asc"?j-g:g-j}):[],c=l=>{switch(l){case"completed":return"success";case"processing":return"warning";case"shipped":return"secondary";case"canceled":return"destructive";default:return"outline"}};return e.jsx(ue,{title:"Orders",subtitle:"Manage customer orders",children:e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx(M,{children:"All Orders"}),e.jsx(re,{children:"View and manage all customer orders"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>x(n==="asc"?"desc":"asc"),children:[e.jsx(Nt,{className:"mr-2 h-4 w-4"}),"Date",e.jsx(yl,{className:"ml-2 h-4 w-4"})]}),e.jsxs($e,{value:r,onValueChange:d,children:[e.jsx(Ae,{className:"w-[160px]",children:e.jsx(Oe,{placeholder:"Filter by status"})}),e.jsxs(Le,{children:[e.jsx(te,{value:"all",children:"All Statuses"}),e.jsx(te,{value:"processing",children:"Processing"}),e.jsx(te,{value:"shipped",children:"Shipped"}),e.jsx(te,{value:"completed",children:"Completed"}),e.jsx(te,{value:"canceled",children:"Canceled"})]})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(He,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(L,{placeholder:"Search by order number or customer email...",className:"pl-8",value:t,onChange:l=>a(l.target.value)})]})]}),e.jsx(D,{children:i?e.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((l,v)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-md animate-pulse",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-muted"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 w-24 bg-muted rounded"}),e.jsx("div",{className:"h-3 w-32 bg-muted rounded"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-6 w-16 bg-muted rounded-full"}),e.jsx("div",{className:"h-4 w-20 bg-muted rounded"})]})]},v))}):o.length>0?e.jsxs("div",{className:"space-y-4",children:[o.map(l=>{var v;return e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-4 border rounded-md hover:bg-muted/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-muted w-10 h-10 rounded-full flex items-center justify-center",children:e.jsx(os,{className:"h-5 w-5 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium",children:["Order #",l.orderNumber]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[$s(l.createdAt)," • ",((v=l.customer)==null?void 0:v.email)||"Guest customer"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 sm:mt-0",children:[e.jsx(J,{variant:c(l.status),children:l.status.charAt(0).toUpperCase()+l.status.slice(1)}),e.jsx("span",{className:"text-sm font-medium",children:_t(l.total)}),e.jsx(p,{variant:"ghost",size:"sm",children:"View"})]})]},l.id)}),e.jsxs("div",{className:"py-4 text-center text-sm text-muted-foreground",children:["Showing ",o.length," of ",u.length," orders"]})]}):e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(os,{className:"mx-auto h-12 w-12 text-muted-foreground/30"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No orders found"}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:t||r!=="all"?"Try adjusting your search or filter to find what you're looking for.":"When customers place orders, they will appear here."})]})})]})})},yc=()=>{We();const{activeVendor:s}=Fs(),{toast:t}=me(),a=[{id:1,firstName:"Alex",lastName:"Johnson",email:"alex.johnson@example.com",phone:"+1 (555) 123-4567",status:"active",totalOrders:5,totalSpent:450.75,lastOrder:"2023-04-15"},{id:2,firstName:"Samantha",lastName:"Williams",email:"samantha.w@example.com",phone:"+1 (555) 987-6543",status:"inactive",totalOrders:2,totalSpent:129.99,lastOrder:"2023-02-28"},{id:3,firstName:"Michael",lastName:"Brown",email:"michael.brown@example.com",phone:"+1 (555) 456-7890",status:"active",totalOrders:8,totalSpent:789.5,lastOrder:"2023-04-29"}],r=()=>{t({title:"Feature Coming Soon",description:"Adding new customers will be available in a future update."})};return e.jsxs(ue,{title:"Customers",subtitle:"Manage your customer information",children:[e.jsx(mt,{children:e.jsxs("title",{children:["Customers | ",(s==null?void 0:s.companyName)||"MultiVend"]})}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Customers"}),e.jsxs(p,{onClick:r,children:[e.jsx(Fr,{className:"mr-2 h-4 w-4"}),"Add Customer"]})]}),e.jsxs(P,{children:[e.jsxs(I,{className:"pb-2",children:[e.jsx(M,{children:"Customer Management"}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"flex items-center w-full max-w-sm relative",children:[e.jsx(He,{className:"absolute left-2.5 h-4 w-4 text-gray-500"}),e.jsx(L,{type:"search",placeholder:"Search customers...",className:"pl-9 w-full"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{className:"bg-green-100 text-green-800 hover:bg-green-200",children:"Active: 2"}),e.jsx(J,{className:"bg-gray-100 text-gray-800 hover:bg-gray-200",children:"Inactive: 1"}),e.jsx(J,{className:"bg-blue-100 text-blue-800 hover:bg-blue-200",children:"Total: 3"})]})]})]}),e.jsx(D,{children:e.jsxs(gs,{children:[e.jsx(fs,{children:e.jsxs(Fe,{children:[e.jsx(le,{children:"Name"}),e.jsx(le,{children:"Email"}),e.jsx(le,{children:"Phone"}),e.jsx(le,{children:"Status"}),e.jsx(le,{children:"Orders"}),e.jsx(le,{children:"Total Spent"}),e.jsx(le,{children:"Last Order"}),e.jsx(le,{className:"text-right",children:"Actions"})]})}),e.jsx(Ns,{children:a.map(d=>e.jsxs(Fe,{children:[e.jsxs(se,{className:"font-medium",children:[d.firstName," ",d.lastName]}),e.jsx(se,{children:d.email}),e.jsx(se,{children:d.phone}),e.jsx(se,{children:e.jsxs(J,{className:d.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:[d.status==="active"?e.jsx(bl,{className:"h-3.5 w-3.5 mr-1"}):e.jsx(wl,{className:"h-3.5 w-3.5 mr-1"}),d.status]})}),e.jsx(se,{children:d.totalOrders}),e.jsxs(se,{children:["₹",d.totalSpent.toFixed(2)]}),e.jsx(se,{children:new Date(d.lastOrder).toLocaleDateString()}),e.jsx(se,{className:"text-right",children:e.jsxs(sa,{children:[e.jsx(ta,{asChild:!0,children:e.jsxs(p,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Cl,{className:"h-4 w-4"})]})}),e.jsxs(Lt,{align:"end",children:[e.jsx(aa,{children:"Actions"}),e.jsx(es,{children:"View details"}),e.jsx(es,{children:"Edit customer"}),e.jsx(vt,{}),e.jsx(es,{className:"text-red-600",children:"Delete customer"})]})]})})]},d.id))})]})})]})]})},bc=[{id:"default",name:"Minimal",description:"Clean, modern design with a focus on simplicity",thumbnail:"/assets/themes/default-thumb.jpg"},{id:"elegant",name:"Elegant",description:"Sophisticated design with subtle animations",thumbnail:"/assets/themes/elegant-thumb.jpg"},{id:"bold",name:"Bold",description:"Strong visuals with high-contrast elements",thumbnail:"/assets/themes/bold-thumb.jpg"},{id:"vintage",name:"Vintage",description:"Retro styling with a nostalgic feel",thumbnail:"/assets/themes/vintage-thumb.jpg"},{id:"modern",name:"Modern",description:"Contemporary design with cutting-edge features",thumbnail:"/assets/themes/modern-thumb.jpg"}],wc=({value:s,onChange:t})=>{const[a,r]=h.useState(s||"default");h.useEffect(()=>{r(s)},[s]);const d=n=>{r(n),t(n)};return e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-5",children:bc.map(n=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:C("aspect-video relative rounded-md cursor-pointer overflow-hidden border-2 transition-all",a===n.id?"border-primary ring-2 ring-primary/20":"border-border hover:border-primary/50"),onClick:()=>d(n.id),children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-black/40",children:e.jsx("div",{className:"h-full w-full bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center text-sm text-gray-500 uppercase font-medium",children:n.name})}),a===n.id&&e.jsx("div",{className:"absolute top-2 right-2 bg-primary text-primary-foreground rounded-full p-1",children:e.jsx(Ke,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(Y,{htmlFor:`theme-${n.id}`,className:C("text-sm font-medium block cursor-pointer",a===n.id?"text-primary":"text-foreground"),children:n.name}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:n.description})]})]},n.id))})})},Ls=[{id:"default",name:"Default",colors:{primary:"#4f46e5",secondary:"#8b5cf6",accent:"#f97316",background:"#ffffff",text:"#171717"}},{id:"ocean",name:"Ocean",colors:{primary:"#0891b2",secondary:"#0ea5e9",accent:"#14b8a6",background:"#f8fafc",text:"#0f172a"}},{id:"forest",name:"Forest",colors:{primary:"#15803d",secondary:"#059669",accent:"#ca8a04",background:"#f8fafc",text:"#1e293b"}},{id:"sunset",name:"Sunset",colors:{primary:"#db2777",secondary:"#e11d48",accent:"#f59e0b",background:"#ffffff",text:"#171717"}},{id:"monochrome",name:"Monochrome",colors:{primary:"#404040",secondary:"#525252",accent:"#737373",background:"#fafafa",text:"#171717"}},{id:"custom",name:"Custom",colors:{primary:"#4f46e5",secondary:"#8b5cf6",accent:"#f97316",background:"#ffffff",text:"#171717"}}],Cc=({value:s,onChange:t,customColors:a})=>{const[r,d]=h.useState(s||"default"),[n,x]=h.useState({});h.useEffect(()=>{const i=Ls.find(o=>o.id===s)||Ls[0];i.id==="custom"&&a?x(a):x(i.colors),d(i.id)},[s,a]);const m=i=>{d(i);const o=Ls.find(c=>c.id===i)||Ls[0];x(o.colors),t(i,o.colors)},u=()=>{var i;return((i=Ls.find(o=>o.id===r))==null?void 0:i.name)||"Default"};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium",children:"Color Palette"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Select a predefined color scheme for your store"})]}),e.jsxs(Ct,{children:[e.jsx(St,{asChild:!0,children:e.jsxs(p,{variant:"outline",size:"sm",className:"gap-2",children:[u(),e.jsx(Ss,{className:"h-4 w-4"})]})}),e.jsx(ct,{className:"w-52 p-0",align:"end",children:e.jsx("div",{className:"space-y-1 p-1",children:Ls.map(i=>e.jsxs(p,{variant:"ghost",className:C("w-full justify-between pl-2 pr-1 py-1 h-8",{"bg-accent text-accent-foreground":r===i.id}),onClick:()=>m(i.id),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:i.colors.primary}}),e.jsx("span",{className:"text-sm",children:i.name})]}),r===i.id&&e.jsx(Ke,{className:"h-4 w-4"})]},i.id))})})]})]}),e.jsx("div",{className:"grid grid-cols-5 gap-2 py-2",children:Object.entries(n).map(([i,o])=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full border shadow-sm mb-1",style:{backgroundColor:o}}),e.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:i})]},i))}),r==="custom"&&e.jsxs("div",{className:"bg-accent/10 rounded p-3 text-sm",children:[e.jsx("p",{className:"font-medium mb-1",children:"Custom Palette"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"To customize individual colors, use the advanced CSS options in the next tab."})]})]})},Qt=h.forwardRef(({className:s,...t},a)=>e.jsx(Ue,{ref:a,className:C("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",s),...t}));Qt.displayName=Ue.displayName;const Wt=h.forwardRef(({className:s,...t},a)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(He,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(Ue.Input,{ref:a,className:C("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),...t})]}));Wt.displayName=Ue.Input.displayName;const Sc=h.forwardRef(({className:s,...t},a)=>e.jsx(Ue.List,{ref:a,className:C("max-h-[300px] overflow-y-auto overflow-x-hidden",s),...t}));Sc.displayName=Ue.List.displayName;const Yt=h.forwardRef((s,t)=>e.jsx(Ue.Empty,{ref:t,className:"py-6 text-center text-sm",...s}));Yt.displayName=Ue.Empty.displayName;const Ht=h.forwardRef(({className:s,...t},a)=>e.jsx(Ue.Group,{ref:a,className:C("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",s),...t}));Ht.displayName=Ue.Group.displayName;const Pc=h.forwardRef(({className:s,...t},a)=>e.jsx(Ue.Separator,{ref:a,className:C("-mx-1 h-px bg-border",s),...t}));Pc.displayName=Ue.Separator.displayName;const Jt=h.forwardRef(({className:s,...t},a)=>e.jsx(Ue.Item,{ref:a,className:C("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s),...t}));Jt.displayName=Ue.Item.displayName;const si=h.forwardRef(({className:s,...t},a)=>e.jsxs(Dr,{ref:a,className:C("relative flex w-full touch-none select-none items-center",s),...t,children:[e.jsx(Sl,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(Pl,{className:"absolute h-full bg-primary"})}),e.jsx(kl,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));si.displayName=Dr.displayName;const ht=[{value:"inter",label:"Inter",previewText:"The quick brown fox jumps over the lazy dog"},{value:"roboto",label:"Roboto",previewText:"The quick brown fox jumps over the lazy dog"},{value:"poppins",label:"Poppins",previewText:"The quick brown fox jumps over the lazy dog"},{value:"lato",label:"Lato",previewText:"The quick brown fox jumps over the lazy dog"},{value:"montserrat",label:"Montserrat",previewText:"The quick brown fox jumps over the lazy dog"},{value:"open-sans",label:"Open Sans",previewText:"The quick brown fox jumps over the lazy dog"},{value:"playfair-display",label:"Playfair Display",previewText:"The quick brown fox jumps over the lazy dog"},{value:"nunito",label:"Nunito",previewText:"The quick brown fox jumps over the lazy dog"},{value:"raleway",label:"Raleway",previewText:"The quick brown fox jumps over the lazy dog"},{value:"oswald",label:"Oswald",previewText:"The quick brown fox jumps over the lazy dog"}],kc=({value:s,onChange:t})=>{var o;const[a,r]=h.useState(!1),[d,n]=h.useState(!1),[x,m]=h.useState({headingFont:"inter",bodyFont:"inter",fontSize:16,useCustomFonts:!1});h.useEffect(()=>{s&&m(s)},[s]);const u=c=>{const l={...x,...c};m(l),t(l)},i=c=>{var l;return((l=ht.find(v=>v.value===c))==null?void 0:l.label)||c};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-1",children:"Typography"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Customize the fonts used throughout your store"})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"heading-font",children:"Heading Font"}),e.jsxs(Ct,{open:a,onOpenChange:r,children:[e.jsx(St,{asChild:!0,children:e.jsxs(p,{variant:"outline",role:"combobox","aria-expanded":a,className:"w-full justify-between",children:[i(x.headingFont),e.jsx(Ss,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(ct,{className:"w-full p-0",children:e.jsxs(Qt,{children:[e.jsx(Wt,{placeholder:"Search fonts..."}),e.jsx(Yt,{children:"No font found."}),e.jsx(Ht,{className:"max-h-64 overflow-auto",children:ht.map(c=>e.jsxs(Jt,{onSelect:()=>{u({headingFont:c.value}),r(!1)},children:[e.jsx(Ke,{className:C("mr-2 h-4 w-4",x.headingFont===c.value?"opacity-100":"opacity-0")}),e.jsx("span",{className:"flex-1",children:c.label})]},c.value))})]})})]}),e.jsx("div",{className:"text-center p-3 border rounded-md bg-muted/30",children:e.jsx("p",{className:"text-lg",style:{fontFamily:`var(--font-${x.headingFont}, sans-serif)`},children:"Heading Text Preview"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"body-font",children:"Body Font"}),e.jsxs(Ct,{open:d,onOpenChange:n,children:[e.jsx(St,{asChild:!0,children:e.jsxs(p,{variant:"outline",role:"combobox","aria-expanded":d,className:"w-full justify-between",children:[i(x.bodyFont),e.jsx(Ss,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(ct,{className:"w-full p-0",children:e.jsxs(Qt,{children:[e.jsx(Wt,{placeholder:"Search fonts..."}),e.jsx(Yt,{children:"No font found."}),e.jsx(Ht,{className:"max-h-64 overflow-auto",children:ht.map(c=>e.jsxs(Jt,{onSelect:()=>{u({bodyFont:c.value}),n(!1)},children:[e.jsx(Ke,{className:C("mr-2 h-4 w-4",x.bodyFont===c.value?"opacity-100":"opacity-0")}),e.jsx("span",{className:"flex-1",children:c.label})]},c.value))})]})})]}),e.jsx("div",{className:"text-center p-3 border rounded-md bg-muted/30",children:e.jsx("p",{style:{fontFamily:`var(--font-${x.bodyFont}, sans-serif)`,fontSize:`${x.fontSize}px`},children:((o=ht.find(c=>c.value===x.bodyFont))==null?void 0:o.previewText)||"The quick brown fox jumps over the lazy dog"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(Y,{htmlFor:"font-size",children:"Base Font Size"}),e.jsxs("span",{className:"text-sm",children:[x.fontSize,"px"]})]}),e.jsx(si,{id:"font-size",min:12,max:20,step:1,value:[x.fontSize],onValueChange:([c])=>u({fontSize:c}),className:"my-2"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"Small"}),e.jsx("span",{children:"Medium"}),e.jsx("span",{children:"Large"})]})]}),e.jsxs("div",{className:"flex items-center justify-between space-x-2 rounded-md border p-3 shadow-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Custom Fonts"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Use custom web fonts (requires CSS knowledge)"})]}),e.jsx(ds,{checked:x.useCustomFonts,onCheckedChange:c=>u({useCustomFonts:c})})]}),x.useCustomFonts&&e.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-4 rounded",children:e.jsxs("p",{className:"text-amber-800 text-sm",children:[e.jsx("strong",{children:"Note:"})," You'll need to add custom font CSS in the Advanced tab to use custom fonts. Include the @font-face definitions and specify the font family names in CSS."]})})]})]})},Fc=({themeName:s,colorPalette:t="default",fontSettings:a,vendorId:r})=>{const[d,n]=h.useState(!0);h.useEffect(()=>{n(!0);const o=setTimeout(()=>{n(!1)},500);return()=>clearTimeout(o)},[s,t,a]);const x=()=>{switch(s){case"elegant":return{fontFamily:"serif",cardRadius:"0.25rem",borderWidth:"1px",buttonRadius:"0.25rem"};case"bold":return{fontFamily:"sans-serif",cardRadius:"0.75rem",borderWidth:"2px",buttonRadius:"0.5rem"};case"vintage":return{fontFamily:"serif",cardRadius:"0",borderWidth:"1px",buttonRadius:"0"};case"modern":return{fontFamily:"sans-serif",cardRadius:"1rem",borderWidth:"1px",buttonRadius:"2rem"};case"default":default:return{fontFamily:"sans-serif",cardRadius:"0.5rem",borderWidth:"1px",buttonRadius:"0.5rem"}}},m=()=>{switch(t){case"ocean":return{primaryColor:"#0891b2",secondaryColor:"#0ea5e9",accentColor:"#14b8a6",bgColor:"#f8fafc",textColor:"#0f172a"};case"forest":return{primaryColor:"#15803d",secondaryColor:"#059669",accentColor:"#ca8a04",bgColor:"#f8fafc",textColor:"#1e293b"};case"sunset":return{primaryColor:"#db2777",secondaryColor:"#e11d48",accentColor:"#f59e0b",bgColor:"#ffffff",textColor:"#171717"};case"monochrome":return{primaryColor:"#404040",secondaryColor:"#525252",accentColor:"#737373",bgColor:"#fafafa",textColor:"#171717"};case"default":default:return{primaryColor:"#4f46e5",secondaryColor:"#8b5cf6",accentColor:"#f97316",bgColor:"#ffffff",textColor:"#171717"}}},i=(()=>{const o=x(),c=m(),l=a!=null&&a.headingFont?`var(--font-${a.headingFont}, ${o.fontFamily})`:o.fontFamily,v=(a==null?void 0:a.fontSize)||16;return{...o,...c,fontFamily:l,fontSize:`${v}px`}})();return d?e.jsx(P,{className:"border h-full flex items-center justify-center",children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx(oe,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading theme preview..."})]})})}):e.jsx(P,{className:"border overflow-hidden",children:e.jsx(D,{className:"p-0",children:e.jsxs("div",{className:"relative h-[500px] overflow-hidden",style:{backgroundColor:i.bgColor,color:i.textColor,fontFamily:i.fontFamily,fontSize:i.fontSize},children:[e.jsxs("div",{className:"absolute top-2 right-2 bg-white/90 px-2 py-1 rounded-md text-xs border shadow-sm",children:[e.jsxs("div",{className:"font-semibold",children:["Theme: ",s]}),e.jsxs("div",{children:["Palette: ",t]}),a&&e.jsxs("div",{children:["Font: ",a.headingFont||"Default"]})]}),e.jsxs("div",{className:"border-b p-3 flex justify-between items-center",style:{borderColor:`${i.primaryColor}20`},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ya,{className:"h-5 w-5"}),e.jsx("span",{className:"text-lg font-bold",style:{color:i.primaryColor},children:"YourStore"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(He,{className:"h-4 w-4"}),e.jsx(os,{className:"h-4 w-4",style:{color:i.secondaryColor}}),e.jsx(Gt,{className:"h-4 w-4"})]})]}),e.jsxs("div",{className:"border-b py-2 px-3 flex gap-4",style:{borderColor:`${i.primaryColor}20`},children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium",children:[e.jsx(Fl,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:"Home"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium",style:{color:i.primaryColor},children:[e.jsx(Ie,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:"Shop"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(Dl,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:"Categories"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(Tl,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:"Wishlist"})]})]}),e.jsxs("div",{className:"p-4 text-center py-8",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",style:{color:i.primaryColor},children:"Summer Collection"}),e.jsx("p",{className:"text-sm mb-4 max-w-xs mx-auto",children:"Discover our latest products with amazing discounts for the summer season."}),e.jsx("button",{className:"text-sm py-1.5 px-4",style:{backgroundColor:i.primaryColor,color:"white",borderRadius:i.buttonRadius,border:`${i.borderWidth} solid ${i.primaryColor}`},children:"Shop Now"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3 p-3",children:[1,2,3,4].map(o=>e.jsxs("div",{className:"border overflow-hidden",style:{borderColor:`${i.primaryColor}10`,borderRadius:i.cardRadius,borderWidth:i.borderWidth},children:[e.jsx("div",{className:"aspect-square bg-gray-100 flex items-center justify-center",children:e.jsx(Ie,{className:"h-10 w-10 text-gray-300"})}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("div",{className:"text-sm font-medium truncate",children:"Product Name"}),e.jsx("div",{className:"text-sm font-bold",style:{color:i.primaryColor},children:"$99"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Category"}),o===2&&e.jsx(J,{variant:"outline",className:"text-[10px] h-4",style:{borderColor:o%2===0?i.primaryColor:i.secondaryColor,color:o%2===0?i.primaryColor:i.secondaryColor,borderRadius:i.buttonRadius},children:"Sale"}),o===3&&e.jsx(J,{variant:"outline",className:"text-[10px] h-4",style:{borderColor:i.accentColor,color:i.accentColor,borderRadius:i.buttonRadius},children:"New"})]})]})]},o))}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 text-center p-3 text-xs border-t text-muted-foreground",style:{borderColor:`${i.primaryColor}20`},children:"© 2025 YourStore. All rights reserved."})]})})})},Dc=T.object({storeTheme:T.string().min(1,"Please select a theme"),customCss:T.string().optional(),logoUrl:T.string().url("Please enter a valid URL").optional().or(T.literal("")),companyName:T.string().min(2,"Company name must be at least 2 characters"),description:T.string().optional(),colorPalette:T.string().default("default"),fontSettings:T.object({headingFont:T.string().default("inter"),bodyFont:T.string().default("inter"),fontSize:T.number().min(12).max(20).default(16),useCustomFonts:T.boolean().default(!1),customHeadingFont:T.string().optional(),customBodyFont:T.string().optional()}).optional().default({headingFont:"inter",bodyFont:"inter",fontSize:16,useCustomFonts:!1})}),Ot=()=>{const{toast:s}=me(),t=Qe(),{user:a}=qe(),[r,d]=h.useState("theme"),n=(a==null?void 0:a.role)==="vendor"?a.id:void 0,{data:x,isLoading:m}=Z({queryKey:["/api/vendors",n],enabled:!!n}),u=Pe({resolver:ke(Dc),defaultValues:{storeTheme:"default",customCss:"",logoUrl:"",companyName:"",description:"",colorPalette:"default",fontSettings:{headingFont:"inter",bodyFont:"inter",fontSize:16,useCustomFonts:!1}}});h.useEffect(()=>{x&&u.reset({storeTheme:x.storeTheme||"default",customCss:x.customCss||"",logoUrl:x.logoUrl||"",companyName:x.companyName,description:x.description||"",colorPalette:x.colorPalette||"default",fontSettings:x.fontSettings||{headingFont:"inter",bodyFont:"inter",fontSize:16,useCustomFonts:!1}})},[x,u]);const i=ne({mutationFn:async c=>{n&&await ee("PATCH",`/api/vendors/${n}`,{storeTheme:c.storeTheme,customCss:c.customCss,logoUrl:c.logoUrl,companyName:c.companyName,description:c.description,colorPalette:c.colorPalette,fontSettings:c.fontSettings})},onSuccess:()=>{s({title:"Store design updated",description:"Your store design has been updated successfully."}),t.invalidateQueries({queryKey:["/api/vendors",n]})},onError:c=>{s({title:"Error",description:`Failed to update store design: ${c.message}`,variant:"destructive"})}}),o=c=>{i.mutate(c)};return m?e.jsx(P,{children:e.jsx(D,{className:"pt-6",children:e.jsx("div",{className:"flex items-center justify-center p-6",children:e.jsx(oe,{className:"h-8 w-8 animate-spin text-primary"})})})}):e.jsxs(P,{children:[e.jsx(I,{children:e.jsx(M,{children:"Store Design"})}),e.jsx(D,{children:e.jsx(Me,{...u,children:e.jsx("form",{onSubmit:u.handleSubmit(o),className:"space-y-6",children:e.jsxs(ve,{defaultValue:"theme",value:r,onValueChange:d,children:[e.jsxs(fe,{className:"grid w-full grid-cols-3",children:[e.jsx(B,{value:"theme",children:"Theme"}),e.jsx(B,{value:"branding",children:"Branding"}),e.jsx(B,{value:"advanced",children:"Advanced"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs(H,{value:"theme",className:"space-y-8",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(K,{control:u.control,name:"storeTheme",render:({field:c})=>e.jsxs(q,{children:[e.jsx(_,{children:"Store Theme"}),e.jsx(wc,{value:c.value,onChange:c.onChange}),e.jsx(ie,{children:"Choose a theme for your store's frontend appearance"}),e.jsx(Q,{})]})}),e.jsx(K,{control:u.control,name:"colorPalette",render:({field:c})=>e.jsxs(q,{children:[e.jsx(Cc,{value:c.value,onChange:(l,v)=>{c.onChange(l)}}),e.jsx(Q,{})]})}),e.jsx(K,{control:u.control,name:"fontSettings",render:({field:c})=>e.jsxs(q,{children:[e.jsx(kc,{value:c.value,onChange:l=>{c.onChange(l)}}),e.jsx(Q,{})]})})]}),e.jsx("div",{children:e.jsx(Fc,{themeName:u.watch("storeTheme"),colorPalette:u.watch("colorPalette"),fontSettings:u.watch("fontSettings"),vendorId:n})})]}),e.jsx("div",{className:"flex justify-end space-x-2",children:e.jsx(p,{type:"button",variant:"outline",onClick:()=>d("branding"),children:"Next: Branding"})})]}),e.jsxs(H,{value:"branding",className:"space-y-6",children:[e.jsx(K,{control:u.control,name:"logoUrl",render:({field:c})=>e.jsxs(q,{children:[e.jsx(_,{children:"Store Logo URL"}),e.jsx(G,{children:e.jsx(L,{placeholder:"https://example.com/logo.png",...c})}),e.jsx(ie,{children:"Enter the URL of your store logo image"}),e.jsx(Q,{})]})}),e.jsx(K,{control:u.control,name:"companyName",render:({field:c})=>e.jsxs(q,{children:[e.jsx(_,{children:"Store/Company Name"}),e.jsx(G,{children:e.jsx(L,{placeholder:"Your Store Name",...c})}),e.jsx(ie,{children:"This will appear in your store header and footer"}),e.jsx(Q,{})]})}),e.jsx(K,{control:u.control,name:"description",render:({field:c})=>e.jsxs(q,{children:[e.jsx(_,{children:"Store Description"}),e.jsx(G,{children:e.jsx(ss,{placeholder:"Describe your store in a few sentences",className:"min-h-[100px]",...c})}),e.jsx(ie,{children:"This will be used for SEO and may appear in your store footer"}),e.jsx(Q,{})]})}),e.jsxs("div",{className:"flex justify-between space-x-2",children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>d("theme"),children:"Back: Theme"}),e.jsx(p,{type:"button",variant:"outline",onClick:()=>d("advanced"),children:"Next: Advanced"})]})]}),e.jsxs(H,{value:"advanced",className:"space-y-6",children:[e.jsx(K,{control:u.control,name:"customCss",render:({field:c})=>e.jsxs(q,{children:[e.jsx(_,{children:"Custom CSS"}),e.jsx(G,{children:e.jsx(ss,{placeholder:".my-custom-class { color: #ff0000; }",className:"min-h-[200px] font-mono",...c})}),e.jsx(ie,{children:"Add custom CSS to further customize your store's appearance"}),e.jsx(Q,{})]})}),e.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-4 rounded",children:e.jsxs("p",{className:"text-amber-800 text-sm",children:[e.jsx("strong",{children:"Note:"})," Custom CSS is an advanced feature. Incorrect CSS may break your store's layout or functionality."]})}),e.jsxs("div",{className:"flex justify-between space-x-2",children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>d("branding"),children:"Back: Branding"}),e.jsxs(p,{type:"submit",disabled:i.isPending,children:[i.isPending&&e.jsx(oe,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})]})]})]})})})})]})},Tc=()=>{const{user:s}=qe(),[t,a]=h.useState("theme");Z({queryKey:["/api/vendors",s==null?void 0:s.id],enabled:!!s&&s.role==="vendor"}),h.useEffect(()=>{const d=window.location.hash.replace("#","");d&&["theme","branding","settings"].includes(d)&&a(d)},[]);const r=d=>{a(d),window.location.hash=d};return e.jsx(ue,{title:"Store Design",subtitle:"Customize your store's appearance",children:e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"Store Appearance"}),e.jsx(re,{children:"Customize your store's theme, branding, and appearance"})]}),e.jsx(D,{children:e.jsxs(ve,{value:t,onValueChange:r,className:"space-y-6",children:[e.jsxs(fe,{className:"grid w-full grid-cols-3 h-auto mb-6",children:[e.jsx(B,{value:"theme",children:"Theme"}),e.jsx(B,{value:"branding",children:"Branding"}),e.jsx(B,{value:"settings",children:"Advanced Settings"})]}),e.jsx(H,{value:"theme",children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Store Theme"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Select a theme that best represents your store. Each theme comes with unique layouts, colors, and visual styles."}),e.jsx(Ve,{className:"my-6"}),e.jsx(Ot,{})]})})}),e.jsx(H,{value:"branding",children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Store Branding"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Customize your store's brand identity including logo, colors, and typography."}),e.jsx(Ve,{className:"my-6"}),e.jsx(Ot,{})]})})}),e.jsx(H,{value:"settings",children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Advanced Settings"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Fine-tune your store with advanced customization options including custom CSS and JavaScript."}),e.jsx(Ve,{className:"my-6"}),e.jsx(Ot,{})]})})})]})})]})})};function ti({vendorId:s,className:t}){const[a]=Ge(),[r,d]=h.useState(null),{data:n=[],isLoading:x}=Z({queryKey:[`/api/vendors/${s}/product-categories`],enabled:!!s}),{data:m=[],isLoading:u}=Z({queryKey:["/api/global-product-categories"]}),i=[...n,...m],o=x||u,c=i.filter(k=>!k.parentId),l=k=>i.filter(b=>b.parentId===k),v=k=>i.some(b=>b.parentId===k),j=k=>{v(k)&&d(k)},g=()=>{d(null)};return o?e.jsx("div",{className:C("flex items-center gap-4 py-2 overflow-x-auto scrollbar-hide",t),children:Array(5).fill(0).map((k,b)=>e.jsx("div",{className:"h-4 w-20 bg-gray-200 rounded animate-pulse"},b))}):e.jsx("nav",{className:C("relative",t),children:e.jsx("div",{className:"flex items-center gap-4 py-2 overflow-x-auto scrollbar-hide",children:c.map(k=>e.jsxs("div",{className:"relative",onMouseEnter:()=>j(k.id),onMouseLeave:g,children:[v(k.id)?e.jsxs("button",{className:"text-gray-700 hover:text-indigo-600 font-medium px-3 py-2 text-sm whitespace-nowrap flex items-center gap-1",children:[k.name,k.isGlobal&&e.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-[10px] font-medium bg-blue-100 text-blue-800 rounded-full",children:"Global"}),e.jsx(Ss,{className:"h-4 w-4"})]}):e.jsxs(je,{href:`/category/${k.slug}`,className:C("text-gray-700 hover:text-indigo-600 font-medium px-3 py-2 text-sm whitespace-nowrap inline-flex items-center",a===`/category/${k.slug}`&&"text-indigo-600"),children:[k.name,k.isGlobal&&e.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-[10px] font-medium bg-blue-100 text-blue-800 rounded-full",children:"Global"})]}),r===k.id&&v(k.id)&&e.jsx("div",{className:"absolute top-full left-0 mt-1 z-50 bg-white shadow-lg rounded-md py-2 min-w-[180px]",children:l(k.id).map(b=>e.jsxs(je,{href:`/category/${b.slug}`,className:C("block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-indigo-600 flex items-center",a===`/category/${b.slug}`&&"text-indigo-600 bg-gray-50"),children:[b.name,b.isGlobal&&e.jsx("span",{className:"ml-auto px-1.5 py-0.5 text-[10px] font-medium bg-blue-100 text-blue-800 rounded-full",children:"Global"})]},b.id))})]},k.id))})})}function Ca(){var c;const{isVendorStore:s,vendor:t,domain:a,loading:r,error:d}=Fs(),{user:n,isAuthenticated:x,logoutMutation:m}=qe(),{data:u=[],isLoading:i,error:o}=Z({queryKey:t?[`/api/vendors/${t.id}/products`]:[],queryFn:t?async()=>{const l=await fetch(`/api/vendors/${t.id}/products?storefront=true`);if(!l.ok)throw new Error("Failed to fetch products");return l.json()}:void 0,enabled:!!s&&!!t});return r?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(oe,{className:"h-8 w-8 animate-spin text-primary"})}):d?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-600",children:d})]}):s?e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("header",{className:"store-header text-white py-6",style:{background:`var(--color-primary, ${(t==null?void 0:t.storeTheme)==="default"?"linear-gradient(to right, #4f46e5, #3b82f6)":"var(--color-primary)"})`},children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[t!=null&&t.logoUrl?e.jsx("img",{src:t.logoUrl,alt:`${t.companyName} logo`,className:"w-10 h-10 object-contain"}):e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xl font-bold",children:t==null?void 0:t.companyName.charAt(0)})}),e.jsx("h1",{className:"text-2xl font-bold",children:t==null?void 0:t.companyName})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("button",{className:"text-white hover:text-white/80 transition-colors",children:e.jsx(os,{className:"h-5 w-5"})}),x&&n?e.jsxs(sa,{children:[e.jsx(ta,{asChild:!0,children:e.jsxs("button",{className:"flex items-center space-x-2 text-white hover:text-white/80 transition-colors",children:[n.avatarUrl?e.jsx("img",{src:n.avatarUrl,alt:`${n.firstName||n.email}`,className:"h-8 w-8 rounded-full object-cover border-2 border-white"}):e.jsx("div",{className:"h-8 w-8 rounded-full bg-white/20 flex items-center justify-center text-white",children:((c=n.firstName)==null?void 0:c.charAt(0))||n.email.charAt(0).toUpperCase()}),e.jsx("span",{className:"hidden md:inline",children:n.firstName||"My Account"})]})}),e.jsxs(Lt,{align:"end",className:"w-56",children:[e.jsxs(es,{children:[e.jsx(Gt,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Profile"})]}),e.jsxs(es,{children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"My Orders"})]}),e.jsxs(es,{onClick:()=>m.mutate(),children:[e.jsx(Oa,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Logout"})]})]})]}):e.jsx(je,{href:"/buyer-login",className:"text-white hover:text-white/80 transition-colors",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Gt,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Login"})]})}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"opacity-80",children:"Powered by"})," ",e.jsx("a",{href:"https://multivend.com",className:"font-semibold underline",children:"MultiVend"})]})]})]})})}),e.jsx("div",{className:"border-b border-gray-200 bg-white shadow-sm sticky top-0 z-10",children:e.jsx("div",{className:"container mx-auto px-4",children:t&&e.jsx("div",{className:"relative",children:e.jsx(ti,{vendorId:t.id,className:"py-2"})})})}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[e.jsxs("section",{children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6",children:["Welcome to ",t==null?void 0:t.companyName]}),e.jsxs("p",{className:"text-gray-600 max-w-3xl",children:["This is a vendor storefront accessed through a custom domain: ",e.jsx("strong",{children:a==null?void 0:a.name}),". The store has its own branding, products, and theme based on the vendor's settings."]})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Products"}),e.jsx("a",{href:"#",className:"text-primary hover:underline",children:"View all"})]}),i?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(oe,{className:"h-8 w-8 animate-spin text-primary"})}):u.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:u.map(l=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"aspect-square bg-gray-100 relative",children:[l.imageUrl?e.jsx("img",{src:l.imageUrl,alt:l.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(Ie,{className:"h-12 w-12 text-gray-300"})}),l.compareAtPrice&&e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx("span",{className:"bg-accent text-accent-foreground text-xs font-bold px-2 py-1 rounded",children:"SALE"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2 truncate",children:l.name}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("span",{style:{color:"var(--color-primary)"},className:"font-bold",children:["$",l.price]}),l.compareAtPrice&&e.jsxs("span",{className:"text-sm text-gray-500 line-through ml-2",children:["$",l.compareAtPrice]})]}),e.jsx(p,{size:"sm",variant:"outline",className:"rounded-full p-2",children:e.jsx(os,{className:"h-4 w-4"})})]})]})]},l.id))}):e.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-gray-500",children:"No products available yet"})})]})]})}),e.jsx("footer",{className:"bg-gray-100 py-8 mt-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:t==null?void 0:t.companyName}),e.jsxs("p",{className:"text-gray-600",children:["Custom domain: ",a==null?void 0:a.name]}),e.jsxs("p",{className:"text-gray-600",children:["Theme: ",(t==null?void 0:t.storeTheme)||"Default"]}),e.jsxs("p",{className:"text-gray-600",children:["Color palette: ",(t==null?void 0:t.colorPalette)||"Default"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-600 hover:text-primary",style:{"&:hover":{color:"var(--color-primary)"}},children:"Products"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-600 hover:text-primary",style:{"&:hover":{color:"var(--color-primary)"}},children:"Categories"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-600 hover:text-primary",style:{"&:hover":{color:"var(--color-primary)"}},children:"About Us"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-600 hover:text-primary",style:{"&:hover":{color:"var(--color-primary)"}},children:"Contact"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Connect With Us"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"#",className:"text-gray-600 hover:text-primary",style:{"&:hover":{color:"var(--color-primary)"}},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsx("a",{href:"#",className:"text-gray-600 hover:text-primary",style:{"&:hover":{color:"var(--color-primary)"}},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("a",{href:"#",className:"text-gray-600 hover:text-primary",style:{"&:hover":{color:"var(--color-primary)"}},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})]})]})]}),e.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-200 text-center text-gray-500 text-sm",children:[e.jsxs("p",{children:["© ",new Date().getFullYear()," ",t==null?void 0:t.companyName,". All rights reserved."]}),e.jsxs("p",{className:"mt-2",children:["Powered by ",e.jsx("a",{href:"https://multivend.com",style:{color:"var(--color-primary)"},className:"hover:underline",children:"MultiVend"})]})]})]})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Welcome to MultiVend"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"This is the platform homepage. Vendor stores are accessed through their own domains."}),e.jsx("a",{href:"https://multivend.com/vendors",className:"bg-primary text-white px-4 py-2 rounded hover:bg-primary/90 transition-colors",children:"Browse Vendors"})]})}function Ac(){const{slug:s}=vr(),{vendor:t,loading:a}=Fs(),{data:r,isLoading:d,error:n}=Z({queryKey:t&&s?[`/api/category/${s}`]:[],queryFn:t&&s?async()=>{const i=await fetch(`/api/category/${s}`);if(!i.ok)throw new Error("Failed to fetch category data");return i.json()}:void 0,enabled:!!t&&!!s}),x=r==null?void 0:r.category,m=(r==null?void 0:r.subcategories)||[],u=(r==null?void 0:r.products)||[];return a||d?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(oe,{className:"h-8 w-8 animate-spin text-primary"})}):n||!x?e.jsx("div",{className:"min-h-screen bg-white",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-4",children:"Category Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The category you are looking for doesn't exist or has been removed."}),e.jsxs(je,{href:"/",className:"text-primary hover:underline flex items-center gap-2",children:[e.jsx(bs,{className:"h-4 w-4"}),"Back to Home"]})]})})}):e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("div",{className:"border-b border-gray-200 bg-white shadow-sm sticky top-0 z-10",children:e.jsx("div",{className:"container mx-auto px-4",children:t&&e.jsx("div",{className:"relative",children:e.jsx(ti,{vendorId:t.id,className:"py-2"})})})}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold",children:x.name}),x.isGlobal&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:"Global Category"})]}),x.description&&e.jsx("p",{className:"text-gray-600",children:x.description})]}),m.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Subcategories"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:m.map(i=>e.jsx(je,{href:`/category/${i.slug}`,className:"block",children:e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-indigo-500 hover:shadow-sm transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:i.name}),i.isGlobal&&e.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-blue-100 text-blue-800 rounded-full",children:"Global"})]})})},i.id))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Products"}),u.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:u.map(i=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"aspect-square bg-gray-100 relative",children:[i.imageUrl?e.jsx("img",{src:i.imageUrl,alt:i.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(Ie,{className:"h-12 w-12 text-gray-300"})}),i.compareAtPrice&&e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx("span",{className:"bg-accent text-accent-foreground text-xs font-bold px-2 py-1 rounded",children:"SALE"})}),x.isGlobal&&i.vendorId===null&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:"Global"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-2",children:i.name}),e.jsxs("div",{className:"flex items-end",children:[e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["₹",i.price]}),i.compareAtPrice&&e.jsxs("span",{className:"ml-2 text-sm text-gray-500 line-through",children:["₹",i.compareAtPrice]})]}),e.jsx(p,{className:"w-full mt-3 text-sm",size:"sm",children:"Add to Cart"})]})]},i.id))}):e.jsxs("div",{className:"py-12 text-center border border-dashed border-gray-200 rounded-lg",children:[e.jsx(Ie,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No Products Found"}),e.jsx("p",{className:"text-gray-500",children:x.isGlobal?"This global category doesn't have any products for your store yet.":"There are no products in this category at the moment."})]})]})]})]})}const Lc=({title:s,description:t,action:a})=>e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:s}),t&&e.jsx("p",{className:"text-muted-foreground",children:t})]}),a&&e.jsx("div",{children:a})]}),Ec=({methods:s,vendorId:t})=>{const{toast:a}=me(),[r,d]=h.useState(null),n={credit_card:"Credit Card",cash:"Cash",bank_transfer:"Bank Transfer",paypal:"PayPal",cod:"Cash on Delivery",crypto:"Cryptocurrency",other:"Other"},x=ne({mutationFn:async({id:i,isActive:o})=>{const c=await fetch(`/api/vendors/${t}/payment-methods/${i}/toggle-status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:o})});if(!c.ok){const l=await c.json();throw new Error(l.message||"Failed to update payment method status")}return await c.json()},onSuccess:()=>{a({title:"Status updated",description:"The payment method status has been updated."}),Ce.invalidateQueries({queryKey:["/api/vendors",t,"payment-methods"]})},onError:i=>{a({title:"Error updating status",description:i.message,variant:"destructive"})}}),m=ne({mutationFn:async i=>{const o=await fetch(`/api/vendors/${t}/payment-methods/${i}/set-default`,{method:"PATCH",headers:{"Content-Type":"application/json"}});if(!o.ok){const c=await o.json();throw new Error(c.message||"Failed to set default payment method")}return await o.json()},onSuccess:()=>{a({title:"Default method updated",description:"The default payment method has been updated."}),Ce.invalidateQueries({queryKey:["/api/vendors",t,"payment-methods"]})},onError:i=>{a({title:"Error setting default method",description:i.message,variant:"destructive"})}}),u=ne({mutationFn:async i=>{const o=await fetch(`/api/vendors/${t}/payment-methods/${i}`,{method:"DELETE"});if(!o.ok){const c=await o.json();throw new Error(c.message||"Failed to delete payment method")}return await o.json()},onSuccess:()=>{a({title:"Payment method deleted",description:"The payment method has been removed."}),Ce.invalidateQueries({queryKey:["/api/vendors",t,"payment-methods"]}),d(null)},onError:i=>{a({title:"Error deleting payment method",description:i.message,variant:"destructive"}),d(null)}});return s.length===0?e.jsx(P,{children:e.jsx(D,{className:"p-8 flex flex-col items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground mb-4 text-center",children:"No payment methods have been added yet. Add your first payment method to start accepting payments."})})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:s.map(i=>e.jsxs(P,{className:i.isActive?"":"opacity-70",children:[e.jsx(I,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(M,{className:"text-lg",children:i.name}),e.jsx(re,{children:n[i.type]||i.type})]}),e.jsxs("div",{className:"flex space-x-1",children:[i.isDefault&&e.jsx(J,{variant:"secondary",children:"Default"}),e.jsx(J,{variant:i.isActive?"default":"outline",children:i.isActive?"Active":"Inactive"})]})]})}),e.jsxs(D,{children:[i.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:i.description}),i.processingFee&&e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Processing Fee:"})," ",i.processingFee]})]}),e.jsxs(Ze,{className:"flex justify-between pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Active"}),e.jsx(ds,{checked:i.isActive,onCheckedChange:o=>x.mutate({id:i.id,isActive:o})})]}),e.jsxs("div",{className:"flex space-x-2",children:[!i.isDefault&&i.isActive&&e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>m.mutate(i.id),children:[e.jsx(Al,{className:"h-4 w-4 mr-1"}),"Set Default"]}),e.jsx(p,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Edit",children:e.jsx(Zs,{className:"h-4 w-4"})}),e.jsxs(hs,{open:r===i.id,onOpenChange:o=>!o&&d(null),children:[e.jsx(ia,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",title:"Delete",onClick:()=>d(i.id),children:e.jsx(ze,{className:"h-4 w-4"})})}),e.jsxs(ts,{children:[e.jsxs(as,{children:[e.jsx(is,{children:"Are you sure?"}),e.jsx(ls,{children:"This action cannot be undone. This will permanently delete the payment method from your store and remove it from any customer's saved payment options."})]}),e.jsxs(rs,{children:[e.jsx(cs,{children:"Cancel"}),e.jsx(ns,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:()=>u.mutate(i.id),children:"Delete"})]})]})]})]})]})]},i.id))})},Ic=T.object({name:T.string().min(2,"Name must be at least 2 characters"),type:T.string().min(1,"Payment type is required"),description:T.string().optional(),processingFee:T.string().optional(),isActive:T.boolean().default(!0)}),Mc=({vendorId:s,onSuccess:t,initialData:a})=>{const{toast:r}=me(),d=Pe({resolver:ke(Ic),defaultValues:a||{name:"",type:"",description:"",processingFee:"",isActive:!0}}),n=ne({mutationFn:async m=>{const u=await fetch(`/api/vendors/${s}/payment-methods`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});if(!u.ok){const i=await u.json();throw new Error(i.message||"Failed to create payment method")}return await u.json()},onSuccess:()=>{r({title:"Payment method created",description:"The payment method has been created successfully."}),d.reset(),t&&t()},onError:m=>{r({title:"Error creating payment method",description:m.message,variant:"destructive"})}}),x=m=>{n.mutate(m)};return e.jsx(Me,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(x),className:"space-y-4",children:[e.jsx(K,{control:d.control,name:"name",render:({field:m})=>e.jsxs(q,{children:[e.jsx(_,{children:"Method Name"}),e.jsx(G,{children:e.jsx(L,{placeholder:"e.g., Credit Card, Cash on Delivery",...m})}),e.jsx(ie,{children:"A descriptive name for this payment method."}),e.jsx(Q,{})]})}),e.jsx(K,{control:d.control,name:"type",render:({field:m})=>e.jsxs(q,{children:[e.jsx(_,{children:"Payment Type"}),e.jsxs($e,{onValueChange:m.onChange,defaultValue:m.value,children:[e.jsx(G,{children:e.jsx(Ae,{children:e.jsx(Oe,{placeholder:"Select a payment type"})})}),e.jsxs(Le,{children:[e.jsx(te,{value:"credit_card",children:"Credit Card"}),e.jsx(te,{value:"cash",children:"Cash"}),e.jsx(te,{value:"bank_transfer",children:"Bank Transfer"}),e.jsx(te,{value:"paypal",children:"PayPal"}),e.jsx(te,{value:"cod",children:"Cash on Delivery"}),e.jsx(te,{value:"crypto",children:"Cryptocurrency"}),e.jsx(te,{value:"other",children:"Other"})]})]}),e.jsx(ie,{children:"The type of payment this method represents."}),e.jsx(Q,{})]})}),e.jsx(K,{control:d.control,name:"description",render:({field:m})=>e.jsxs(q,{children:[e.jsx(_,{children:"Description"}),e.jsx(G,{children:e.jsx(ss,{placeholder:"Provide additional details about this payment method",className:"resize-none",...m,value:m.value||""})}),e.jsx(Q,{})]})}),e.jsx(K,{control:d.control,name:"processingFee",render:({field:m})=>e.jsxs(q,{children:[e.jsx(_,{children:"Processing Fee"}),e.jsx(G,{children:e.jsx(L,{placeholder:"e.g., 2.9% + $0.30",...m,value:m.value||""})}),e.jsx(ie,{children:"Optional processing fee information to display to customers."}),e.jsx(Q,{})]})}),e.jsx(K,{control:d.control,name:"isActive",render:({field:m})=>e.jsxs(q,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{children:"Active Status"}),e.jsx(ie,{children:"Make this payment method available to customers."})]}),e.jsx(G,{children:e.jsx(ds,{checked:m.value,onCheckedChange:m.onChange})})]})}),e.jsxs(p,{type:"submit",className:"w-full",disabled:n.isPending,children:[n.isPending&&e.jsx(oe,{className:"mr-2 h-4 w-4 animate-spin"}),"Add Payment Method"]})]})})},Rc=Ll,$c=El,Oc=Il,Vc=T.object({configData:T.object({publicKey:T.string().min(1,"Public key is required"),secretKey:T.string().min(1,"Secret key is required"),webhookSecret:T.string().optional()}),isActive:T.boolean().default(!0)}),zc=T.object({configData:T.object({clientId:T.string().min(1,"Client ID is required"),clientSecret:T.string().min(1,"Client Secret is required"),webhookId:T.string().optional()}),isActive:T.boolean().default(!0)}),Sa=({vendorId:s,provider:t,existingSettings:a})=>{const{toast:r}=me(),[d,n]=h.useState(!1),x=t==="stripe"?Vc:zc,m=()=>{var c,l,v,j,g,k;return t==="stripe"?{configData:{publicKey:((c=a==null?void 0:a.configData)==null?void 0:c.publicKey)||"",secretKey:((l=a==null?void 0:a.configData)==null?void 0:l.secretKey)||"",webhookSecret:((v=a==null?void 0:a.configData)==null?void 0:v.webhookSecret)||""},isActive:(a==null?void 0:a.isActive)||!0}:{configData:{clientId:((j=a==null?void 0:a.configData)==null?void 0:j.clientId)||"",clientSecret:((g=a==null?void 0:a.configData)==null?void 0:g.clientSecret)||"",webhookId:((k=a==null?void 0:a.configData)==null?void 0:k.webhookId)||""},isActive:(a==null?void 0:a.isActive)||!0}},u=Pe({resolver:ke(x),defaultValues:m()}),i=ne({mutationFn:async c=>{const l=await fetch(`/api/vendors/${s}/payment-providers/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!l.ok){const v=await l.json();throw new Error(v.message||`Failed to save ${t} settings`)}return await l.json()},onSuccess:()=>{r({title:"Settings saved",description:`${t==="stripe"?"Stripe":"PayPal"} settings have been saved successfully.`}),Ce.invalidateQueries({queryKey:["/api/vendors",s,"payment-providers",t]}),n(!1)},onError:c=>{r({title:"Error saving settings",description:c.message,variant:"destructive"})}}),o=c=>{i.mutate(c)};return e.jsxs(Rc,{open:d,onOpenChange:n,className:"w-full",children:[e.jsx($c,{asChild:!0,children:e.jsx(p,{variant:"outline",className:"w-full",children:a?"Update Settings":"Configure"})}),e.jsx(Oc,{className:"mt-4",children:e.jsx(Me,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(o),className:"space-y-4",children:[t==="stripe"?e.jsxs(e.Fragment,{children:[e.jsx(K,{control:u.control,name:"configData.publicKey",render:({field:c})=>e.jsxs(q,{children:[e.jsx(_,{children:"Publishable Key"}),e.jsx(G,{children:e.jsx(L,{placeholder:"pk_...",...c})}),e.jsx(ie,{children:"Your Stripe publishable key starting with 'pk_'"}),e.jsx(Q,{})]})}),e.jsx(K,{control:u.control,name:"configData.secretKey",render:({field:c})=>e.jsxs(q,{children:[e.jsx(_,{children:"Secret Key"}),e.jsx(G,{children:e.jsx(L,{type:"password",placeholder:"sk_...",...c})}),e.jsx(ie,{children:"Your Stripe secret key starting with 'sk_'"}),e.jsx(Q,{})]})}),e.jsx(K,{control:u.control,name:"configData.webhookSecret",render:({field:c})=>e.jsxs(q,{children:[e.jsx(_,{children:"Webhook Secret (Optional)"}),e.jsx(G,{children:e.jsx(L,{placeholder:"whsec_...",...c,value:c.value||""})}),e.jsx(ie,{children:"Webhook secret for validating Stripe events"}),e.jsx(Q,{})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{control:u.control,name:"configData.clientId",render:({field:c})=>e.jsxs(q,{children:[e.jsx(_,{children:"Client ID"}),e.jsx(G,{children:e.jsx(L,{placeholder:"Your PayPal client ID",...c})}),e.jsx(ie,{children:"Your PayPal client ID from the developer dashboard"}),e.jsx(Q,{})]})}),e.jsx(K,{control:u.control,name:"configData.clientSecret",render:({field:c})=>e.jsxs(q,{children:[e.jsx(_,{children:"Client Secret"}),e.jsx(G,{children:e.jsx(L,{type:"password",placeholder:"Your PayPal client secret",...c})}),e.jsx(ie,{children:"Your PayPal client secret from the developer dashboard"}),e.jsx(Q,{})]})}),e.jsx(K,{control:u.control,name:"configData.webhookId",render:({field:c})=>e.jsxs(q,{children:[e.jsx(_,{children:"Webhook ID (Optional)"}),e.jsx(G,{children:e.jsx(L,{placeholder:"Your PayPal webhook ID",...c,value:c.value||""})}),e.jsx(ie,{children:"Webhook ID for receiving PayPal notifications"}),e.jsx(Q,{})]})})]}),e.jsx(K,{control:u.control,name:"isActive",render:({field:c})=>e.jsxs(q,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{children:"Active"}),e.jsx(ie,{children:"Enable this payment provider for your store"})]}),e.jsx(G,{children:e.jsx(ds,{checked:c.value,onCheckedChange:c.onChange})})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsxs(p,{type:"submit",disabled:i.isPending,children:[i.isPending&&e.jsx(oe,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Settings"]})]})]})})})]})},Uc=()=>{var k,b,y,V;const{user:s}=qe(),{toast:t}=me(),[a,r]=h.useState(!1);h.useState(null);const{data:d=[],isLoading:n,error:x}=Z({queryKey:["/api/vendors",s==null?void 0:s.id,"payment-methods"],enabled:!!(s!=null&&s.id)}),{data:m,isLoading:u}=Z({queryKey:["/api/vendors",s==null?void 0:s.id,"payment-providers","stripe"],enabled:!!(s!=null&&s.id)}),{data:i,isLoading:o}=Z({queryKey:["/api/vendors",s==null?void 0:s.id,"payment-providers","paypal"],enabled:!!(s!=null&&s.id)}),{data:c,isLoading:l,error:v}=Z({queryKey:["/api/payments/commission-settings"],enabled:!!(s!=null&&s.id)}),j=T.object({baseFeePercentage:T.string().min(1,"Required"),transactionFeeFlat:T.string().min(1,"Required"),thresholds:T.array(T.object({minAmount:T.string().min(1,"Required"),feePercentage:T.string().min(1,"Required")}))});return Pe({resolver:ke(j),defaultValues:{baseFeePercentage:(c==null?void 0:c.baseFeePercentage)||"2.9",transactionFeeFlat:(c==null?void 0:c.transactionFeeFlat)||"0.30",thresholds:(c==null?void 0:c.thresholds)||[{minAmount:"1000",feePercentage:"2.5"},{minAmount:"10000",feePercentage:"2.2"},{minAmount:"50000",feePercentage:"1.9"}]}}),n||u||o||l?e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx(oe,{className:"h-8 w-8 animate-spin text-primary"})}):((x||v)&&t({title:"Error loading payment settings",description:"There was a problem loading your payment settings.",variant:"destructive"}),e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsx(Lc,{title:"Payment Settings",description:"Manage your store's payment methods and provider integrations"}),e.jsxs(ve,{defaultValue:"methods",className:"w-full",children:[e.jsxs(fe,{className:"mb-6",children:[e.jsx(B,{value:"methods",children:"Payment Methods"}),e.jsx(B,{value:"providers",children:"Payment Providers"}),e.jsx(B,{value:"fees",children:"Fees & Commission"}),e.jsx(B,{value:"payouts",children:"Payout Settings"})]}),e.jsxs(H,{value:"methods",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Available Payment Methods"}),e.jsxs(Re,{open:a,onOpenChange:r,children:[e.jsx(_r,{asChild:!0,children:e.jsxs(p,{children:[e.jsx(nt,{className:"h-4 w-4 mr-2"}),"Add Payment Method"]})}),e.jsxs(Te,{className:"sm:max-w-[500px]",children:[e.jsxs(ms,{children:[e.jsx(xs,{children:"Add Payment Method"}),e.jsx(js,{children:"Create a new payment method that your customers can use at checkout."})]}),e.jsx(Mc,{vendorId:s==null?void 0:s.id,onSuccess:()=>r(!1)})]})]})]}),e.jsx(Ec,{methods:d||[],vendorId:s==null?void 0:s.id})]}),e.jsxs(H,{value:"providers",className:"space-y-6",children:[e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"Stripe Integration"}),e.jsx(re,{children:"Connect your Stripe account to accept credit card payments."})]}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"text-sm font-medium mb-1",children:["Status: ",m!=null&&m.isActive?"Connected":"Not Connected"]}),(m==null?void 0:m.isActive)&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Connected with account ending in ",(b=(k=m.configData)==null?void 0:k.publicKey)==null?void 0:b.slice(-4)]})]}),e.jsx(Sa,{vendorId:s==null?void 0:s.id,provider:"stripe",existingSettings:m})]})})]}),e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"PayPal Integration"}),e.jsx(re,{children:"Connect your PayPal account to accept PayPal payments."})]}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"text-sm font-medium mb-1",children:["Status: ",i!=null&&i.isActive?"Connected":"Not Connected"]}),(i==null?void 0:i.isActive)&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Connected with account ID ",(V=(y=i.configData)==null?void 0:y.clientId)==null?void 0:V.slice(-6)]})]}),e.jsx(Sa,{vendorId:s==null?void 0:s.id,provider:"paypal",existingSettings:i})]})})]})]}),e.jsxs(H,{value:"fees",className:"space-y-6",children:[e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"Platform Fees & Commission"}),e.jsx(re,{children:"View the current fee structure applied to your sales."})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Base Fee"}),e.jsxs("div",{className:"text-2xl font-bold",children:[(c==null?void 0:c.baseFeePercentage)||"2.9","%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Standard commission on all transactions"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Processing Fee"}),e.jsxs("div",{className:"text-2xl font-bold",children:["$",(c==null?void 0:c.transactionFeeFlat)||"0.30"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Flat fee per transaction"})]})]}),e.jsx(Ve,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Volume Discounts"}),e.jsx("div",{className:"space-y-3",children:((c==null?void 0:c.thresholds)||[]).map((S,$)=>e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-3 border rounded-md",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Monthly Sales"}),e.jsxs("div",{className:"font-medium",children:["$",S.minAmount,"+"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Fee"}),e.jsxs("div",{className:"font-medium",children:[S.feePercentage,"%"]})]})]},$))})]})]})})]}),e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"Fee Calculator"}),e.jsx(re,{children:"Calculate your estimated fees based on a transaction amount."})]}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"grow",children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Transaction Amount"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-muted-foreground",children:"$"}),e.jsx(L,{type:"number",className:"pl-8",placeholder:"100.00"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:" "}),e.jsx(p,{className:"mt-1",children:"Calculate"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"p-4 border rounded-md",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Platform Fee"}),e.jsx("div",{className:"text-lg font-semibold",children:"$2.90"})]}),e.jsxs("div",{className:"p-4 border rounded-md",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Processing Fee"}),e.jsx("div",{className:"text-lg font-semibold",children:"$0.30"})]}),e.jsxs("div",{className:"p-4 border rounded-md",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"You Receive"}),e.jsx("div",{className:"text-lg font-semibold",children:"$96.80"})]})]})]})]})]}),e.jsx(H,{value:"payouts",children:e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(M,{children:"Payout Settings"}),e.jsx(re,{children:"Configure how and when you receive payouts from your sales."})]}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Payout Schedule"}),e.jsxs("div",{className:"border rounded-md p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"font-medium",children:"Weekly"}),e.jsx(p,{variant:"outline",size:"sm",children:"Change"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Payouts are processed every Monday for the previous week's sales."})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Minimum Payout"}),e.jsxs("div",{className:"border rounded-md p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"font-medium",children:"$100.00"}),e.jsx(p,{variant:"outline",size:"sm",children:"Change"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Payouts will be held until your balance reaches this amount."})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Payout Method"}),e.jsx("div",{className:"border rounded-md p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Pt,{className:"h-5 w-5 mr-2 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Bank Account (ACH)"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Ending in 1234"})]})]}),e.jsx(p,{variant:"outline",size:"sm",children:"Change"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-4",children:"Payout History"}),e.jsx("div",{className:"border rounded-md overflow-hidden",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-muted-foreground",children:"Date"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-muted-foreground",children:"Amount"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-muted-foreground",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-muted-foreground"})]})}),e.jsxs("tbody",{className:"divide-y",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm",children:"May 1, 2023"}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:"$1,245.00"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Completed"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-right",children:e.jsx(p,{variant:"ghost",size:"sm",children:"Details"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm",children:"April 24, 2023"}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:"$987.50"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Completed"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-right",children:e.jsx(p,{variant:"ghost",size:"sm",children:"Details"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm",children:"April 17, 2023"}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:"$1,102.25"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Completed"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-right",children:e.jsx(p,{variant:"ghost",size:"sm",children:"Details"})})]})]})]})}),e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(p,{variant:"outline",children:"View All Payouts"})})]})]})]})})]})]}))};function qc({userId:s,userEmail:t}){const[a,r]=h.useState(!1),{impersonateUserMutation:d}=qe(),{toast:n}=me(),x=async()=>{try{await d.mutateAsync(s),r(!1),n({title:"Impersonation Active",description:`You are now impersonating user ${t}`}),window.location.href="/dashboard"}catch(m){n({title:"Impersonation Failed",description:m instanceof Error?m.message:"Unknown error occurred",variant:"destructive"})}};return e.jsxs(Re,{open:a,onOpenChange:r,children:[e.jsx(_r,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Impersonate User",children:e.jsx(Fr,{className:"h-4 w-4"})})}),e.jsxs(Te,{children:[e.jsxs(ms,{children:[e.jsx(xs,{children:"Impersonate User"}),e.jsxs(js,{children:["You are about to impersonate ",t,". This will allow you to view and interact with the platform as this user."]})]}),e.jsxs("div",{className:"py-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"During impersonation:"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 text-sm text-muted-foreground",children:[e.jsx("li",{children:"You'll have the same access level as the user"}),e.jsx("li",{children:"Your actions will be logged as performed by an admin"}),e.jsx("li",{children:"You can return to your admin account anytime"})]})]}),e.jsxs(qs,{children:[e.jsxs(hs,{children:[e.jsx(ia,{asChild:!0,children:e.jsx(p,{variant:"default",children:"Start Impersonation"})}),e.jsxs(ts,{children:[e.jsxs(as,{children:[e.jsx(is,{children:"Are you absolutely sure?"}),e.jsxs(ls,{children:["You are about to impersonate user ",t,". This action will be logged in the system."]})]}),e.jsxs(rs,{children:[e.jsx(cs,{children:"Cancel"}),e.jsx(ns,{onClick:x,children:"Confirm Impersonation"})]})]})]}),e.jsx(p,{variant:"outline",onClick:()=>r(!1),children:"Cancel"})]})]})]})}const ai=({className:s,...t})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:C("mx-auto flex w-full justify-center",s),...t});ai.displayName="Pagination";const ri=h.forwardRef(({className:s,...t},a)=>e.jsx("ul",{ref:a,className:C("flex flex-row items-center gap-1",s),...t}));ri.displayName="PaginationContent";const Js=h.forwardRef(({className:s,...t},a)=>e.jsx("li",{ref:a,className:C("",s),...t}));Js.displayName="PaginationItem";const Et=({className:s,isActive:t,size:a="icon",...r})=>e.jsx("a",{"aria-current":t?"page":void 0,className:C(Us({variant:t?"outline":"ghost",size:a}),s),...r});Et.displayName="PaginationLink";const Xt=({className:s,...t})=>e.jsxs(Et,{"aria-label":"Go to previous page",size:"default",className:C("gap-1 pl-2.5",s),...t,children:[e.jsx(ot,{className:"h-4 w-4"}),e.jsx("span",{children:"Previous"})]});Xt.displayName="PaginationPrevious";const Zt=({className:s,...t})=>e.jsxs(Et,{"aria-label":"Go to next page",size:"default",className:C("gap-1 pr-2.5",s),...t,children:[e.jsx("span",{children:"Next"}),e.jsx(Bs,{className:"h-4 w-4"})]});Zt.displayName="PaginationNext";function ut({filter:s="all"}){const[t,a]=h.useState(""),[r,d]=h.useState(1),n=10,{data:x,isLoading:m,error:u}=Z({queryKey:["/api/users"]}),i=x?x.filter(j=>s!=="all"&&j.role!==s?!1:j.email.toLowerCase().includes(t.toLowerCase())||j.firstName&&j.firstName.toLowerCase().includes(t.toLowerCase())||j.lastName&&j.lastName.toLowerCase().includes(t.toLowerCase())):[],o=Math.ceil(i.length/n),c=(r-1)*n,l=i.slice(c,c+n),v=j=>{a(j.target.value),d(1)};return m?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Users"}),e.jsx("div",{className:"relative w-64",children:e.jsx(E,{className:"h-10 w-64"})})]}),e.jsx("div",{className:"border rounded-lg",children:e.jsxs(gs,{children:[e.jsx(fs,{children:e.jsxs(Fe,{children:[e.jsx(le,{children:"User"}),e.jsx(le,{children:"Role"}),e.jsx(le,{children:"Joined"}),e.jsx(le,{children:"Status"}),e.jsx(le,{children:"Actions"})]})}),e.jsx(Ns,{children:Array(5).fill(0).map((j,g)=>e.jsxs(Fe,{children:[e.jsx(se,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(E,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(E,{className:"h-4 w-32"}),e.jsx(E,{className:"h-3 w-24"})]})]})}),e.jsx(se,{children:e.jsx(E,{className:"h-4 w-16"})}),e.jsx(se,{children:e.jsx(E,{className:"h-4 w-20"})}),e.jsx(se,{children:e.jsx(E,{className:"h-6 w-16"})}),e.jsx(se,{children:e.jsx(E,{className:"h-8 w-8"})})]},g))})]})})]}):u?e.jsxs("div",{className:"p-4 border rounded-lg bg-red-50 text-red-500",children:["Error loading users: ",u.message]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-2xl font-bold",children:["Users (",i.length,")"]}),e.jsxs("div",{className:"relative",children:[e.jsx(L,{type:"text",placeholder:"Search users...",value:t,onChange:v,className:"pl-10 w-64"}),e.jsx(He,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"})]})]}),e.jsx("div",{className:"border rounded-lg",children:e.jsxs(gs,{children:[e.jsx(fs,{children:e.jsxs(Fe,{children:[e.jsx(le,{children:"User"}),e.jsx(le,{children:"Role"}),e.jsx(le,{children:"Joined"}),e.jsx(le,{children:"Status"}),e.jsx(le,{children:"Actions"})]})}),e.jsx(Ns,{children:l.length===0?e.jsx(Fe,{children:e.jsx(se,{colSpan:5,className:"text-center py-10 text-gray-500",children:"No users found matching your search criteria."})}):l.map(j=>e.jsxs(Fe,{children:[e.jsx(se,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-100 flex items-center justify-center",children:e.jsx(Ml,{className:"h-6 w-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[j.firstName," ",j.lastName]}),e.jsx("div",{className:"text-sm text-gray-500",children:j.email})]})]})}),e.jsx(se,{children:j.role==="super_admin"?e.jsx(J,{variant:"destructive",children:"Super Admin"}):j.role==="admin"?e.jsx(J,{variant:"default",children:"Admin"}):e.jsx(J,{variant:"outline",children:"Vendor"})}),e.jsx(se,{children:j.createdAt?e.jsx("span",{title:new Date(j.createdAt).toLocaleString(),children:Rl(new Date(j.createdAt),{addSuffix:!0})}):"Unknown"}),e.jsx(se,{children:j.isProfileComplete?e.jsx(J,{variant:"success",className:"bg-green-100 text-green-800 hover:bg-green-200",children:"Active"}):e.jsx(J,{variant:"secondary",children:"Inactive"})}),e.jsx(se,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(qc,{userId:j.id,userEmail:j.email}),e.jsx(p,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-more-horizontal",children:[e.jsx("circle",{cx:"12",cy:"12",r:"1"}),e.jsx("circle",{cx:"19",cy:"12",r:"1"}),e.jsx("circle",{cx:"5",cy:"12",r:"1"})]})})]})})]},j.id))})]})}),o>1&&e.jsx(ai,{children:e.jsxs(ri,{children:[e.jsx(Js,{children:r===1?e.jsx("span",{className:"cursor-not-allowed opacity-50",children:e.jsx(Xt,{})}):e.jsx(Xt,{onClick:()=>d(j=>Math.max(j-1,1))})}),[...Array(o)].map((j,g)=>{const k=g+1;return k===1||k===o||k>=r-1&&k<=r+1?e.jsx(Js,{children:e.jsx(Et,{isActive:r===k,onClick:()=>d(k),children:k})},k):k===r-2||k===r+2?e.jsx(Js,{children:"..."},k):null}),e.jsx(Js,{children:r===o?e.jsx("span",{className:"cursor-not-allowed opacity-50",children:e.jsx(Zt,{})}):e.jsx(Zt,{onClick:()=>d(j=>Math.min(j+1,o))})})]})})]})}function Bc(){const{user:s}=qe(),[,t]=Ge();return h.useEffect(()=>{s&&s.role!=="super_admin"&&t("/")},[s,t]),!s||s.role!=="super_admin"?null:e.jsx(ue,{title:"User Management",subtitle:"Manage all users across the platform",children:e.jsx("div",{className:"container py-6 max-w-7xl mx-auto",children:e.jsxs(ve,{defaultValue:"all-users",className:"w-full",children:[e.jsxs(fe,{className:"mb-6",children:[e.jsx(B,{value:"all-users",children:"All Users"}),e.jsx(B,{value:"super-admins",children:"Super Admins"}),e.jsx(B,{value:"vendors",children:"Vendors"}),e.jsx(B,{value:"customers",children:"Customers"})]}),e.jsx(H,{value:"all-users",children:e.jsx(ut,{filter:"all"})}),e.jsx(H,{value:"super-admins",children:e.jsx(ut,{filter:"super_admin"})}),e.jsx(H,{value:"vendors",children:e.jsx(ut,{filter:"vendor"})}),e.jsx(H,{value:"customers",children:e.jsx(ut,{filter:"customer"})})]})})})}const Kc=()=>{We();const{activeVendor:s}=Fs(),{toast:t}=me(),a=()=>{t({title:"Feature Coming Soon",description:"Campaign creation will be available in a future update."})};return e.jsxs(ue,{title:"Marketing",subtitle:"Promote your products and engage with customers",children:[e.jsx(mt,{children:e.jsxs("title",{children:["Marketing | ",(s==null?void 0:s.companyName)||"MultiVend"]})}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Marketing Campaigns"}),e.jsxs(p,{onClick:a,children:[e.jsx($l,{className:"mr-2 h-4 w-4"}),"Create Campaign"]})]}),e.jsxs(ve,{defaultValue:"email",children:[e.jsxs(fe,{className:"mb-6",children:[e.jsxs(B,{value:"email",children:[e.jsx(at,{className:"h-4 w-4 mr-2"}),"Email Marketing"]}),e.jsxs(B,{value:"promotions",children:[e.jsx(Va,{className:"h-4 w-4 mr-2"}),"Promotions"]}),e.jsxs(B,{value:"seo",children:[e.jsx(Ol,{className:"h-4 w-4 mr-2"}),"SEO"]}),e.jsxs(B,{value:"social",children:[e.jsx(pa,{className:"h-4 w-4 mr-2"}),"Social Media"]})]}),e.jsx(H,{value:"email",children:e.jsxs(P,{children:[e.jsx(I,{children:e.jsx(M,{children:"Email Campaigns"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 hover:border-primary hover:shadow-md transition-all",children:[e.jsx(at,{className:"h-10 w-10 text-primary mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Newsletter"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Send regular updates about your products and promotions"}),e.jsx(p,{variant:"outline",size:"sm",className:"w-full",children:"Create Newsletter"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 hover:border-primary hover:shadow-md transition-all",children:[e.jsx(ja,{className:"h-10 w-10 text-primary mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Special Offers"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create exclusive deals and discounts for your customers"}),e.jsx(p,{variant:"outline",size:"sm",className:"w-full",children:"Create Offer"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 hover:border-primary hover:shadow-md transition-all",children:[e.jsx(kr,{className:"h-10 w-10 text-primary mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Product Announcements"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Announce new products or features to your customers"}),e.jsx(p,{variant:"outline",size:"sm",className:"w-full",children:"Create Announcement"})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Campaigns"}),e.jsx("div",{className:"rounded-lg border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-gray-500 font-medium text-sm",children:"Campaign Name"}),e.jsx("th",{className:"px-4 py-3 text-gray-500 font-medium text-sm",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-gray-500 font-medium text-sm",children:"Sent"}),e.jsx("th",{className:"px-4 py-3 text-gray-500 font-medium text-sm",children:"Opens"}),e.jsx("th",{className:"px-4 py-3 text-gray-500 font-medium text-sm",children:"Clicks"}),e.jsx("th",{className:"px-4 py-3 text-gray-500 font-medium text-sm",children:"Status"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:"Summer Collection Launch"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"Newsletter"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"523"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"342 (65%)"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"168 (32%)"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:"Completed"})})]}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:"Special Monsoon Discount"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"Promotion"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"856"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"512 (60%)"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"246 (29%)"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:"Completed"})})]})]})]})})]})]})]})}),e.jsx(H,{value:"promotions",children:e.jsxs(P,{children:[e.jsx(I,{children:e.jsx(M,{children:"Promotions & Discounts"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 hover:border-primary hover:shadow-md transition-all",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Monsoon Sale"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Valid until Sep 30, 2023"})]}),e.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-800 rounded-full text-xs font-medium",children:"Active"})]}),e.jsx("p",{className:"text-gray-700 mb-2 font-medium",children:"30% off on all products"}),e.jsxs("p",{className:"text-gray-500 mb-4 text-sm",children:["Coupon code: ",e.jsx("span",{className:"font-mono bg-gray-100 px-2 py-0.5 rounded",children:"MONSOON30"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[e.jsx("span",{children:"Used: 245 times"}),e.jsx("span",{children:"Revenue: ₹38,450"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 hover:border-primary hover:shadow-md transition-all",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"New Customer Discount"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Valid until Dec 31, 2023"})]}),e.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-800 rounded-full text-xs font-medium",children:"Active"})]}),e.jsx("p",{className:"text-gray-700 mb-2 font-medium",children:"15% off on first purchase"}),e.jsxs("p",{className:"text-gray-500 mb-4 text-sm",children:["Coupon code: ",e.jsx("span",{className:"font-mono bg-gray-100 px-2 py-0.5 rounded",children:"WELCOME15"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[e.jsx("span",{children:"Used: 187 times"}),e.jsx("span",{children:"Revenue: ₹22,640"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 hover:border-primary hover:shadow-md transition-all",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Festive Season Offer"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Starting Oct 15, 2023"})]}),e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-medium",children:"Scheduled"})]}),e.jsx("p",{className:"text-gray-700 mb-2 font-medium",children:"Buy 1 Get 1 Free on select items"}),e.jsxs("p",{className:"text-gray-500 mb-4 text-sm",children:["Coupon code: ",e.jsx("span",{className:"font-mono bg-gray-100 px-2 py-0.5 rounded",children:"FESTIVE2023"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[e.jsx(p,{variant:"outline",size:"sm",children:"Edit"}),e.jsx(p,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Cancel"})]})]})]}),e.jsx("div",{className:"flex justify-center mt-8",children:e.jsxs(p,{children:[e.jsx(ja,{className:"mr-2 h-4 w-4"}),"Create New Promotion"]})})]})]})}),e.jsx(H,{value:"seo",children:e.jsxs(P,{children:[e.jsx(I,{children:e.jsx(M,{children:"Search Engine Optimization"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"SEO Performance"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Organic Traffic"}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsx("p",{className:"text-2xl font-bold",children:"1,245"}),e.jsxs("span",{className:"text-green-600 text-sm font-medium flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z",clipRule:"evenodd"})}),"+12.5%"]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Keywords Ranking"}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsx("p",{className:"text-2xl font-bold",children:"28"}),e.jsxs("span",{className:"text-green-600 text-sm font-medium flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z",clipRule:"evenodd"})}),"+5"]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Avg. Position"}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsx("p",{className:"text-2xl font-bold",children:"4.2"}),e.jsxs("span",{className:"text-green-600 text-sm font-medium flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z",clipRule:"evenodd"})}),"+0.8"]})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Top Keywords"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-gray-500 font-medium text-sm",children:"Keyword"}),e.jsx("th",{className:"px-4 py-3 text-gray-500 font-medium text-sm",children:"Position"}),e.jsx("th",{className:"px-4 py-3 text-gray-500 font-medium text-sm",children:"Traffic"}),e.jsx("th",{className:"px-4 py-3 text-gray-500 font-medium text-sm",children:"Change"})]})}),e.jsxs("tbody",{className:"divide-y",children:[e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:"premium tea brands"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"3"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"425"}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:"text-green-600 text-sm font-medium flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z",clipRule:"evenodd"})}),"+2"]})})]}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:"organic green tea"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"5"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"312"}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:"text-green-600 text-sm font-medium flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z",clipRule:"evenodd"})}),"+1"]})})]}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:"loose leaf tea online"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"2"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"298"}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:"text-red-600 text-sm font-medium flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12 13a1 1 0 100 2h5a1 1 0 001-1V9a1 1 0 10-2 0v2.586l-4.293-4.293a1 1 0 00-1.414 0L8 9.586 3.707 5.293a1 1 0 00-1.414 1.414l5 5a1 1 0 001.414 0L11 9.414 14.586 13H12z",clipRule:"evenodd"})}),"-1"]})})]}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:"buy tea online India"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"6"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"210"}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:"text-green-600 text-sm font-medium flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z",clipRule:"evenodd"})}),"+3"]})})]})]})]})})]})]})]})}),e.jsx(H,{value:"social",children:e.jsxs(P,{children:[e.jsx(I,{children:e.jsx(M,{children:"Social Media Management"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-[#1877F2] flex items-center justify-center",children:e.jsx("svg",{className:"h-6 w-6 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M18.48 8.86c-.35-.12-1.08-.34-1.93-.42-.9-.09-1.88.04-2.65.4-.83.41-1.5 1.06-1.95 1.89-.47.87-.6 1.84-.59 2.76.01.89.12 1.76.39 2.61.26.84.66 1.63 1.2 2.32-1.34-.11-2.36-.43-3.44-1-.95-.49-1.74-1.17-2.41-1.96-.7-.84-1.22-1.81-1.55-2.86-.33-1.06-.45-2.17-.38-3.28.07-1.04.32-2.06.76-3 .43-.93 1.01-1.76 1.73-2.45.77-.75 1.71-1.3 2.73-1.63 1.02-.33 2.11-.41 3.19-.25 1.04.15 2.02.54 2.9 1.12.94.62 1.71 1.48 2.24 2.48-1.02.35-1.75.9-2.25 1.72-.5.82-.69 1.7-.62 2.49.07.7.29 1.26.63 1.68z"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Facebook"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Connected"})]}),e.jsx("div",{className:"ml-auto",children:e.jsx(p,{variant:"outline",size:"sm",children:"Manage"})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-sm text-gray-500",children:"PERFORMANCE OVERVIEW"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Followers"}),e.jsx("p",{className:"text-lg font-semibold",children:"3,245"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Engagement"}),e.jsx("p",{className:"text-lg font-semibold",children:"12.4%"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Reach"}),e.jsx("p",{className:"text-lg font-semibold",children:"8,932"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-[#C13584] flex items-center justify-center",children:e.jsx("svg",{className:"h-6 w-6 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2c2.717 0 3.056.01 4.122.06 1.065.05 1.79.217 2.428.465.66.254 1.216.598 1.772 1.153.509.5.902 1.105 1.153 1.772.247.637.415 1.363.465 2.428.047 1.066.06 1.405.06 4.122 0 2.717-.01 3.056-.06 4.122-.05 1.065-.218 1.79-.465 2.428a4.883 4.883 0 01-1.153 1.772c-.5.508-1.105.902-1.772 1.153-.637.247-1.363.415-2.428.465-1.066.047-1.405.06-4.122.06-2.717 0-3.056-.01-4.122-.06-1.065-.05-1.79-.218-2.428-.465a4.89 4.89 0 01-1.772-1.153 4.904 4.904 0 01-1.153-1.772c-.247-.637-.415-1.363-.465-2.428C2.013 15.056 2 14.717 2 12c0-2.717.01-3.056.06-4.122.05-1.066.217-1.79.465-2.428a4.88 4.88 0 011.153-1.772A4.897 4.897 0 015.45 2.525c.638-.247 1.362-.415 2.428-.465C8.944 2.013 9.283 2 12 2zm0 1.802c-2.67 0-2.986.01-4.04.059-.976.045-1.505.207-1.858.344-.466.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.055-.059 1.37-.059 4.04 0 2.67.01 2.986.059 4.04.044.976.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.046 1.37.058 4.04.058 2.67 0 2.987-.01 4.04-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.047-1.054.059-1.37.059-4.04 0-2.67-.01-2.986-.059-4.04-.044-.976-.207-1.504-.344-1.857a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.054-.048-1.37-.058-4.04-.058zm0 3.063a5.136 5.136 0 110 10.27 5.136 5.136 0 010-10.27zm0 8.468a3.333 3.333 0 100-6.666 3.333 3.333 0 000 6.666zm6.538-8.469a1.2 1.2 0 11-2.4 0 1.2 1.2 0 012.4 0z"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Instagram"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Connected"})]}),e.jsx("div",{className:"ml-auto",children:e.jsx(p,{variant:"outline",size:"sm",children:"Manage"})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-sm text-gray-500",children:"PERFORMANCE OVERVIEW"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Followers"}),e.jsx("p",{className:"text-lg font-semibold",children:"5,782"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Engagement"}),e.jsx("p",{className:"text-lg font-semibold",children:"18.2%"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Reach"}),e.jsx("p",{className:"text-lg font-semibold",children:"12,459"})]})]})]})]})]}),e.jsx("div",{className:"flex justify-center mt-8",children:e.jsxs(p,{children:[e.jsx(pa,{className:"mr-2 h-4 w-4"}),"Connect Social Account"]})})]})]})})]})]})},Gc=()=>{We();const{activeVendor:s}=Fs(),{toast:t}=me(),a=()=>{t({title:"Feature Coming Soon",description:"Report downloading will be available in a future update."})};return e.jsxs(ue,{title:"Reports",subtitle:"Detailed analytics and business reports",children:[e.jsx(mt,{children:e.jsxs("title",{children:["Reports | ",(s==null?void 0:s.companyName)||"MultiVend"]})}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Business Reports"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs($e,{defaultValue:"30days",children:[e.jsx(Ae,{className:"w-40",children:e.jsx(Oe,{placeholder:"Time period"})}),e.jsxs(Le,{children:[e.jsx(te,{value:"7days",children:"Last 7 days"}),e.jsx(te,{value:"30days",children:"Last 30 days"}),e.jsx(te,{value:"90days",children:"Last 90 days"}),e.jsx(te,{value:"year",children:"This year"}),e.jsx(te,{value:"all",children:"All time"})]})]}),e.jsxs(p,{onClick:a,children:[e.jsx(Vl,{className:"mr-2 h-4 w-4"}),"Export"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(P,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Revenue"}),e.jsx("h3",{className:"text-2xl font-bold mt-1",children:"₹89,452"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsxs("div",{className:"flex items-center text-green-600 text-xs font-semibold",children:[e.jsx(Xe,{className:"h-3 w-3 mr-1"}),"12.5%"]}),e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"vs prev. period"})]})]}),e.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(zs,{className:"h-6 w-6 text-blue-600"})})]})})}),e.jsx(P,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Orders"}),e.jsx("h3",{className:"text-2xl font-bold mt-1",children:"324"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsxs("div",{className:"flex items-center text-green-600 text-xs font-semibold",children:[e.jsx(Xe,{className:"h-3 w-3 mr-1"}),"8.2%"]}),e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"vs prev. period"})]})]}),e.jsx("div",{className:"h-12 w-12 bg-amber-100 rounded-full flex items-center justify-center",children:e.jsx(Ie,{className:"h-6 w-6 text-amber-600"})})]})})}),e.jsx(P,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Customers"}),e.jsx("h3",{className:"text-2xl font-bold mt-1",children:"198"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsxs("div",{className:"flex items-center text-green-600 text-xs font-semibold",children:[e.jsx(Xe,{className:"h-3 w-3 mr-1"}),"24.6%"]}),e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"vs prev. period"})]})]}),e.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Vs,{className:"h-6 w-6 text-green-600"})})]})})}),e.jsx(P,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Avg. Order Value"}),e.jsx("h3",{className:"text-2xl font-bold mt-1",children:"₹276"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsxs("div",{className:"flex items-center text-red-600 text-xs font-semibold",children:[e.jsx(Es,{className:"h-3 w-3 mr-1"}),"3.8%"]}),e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"vs prev. period"})]})]}),e.jsx("div",{className:"h-12 w-12 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(Vt,{className:"h-6 w-6 text-purple-600"})})]})})})]}),e.jsxs(ve,{defaultValue:"sales",children:[e.jsxs(fe,{className:"mb-6",children:[e.jsxs(B,{value:"sales",children:[e.jsx(zs,{className:"h-4 w-4 mr-2"}),"Sales Report"]}),e.jsxs(B,{value:"products",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Product Performance"]}),e.jsxs(B,{value:"customers",children:[e.jsx(Vs,{className:"h-4 w-4 mr-2"}),"Customer Insights"]})]}),e.jsx(H,{value:"sales",children:e.jsxs(P,{children:[e.jsx(I,{children:e.jsx(M,{children:"Sales & Revenue"})}),e.jsxs(D,{children:[e.jsx("div",{className:"w-full h-64 bg-gray-50 border border-gray-200 rounded-md flex items-center justify-center mb-6",children:e.jsxs("div",{className:"text-gray-500 flex flex-col items-center",children:[e.jsx(Vt,{className:"h-10 w-10 mb-2"}),e.jsx("p",{children:"Sales trend chart will appear here"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-5 border rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Sales by Time"}),e.jsx("table",{className:"w-full text-sm",children:e.jsxs("tbody",{className:"divide-y",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 text-gray-500",children:"Today"}),e.jsx("td",{className:"py-2 text-right font-medium",children:"₹1,245"}),e.jsx("td",{className:"py-2 text-right",children:e.jsx("span",{className:"text-green-600 text-xs font-medium",children:"+12.5%"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 text-gray-500",children:"This Week"}),e.jsx("td",{className:"py-2 text-right font-medium",children:"₹8,976"}),e.jsx("td",{className:"py-2 text-right",children:e.jsx("span",{className:"text-green-600 text-xs font-medium",children:"+5.3%"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 text-gray-500",children:"This Month"}),e.jsx("td",{className:"py-2 text-right font-medium",children:"₹32,456"}),e.jsx("td",{className:"py-2 text-right",children:e.jsx("span",{className:"text-green-600 text-xs font-medium",children:"+18.2%"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 text-gray-500",children:"This Year"}),e.jsx("td",{className:"py-2 text-right font-medium",children:"₹239,845"}),e.jsx("td",{className:"py-2 text-right",children:e.jsx("span",{className:"text-green-600 text-xs font-medium",children:"+28.6%"})})]})]})})]}),e.jsxs("div",{className:"bg-white p-5 border rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Payment Methods"}),e.jsx("table",{className:"w-full text-sm",children:e.jsxs("tbody",{className:"divide-y",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 text-gray-500",children:"Credit Card"}),e.jsx("td",{className:"py-2 text-right font-medium",children:"₹45,672 (51%)"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 text-gray-500",children:"UPI"}),e.jsx("td",{className:"py-2 text-right font-medium",children:"₹28,934 (32%)"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 text-gray-500",children:"Debit Card"}),e.jsx("td",{className:"py-2 text-right font-medium",children:"₹10,452 (12%)"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 text-gray-500",children:"Net Banking"}),e.jsx("td",{className:"py-2 text-right font-medium",children:"₹4,394 (5%)"})]})]})})]}),e.jsxs("div",{className:"bg-white p-5 border rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Taxes & Fees"}),e.jsx("table",{className:"w-full text-sm",children:e.jsxs("tbody",{className:"divide-y",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 text-gray-500",children:"GST Collected"}),e.jsx("td",{className:"py-2 text-right font-medium",children:"₹16,102"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 text-gray-500",children:"Platform Fees"}),e.jsx("td",{className:"py-2 text-right font-medium",children:"₹4,472"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 text-gray-500",children:"Payment Processing"}),e.jsx("td",{className:"py-2 text-right font-medium",children:"₹2,683"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 text-gray-500",children:"Net Revenue"}),e.jsx("td",{className:"py-2 text-right font-medium text-green-600",children:"₹66,195"})]})]})})]})]})]})]})}),e.jsx(H,{value:"products",children:e.jsxs(P,{children:[e.jsx(I,{children:e.jsx(M,{children:"Product Performance"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"bg-white border rounded-lg shadow-sm mb-6 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h3",{className:"font-semibold",children:"Top Selling Products"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-gray-500 font-medium",children:"Product"}),e.jsx("th",{className:"px-4 py-3 text-left text-gray-500 font-medium",children:"SKU"}),e.jsx("th",{className:"px-4 py-3 text-right text-gray-500 font-medium",children:"Units Sold"}),e.jsx("th",{className:"px-4 py-3 text-right text-gray-500 font-medium",children:"Revenue"}),e.jsx("th",{className:"px-4 py-3 text-right text-gray-500 font-medium",children:"Profit Margin"})]})}),e.jsxs("tbody",{className:"divide-y",children:[e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:"Premium Green Tea"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"TEA-PGT-100"}),e.jsx("td",{className:"px-4 py-3 text-right",children:"125"}),e.jsx("td",{className:"px-4 py-3 text-right",children:"₹12,500"}),e.jsx("td",{className:"px-4 py-3 text-right text-green-600",children:"42%"})]}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:"Organic Oolong Tea"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"TEA-OOL-250"}),e.jsx("td",{className:"px-4 py-3 text-right",children:"84"}),e.jsx("td",{className:"px-4 py-3 text-right",children:"₹10,080"}),e.jsx("td",{className:"px-4 py-3 text-right text-green-600",children:"38%"})]}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:"Classic Earl Grey"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"TEA-CEG-150"}),e.jsx("td",{className:"px-4 py-3 text-right",children:"76"}),e.jsx("td",{className:"px-4 py-3 text-right",children:"₹7,600"}),e.jsx("td",{className:"px-4 py-3 text-right text-green-600",children:"35%"})]}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:"Premium Tea Gift Box"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"TEA-GFT-001"}),e.jsx("td",{className:"px-4 py-3 text-right",children:"52"}),e.jsx("td",{className:"px-4 py-3 text-right",children:"₹15,600"}),e.jsx("td",{className:"px-4 py-3 text-right text-green-600",children:"45%"})]}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:"Herbal Tea Sampler"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"TEA-HRB-MIX"}),e.jsx("td",{className:"px-4 py-3 text-right",children:"48"}),e.jsx("td",{className:"px-4 py-3 text-right",children:"₹5,760"}),e.jsx("td",{className:"px-4 py-3 text-right text-green-600",children:"32%"})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h3",{className:"font-semibold",children:"Inventory Status"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"In Stock (75%)"}),e.jsx("span",{className:"text-sm text-gray-500",children:"148 products"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"75%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"Low Stock (15%)"}),e.jsx("span",{className:"text-sm text-gray-500",children:"32 products"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-amber-500 h-2 rounded-full",style:{width:"15%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"Out of Stock (10%)"}),e.jsx("span",{className:"text-sm text-gray-500",children:"22 products"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:"10%"}})})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(p,{variant:"outline",size:"sm",className:"w-full",children:"View Inventory Report"})})]})]}),e.jsxs("div",{className:"bg-white border rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h3",{className:"font-semibold",children:"Product Categories Performance"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Green Tea"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-medium mr-2",children:"₹18,450"}),e.jsx("span",{className:"text-xs text-green-600 bg-green-50 px-2 py-0.5 rounded-full",children:"+12%"})]})]}),e.jsxs("li",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Black Tea"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-medium mr-2",children:"₹15,200"}),e.jsx("span",{className:"text-xs text-green-600 bg-green-50 px-2 py-0.5 rounded-full",children:"+8%"})]})]}),e.jsxs("li",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Herbal Tea"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-medium mr-2",children:"₹12,780"}),e.jsx("span",{className:"text-xs text-green-600 bg-green-50 px-2 py-0.5 rounded-full",children:"+15%"})]})]}),e.jsxs("li",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Tea Gift Sets"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-medium mr-2",children:"₹21,300"}),e.jsx("span",{className:"text-xs text-green-600 bg-green-50 px-2 py-0.5 rounded-full",children:"+22%"})]})]}),e.jsxs("li",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Tea Accessories"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-medium mr-2",children:"₹9,820"}),e.jsx("span",{className:"text-xs text-red-600 bg-red-50 px-2 py-0.5 rounded-full",children:"-5%"})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(p,{variant:"outline",size:"sm",className:"w-full",children:"View Category Report"})})]})]})]})]})]})}),e.jsx(H,{value:"customers",children:e.jsxs(P,{children:[e.jsx(I,{children:e.jsx(M,{children:"Customer Insights"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white p-5 border rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Customer Demographics"}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm",children:"18-24 years"}),e.jsx("span",{className:"text-sm text-gray-500",children:"15%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"15%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm",children:"25-34 years"}),e.jsx("span",{className:"text-sm text-gray-500",children:"42%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"42%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm",children:"35-44 years"}),e.jsx("span",{className:"text-sm text-gray-500",children:"28%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"28%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm",children:"45+ years"}),e.jsx("span",{className:"text-sm text-gray-500",children:"15%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"15%"}})})]})]})]}),e.jsxs("div",{className:"bg-white p-5 border rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Top Locations"}),e.jsxs("ul",{className:"space-y-3 mt-4",children:[e.jsxs("li",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Delhi NCR"}),e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"text-sm font-medium",children:"28%"})})]}),e.jsxs("li",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Mumbai"}),e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"text-sm font-medium",children:"24%"})})]}),e.jsxs("li",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Bangalore"}),e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"text-sm font-medium",children:"18%"})})]}),e.jsxs("li",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Hyderabad"}),e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"text-sm font-medium",children:"12%"})})]}),e.jsxs("li",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Chennai"}),e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"text-sm font-medium",children:"8%"})})]}),e.jsxs("li",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Others"}),e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"text-sm font-medium",children:"10%"})})]})]})]}),e.jsxs("div",{className:"bg-white p-5 border rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Customer Retention"}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm",children:"New Customers"}),e.jsx("span",{className:"text-sm font-medium",children:"62 (31%)"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-amber-500 h-2 rounded-full",style:{width:"31%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm",children:"Returning Customers"}),e.jsx("span",{className:"text-sm font-medium",children:"136 (69%)"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"69%"}})})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Customer Lifetime Value"}),e.jsx("p",{className:"text-xl font-semibold",children:"₹4,850"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Retention Rate"}),e.jsx("p",{className:"text-xl font-semibold",children:"68%"})]})]})})]})]}),e.jsxs("div",{className:"bg-white border rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h3",{className:"font-semibold",children:"Top Customers by Revenue"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-gray-500 font-medium",children:"Customer"}),e.jsx("th",{className:"px-4 py-3 text-left text-gray-500 font-medium",children:"Orders"}),e.jsx("th",{className:"px-4 py-3 text-right text-gray-500 font-medium",children:"Total Spent"}),e.jsx("th",{className:"px-4 py-3 text-right text-gray-500 font-medium",children:"Last Order"}),e.jsx("th",{className:"px-4 py-3 text-right text-gray-500 font-medium",children:"Status"})]})}),e.jsxs("tbody",{className:"divide-y",children:[e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:"Amit Sharma"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"12"}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:"₹24,820"}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-500",children:"3 days ago"}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:"Active"})})]}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:"Priya Patel"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"8"}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:"₹18,460"}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-500",children:"1 week ago"}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:"Active"})})]}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:"Rahul Mehta"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"6"}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:"₹15,780"}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-500",children:"2 weeks ago"}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:"Active"})})]}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:"Sunita Gupta"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"5"}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:"₹12,340"}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-500",children:"1 month ago"}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-800 rounded-full text-xs font-medium",children:"At Risk"})})]}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:"Vivek Singh"}),e.jsx("td",{className:"px-4 py-3 text-gray-500",children:"4"}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:"₹10,680"}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-500",children:"6 weeks ago"}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-800 rounded-full text-xs font-medium",children:"At Risk"})})]})]})]})})]})]})]})})]})]})};function Pa({currentPlanId:s,onSelectPlan:t,billingCycle:a="monthly",isLoading:r=!1}){const{toast:d}=me(),[n,x]=h.useState(a),{data:m,isLoading:u,error:i}=Z({queryKey:["/api/subscription-plans"]});if(i&&d({title:"Error",description:"Failed to load subscription plans. Please try again later.",variant:"destructive"}),u)return e.jsx("div",{className:"grid gap-8 md:grid-cols-3",children:[1,2,3].map(c=>e.jsxs(P,{className:"flex flex-col",children:[e.jsxs(I,{children:[e.jsx(E,{className:"h-8 w-1/2 mb-2"}),e.jsx(E,{className:"h-4 w-full"})]}),e.jsxs(D,{className:"flex-grow",children:[e.jsx(E,{className:"h-10 w-3/4 mb-4"}),e.jsx("div",{className:"space-y-2",children:[1,2,3,4].map(l=>e.jsx(E,{className:"h-4 w-full"},l))})]}),e.jsx(Ze,{children:e.jsx(E,{className:"h-10 w-full"})})]},c))});const o=m==null?void 0:m.some(c=>c.name==="Pro"&&c.yearlyPrice!==null);return e.jsxs("div",{className:"space-y-8",children:[o&&e.jsx("div",{className:"flex justify-center",children:e.jsx(ve,{value:n,onValueChange:c=>x(c),className:"w-full max-w-md",children:e.jsxs(fe,{className:"grid w-full grid-cols-2",children:[e.jsx(B,{value:"monthly",children:"Monthly Billing"}),e.jsx(B,{value:"yearly",children:"Yearly Billing"})]})})}),e.jsx("div",{className:"grid gap-8 md:grid-cols-3",children:m==null?void 0:m.map(c=>{var V;const l=n,v=l==="yearly"&&c.yearlyPrice||c.price,j=s===c.id,g=l==="yearly"&&c.yearlyPrice&&c.price,k=g?parseFloat(c.price)*12-parseFloat(c.yearlyPrice||"0"):0,b=l==="yearly"&&c.yearlyPrice&&c.name==="Pro",y=b?parseFloat(c.yearlyPrice||"0")/12:0;return e.jsxs(P,{className:`flex flex-col ${j?"border-primary":""}`,children:[e.jsxs(I,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(M,{children:c.name}),c.isDefault&&e.jsx(J,{variant:"outline",className:"bg-muted",children:"Popular"})]}),e.jsx(re,{children:c.description})]}),e.jsxs(D,{className:"flex-grow",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-3xl font-bold",children:v?ra(parseFloat(v),l==="yearly"?"yearly":"monthly"):"₹0/mon"}),b&&e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["(₹",y.toLocaleString("en-IN"),"/month equivalent)"]}),g&&k>0&&e.jsxs("div",{className:"text-sm text-green-600 flex items-center gap-1 mt-1",children:[e.jsx(zl,{size:14}),"Save ",yt(k)," per year"]}),c.trialDays>0&&e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Includes ",c.trialDays,"-day free trial"]})]}),e.jsx("div",{className:"space-y-2",children:(V=c.features)==null?void 0:V.map((S,$)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ft,{className:"h-5 w-5 text-green-500 shrink-0 mt-0.5"}),e.jsx("span",{children:S})]},$))})]}),e.jsx(Ze,{children:j?e.jsx(p,{variant:"outline",className:"w-full",disabled:!0,children:"Current Plan"}):e.jsx(p,{className:"w-full",onClick:()=>t(c.id),disabled:r,children:r?e.jsx(e.Fragment,{children:"Processing"}):e.jsxs(e.Fragment,{children:["Select ",c.name," ",e.jsx(Za,{className:"ml-2 h-4 w-4"})]})})})]},c.id)})})]})}function _c(){const{toast:s}=me(),t=Qe(),[a,r]=h.useState(!1),[d,n]=h.useState("current"),{data:x,isLoading:m,error:u,isError:i}=Z({queryKey:["/api/vendor/subscription"],retry:!1}),o=ne({mutationFn:async b=>(await ee("POST","/api/vendor/subscription/start-trial",{planId:b})).json(),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/vendor/subscription"]}),n("current"),s({title:"Trial started",description:"Your subscription trial has been started successfully."})},onError:b=>{s({title:"Failed to start trial",description:b.message||"Something went wrong. Please try again.",variant:"destructive"})}}),c=ne({mutationFn:async b=>(await ee("POST","/api/vendor/subscription/change-plan",{planId:b})).json(),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/vendor/subscription"]}),n("current"),s({title:"Plan changed",description:"Your subscription plan has been updated successfully."})},onError:b=>{s({title:"Failed to change plan",description:b.message||"Something went wrong. Please try again.",variant:"destructive"})}}),l=ne({mutationFn:async b=>(await ee("POST","/api/vendor/subscription/change-billing-cycle",{billingCycle:b})).json(),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/vendor/subscription"]}),s({title:"Billing cycle changed",description:"Your billing cycle has been updated successfully."})},onError:b=>{s({title:"Failed to change billing cycle",description:b.message||"Something went wrong. Please try again.",variant:"destructive"})}}),v=ne({mutationFn:async b=>(await ee("POST","/api/vendor/subscription/cancel",b)).json(),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/vendor/subscription"]}),r(!1),s({title:"Subscription canceled",description:"Your subscription has been canceled successfully."})},onError:b=>{s({title:"Failed to cancel subscription",description:b.message||"Something went wrong. Please try again.",variant:"destructive"})}}),j=b=>{x?x.planId!==b&&c.mutate(b):o.mutate(b)},g=b=>b?new Date(b).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",k=b=>{switch(b){case"active":return e.jsx(J,{className:"bg-green-500",children:"Active"});case"trialing":return e.jsx(J,{className:"bg-blue-500",children:"Trial"});case"canceled":return e.jsx(J,{variant:"destructive",children:"Canceled"});case"past_due":return e.jsx(J,{variant:"destructive",children:"Past Due"});default:return e.jsx(J,{variant:"outline",children:b})}};return m?e.jsx("div",{className:"flex justify-center items-center min-h-[300px]",children:e.jsx(oe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):!x||i?e.jsxs("div",{className:"space-y-6",children:[i&&e.jsx(P,{className:"bg-muted/50",children:e.jsx(D,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Kt,{className:"h-5 w-5 text-amber-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"No active subscription found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Please select a subscription plan below to get started with your account."})]})]})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Choose a Subscription Plan"}),e.jsx(Pa,{onSelectPlan:j,isLoading:o.isPending})]})]}):e.jsxs(ve,{defaultValue:"current",value:d,onValueChange:b=>n(b),children:[e.jsxs(fe,{className:"mb-6",children:[e.jsx(B,{value:"current",children:"Current Subscription"}),e.jsx(B,{value:"plans",children:"Change Plan"})]}),e.jsx(H,{value:"current",children:e.jsxs(P,{children:[e.jsx(I,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(M,{className:"text-2xl",children:[x.plan.name," Plan"]}),e.jsx(re,{children:x.plan.description})]}),e.jsx("div",{children:k(x.status)})]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Plan Details"}),e.jsxs("div",{className:"text-lg font-semibold",children:[x.amount?yt(parseFloat(x.amount)):yt(parseFloat(x.billingCycle==="yearly"&&x.plan.yearlyPrice||x.plan.price)),e.jsxs("span",{className:"text-sm font-normal text-muted-foreground ml-1",children:["/",x.billingCycle]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1 mt-1",children:[e.jsx(Pt,{className:"h-4 w-4"}),"Billing cycle: ",x.billingCycle]})]}),x.status==="trialing"&&x.trialEndsAt&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ul,{className:"h-5 w-5 text-amber-500 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Trial Period"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Your trial ends on ",g(x.trialEndsAt)]})]})]}),x.cancelAtPeriodEnd&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Kt,{className:"h-5 w-5 text-amber-500 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Subscription Ending"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Your subscription will end on ",g(x.currentPeriodEnd)]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Subscription Dates"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Start date:"}),e.jsx("span",{children:g(x.startDate)})]}),x.currentPeriodStart&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Current period start:"}),e.jsx("span",{children:g(x.currentPeriodStart)})]}),x.currentPeriodEnd&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Current period end:"}),e.jsx("span",{children:g(x.currentPeriodEnd)})]}),x.renewalDate&&!x.cancelAtPeriodEnd&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Next renewal:"}),e.jsx("span",{children:g(x.renewalDate)})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Plan Limits"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Products:"}),e.jsxs("span",{children:["Up to ",x.plan.productLimit]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Storage:"}),e.jsxs("span",{children:[x.plan.storageLimit/1e3," GB"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Custom domains:"}),e.jsxs("span",{children:["Up to ",x.plan.customDomainLimit]})]})]})]})]})]})}),e.jsxs(Ze,{className:"flex flex-col space-y-4 sm:flex-row sm:justify-between sm:space-x-4 sm:space-y-0",children:[e.jsxs("div",{className:"flex flex-col space-y-2 sm:flex-row sm:space-x-2 sm:space-y-0",children:[x.billingCycle==="monthly"&&x.plan.yearlyPrice&&e.jsxs(p,{variant:"outline",onClick:()=>l.mutate("yearly"),disabled:l.isPending,children:[l.isPending&&e.jsx(oe,{className:"mr-2 h-4 w-4 animate-spin"}),"Switch to Yearly Billing"]}),x.billingCycle==="yearly"&&e.jsxs(p,{variant:"outline",onClick:()=>l.mutate("monthly"),disabled:l.isPending,children:[l.isPending&&e.jsx(oe,{className:"mr-2 h-4 w-4 animate-spin"}),"Switch to Monthly Billing"]})]}),!x.cancelAtPeriodEnd&&x.status!=="canceled"&&e.jsx(p,{variant:"outline",className:"border-destructive text-destructive hover:bg-destructive hover:text-destructive-foreground",onClick:()=>r(!0),children:"Cancel Subscription"})]})]})}),e.jsx(H,{value:"plans",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(P,{className:"bg-muted/50 mb-6",children:e.jsx(D,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ft,{className:"h-5 w-5 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Change your subscription plan"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select a new plan below. Your billing will be prorated for the time remaining in your current billing period."})]})]})})}),e.jsx(Pa,{currentPlanId:x.planId,onSelectPlan:j,billingCycle:x.billingCycle,isLoading:c.isPending})]})}),e.jsx(hs,{open:a,onOpenChange:r,children:e.jsxs(ts,{children:[e.jsxs(as,{children:[e.jsx(is,{children:"Are you sure you want to cancel?"}),e.jsx(ls,{children:"You will lose access to premium features at the end of your current billing period."})]}),e.jsxs(rs,{children:[e.jsx(cs,{children:"No, Keep Subscription"}),e.jsxs(ns,{onClick:()=>v.mutate({cancelAtPeriodEnd:!0,cancelReason:"User requested cancellation"}),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:[v.isPending&&e.jsx(oe,{className:"mr-2 h-4 w-4 animate-spin"}),"Yes, Cancel Subscription"]})]})]})})]})}function Qc(){return e.jsxs(ue,{title:"Subscription Management",children:[e.jsxs(mt,{children:[e.jsx("title",{children:"Subscription Management | LeLeKart Vendor Dashboard"}),e.jsx("meta",{name:"description",content:"Manage your vendor subscription plan, billing cycle, and account details."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Subscription Management"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage your subscription plan, billing cycle, and account details."})]}),e.jsx("div",{className:"mt-8",children:e.jsx(_c,{})})]})]})}function Wc(){return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Simple Test Page"}),e.jsx("p",{className:"mb-4",children:"This is a simple test page with no complex dependencies."}),e.jsx(p,{onClick:()=>alert("Button clicked!"),children:"Click Me"})]})}function Yc(){const[s,t]=h.useState({items:[],subtotal:"0.00",tax:"0.00",total:"0.00"}),a=()=>{const n={id:Date.now().toString(),productId:123,name:"Test Product",price:"29.99",quantity:1,imageUrl:null,variant:"Medium / Red"},x=[...s.items,n],m=x.reduce((i,o)=>i+parseFloat(o.price)*o.quantity,0),u=m*.08;t({items:x,subtotal:m.toFixed(2),tax:u.toFixed(2),total:(m+u).toFixed(2)})},r=n=>{const x=s.items.filter(i=>i.id!==n),m=x.reduce((i,o)=>i+parseFloat(o.price)*o.quantity,0),u=m*.08;t({items:x,subtotal:m.toFixed(2),tax:u.toFixed(2),total:(m+u).toFixed(2)})},d=(n,x)=>{if(x<1){r(n);return}const m=s.items.map(o=>o.id===n?{...o,quantity:x}:o),u=m.reduce((o,c)=>o+parseFloat(c.price)*c.quantity,0),i=u*.08;t({items:m,subtotal:u.toFixed(2),tax:i.toFixed(2),total:(u+i).toFixed(2)})};return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Independent Cart Page"}),e.jsx("p",{className:"mb-4",children:"This cart page uses its own state, not the CartContext."}),e.jsxs(P,{className:"mb-6",children:[e.jsxs(I,{children:[e.jsx(M,{children:"Cart Test"}),e.jsx(re,{children:"Add and remove items"})]}),e.jsxs(D,{children:[e.jsx(p,{onClick:a,className:"mb-4",children:"Add Test Product"}),e.jsx("div",{className:"space-y-4 mt-4",children:s.items.length===0?e.jsx("p",{children:"Cart is empty"}):e.jsxs(e.Fragment,{children:[s.items.map(n=>e.jsxs("div",{className:"flex justify-between items-center border-b pb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:n.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["$",n.price]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(p,{variant:"outline",size:"sm",onClick:()=>d(n.id,n.quantity-1),children:"-"}),e.jsx("span",{className:"mx-2",children:n.quantity}),e.jsx(p,{variant:"outline",size:"sm",onClick:()=>d(n.id,n.quantity+1),children:"+"}),e.jsx(p,{variant:"outline",size:"sm",className:"ml-2",onClick:()=>r(n.id),children:"Remove"})]})]},n.id)),e.jsxs("div",{className:"mt-4 pt-2 border-t",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["$",s.subtotal]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tax:"}),e.jsxs("span",{children:["$",s.tax]})]}),e.jsxs("div",{className:"flex justify-between font-bold",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["$",s.total]})]})]})]})})]})]})]})}const ge=({children:s,roles:t=[]})=>{const{user:a,isLoading:r}=qe(),[,d]=Ge();return h.useEffect(()=>{r||(a?t.length>0&&!t.includes(a.role)&&(a.role==="super_admin"?d("/"):d("/dashboard")):d("/login"))},[a,r,t,d]),r?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):a&&(t.length===0||t.includes(a.role))?e.jsx(e.Fragment,{children:s}):null};function Hc({newsletterEmail:s,setNewsletterEmail:t,newsletterStatus:a,newsletterLoading:r,handleNewsletterSubmit:d}){const{isVendorStore:n}=Fs();return n?e.jsxs(ga,{children:[e.jsx(de,{path:"/buyer-login",children:e.jsx(bn,{})}),e.jsx(de,{path:"/category/:slug",children:e.jsx(Ac,{})}),e.jsx(de,{path:"/",children:e.jsx(Ca,{})}),e.jsx(de,{children:e.jsx(Ca,{})})]}):e.jsxs(ga,{children:[e.jsx(de,{path:"/test-store",children:!1}),e.jsx(de,{path:"/test-cart",children:!1}),e.jsx(de,{path:"/simple-test",children:e.jsx(Wc,{})}),e.jsx(de,{path:"/independent-cart",children:e.jsx(Yc,{})}),e.jsx(de,{path:"/",children:e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("div",{className:"bg-indigo-600 py-2",children:e.jsx("div",{className:"container mx-auto px-4 text-center text-white text-sm font-medium",children:"Free shipping on orders over $50 • 30-day money-back guarantee"})}),e.jsx("header",{className:"sticky top-0 z-40 border-b bg-white/90 backdrop-blur-md border-gray-200",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-indigo-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),e.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),e.jsx("path",{d:"M16 10a4 4 0 0 1-8 0"})]}),e.jsx("span",{className:"text-xl font-bold",children:"ShopEase"})]}),e.jsxs("div",{className:"hidden md:flex relative w-full max-w-md mx-4",children:[e.jsx("input",{type:"text",placeholder:"Search for products...",className:"w-full py-2 pl-10 pr-4 rounded-lg border border-gray-300 bg-gray-50 text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[!1,e.jsxs(je,{href:"/login",className:"flex items-center text-gray-700 hover:text-indigo-600",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.jsx("span",{className:"ml-2 text-sm font-medium hidden sm:inline",children:"Account"})]}),e.jsxs("a",{href:"#",className:"flex items-center text-gray-700 hover:text-indigo-600",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),e.jsx("span",{className:"ml-2 text-sm font-medium hidden sm:inline",children:"Wishlist"})]}),e.jsxs("a",{href:"#",className:"flex items-center text-gray-700 hover:text-indigo-600 relative",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),e.jsx("span",{className:"ml-2 text-sm font-medium hidden sm:inline",children:"Cart"}),e.jsx("span",{className:"absolute -top-2 -right-2 bg-indigo-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:"3"})]})]})]}),e.jsxs("div",{className:"flex items-center py-2 overflow-x-auto scrollbar-hide",children:[e.jsx(je,{href:"/",className:"text-gray-700 hover:text-indigo-600 font-medium px-3 py-2 text-sm whitespace-nowrap mr-2",children:"Home"}),n?e.jsx("div",{className:"flex-1"}):e.jsxs("nav",{className:"flex items-center gap-4",children:[e.jsx(je,{href:"/category/new-arrivals",className:"text-gray-700 hover:text-indigo-600 font-medium px-3 py-2 text-sm whitespace-nowrap",children:"New Arrivals"}),e.jsx(je,{href:"/category/electronics",className:"text-gray-700 hover:text-indigo-600 font-medium px-3 py-2 text-sm whitespace-nowrap",children:"Electronics"}),e.jsx(je,{href:"/category/clothing",className:"text-gray-700 hover:text-indigo-600 font-medium px-3 py-2 text-sm whitespace-nowrap",children:"Clothing"}),e.jsx(je,{href:"/category/home-kitchen",className:"text-gray-700 hover:text-indigo-600 font-medium px-3 py-2 text-sm whitespace-nowrap",children:"Home & Kitchen"}),e.jsx(je,{href:"/category/sale",className:"text-indigo-600 font-medium px-3 py-2 text-sm whitespace-nowrap",children:"Sale"})]})]})]})}),e.jsx("section",{className:"relative",children:e.jsxs("div",{className:"w-full h-[400px] md:h-[500px] bg-gradient-to-r from-blue-600 to-indigo-700 flex items-center",children:[e.jsx("div",{className:"container mx-auto px-4 relative z-10",children:e.jsxs("div",{className:"max-w-xl text-white",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Summer Sale"}),e.jsx("p",{className:"text-xl mb-6",children:"Up to 50% off on selected items. Limited time offer."}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"#",className:"bg-white text-indigo-600 hover:bg-gray-100 px-6 py-3 rounded-lg font-medium",children:"Shop Now"}),e.jsx("a",{href:"#",className:"bg-transparent border border-white text-white hover:bg-white/10 px-6 py-3 rounded-lg font-medium",children:"Learn More"}),!1]})]})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/60 to-indigo-900/60 mix-blend-multiply"})]})}),e.jsx("section",{className:"py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx("h2",{className:"text-2xl font-bold mb-8 text-gray-900",children:"Shop by Category"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx("a",{href:"#",className:"group",children:e.jsxs("div",{className:"rounded-lg overflow-hidden bg-gray-100 aspect-square relative",children:[e.jsx("div",{className:"absolute inset-0 bg-indigo-600/10 group-hover:bg-indigo-600/20 transition-colors"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("span",{className:"bg-white/90 text-gray-900 px-4 py-2 rounded-full text-sm font-medium",children:"Electronics"})})})]})}),e.jsx("a",{href:"#",className:"group",children:e.jsxs("div",{className:"rounded-lg overflow-hidden bg-gray-100 aspect-square relative",children:[e.jsx("div",{className:"absolute inset-0 bg-indigo-600/10 group-hover:bg-indigo-600/20 transition-colors"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("span",{className:"bg-white/90 text-gray-900 px-4 py-2 rounded-full text-sm font-medium",children:"Fashion"})})})]})}),e.jsx("a",{href:"#",className:"group",children:e.jsxs("div",{className:"rounded-lg overflow-hidden bg-gray-100 aspect-square relative",children:[e.jsx("div",{className:"absolute inset-0 bg-indigo-600/10 group-hover:bg-indigo-600/20 transition-colors"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("span",{className:"bg-white/90 text-gray-900 px-4 py-2 rounded-full text-sm font-medium",children:"Home"})})})]})}),e.jsx("a",{href:"#",className:"group",children:e.jsxs("div",{className:"rounded-lg overflow-hidden bg-gray-100 aspect-square relative",children:[e.jsx("div",{className:"absolute inset-0 bg-indigo-600/10 group-hover:bg-indigo-600/20 transition-colors"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("span",{className:"bg-white/90 text-gray-900 px-4 py-2 rounded-full text-sm font-medium",children:"Beauty"})})})]})})]})]})}),e.jsx("section",{className:"py-12 bg-gray-50",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Featured Products"}),e.jsx("a",{href:"#",className:"text-indigo-600 font-medium hover:underline",children:"View All"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"aspect-square bg-gray-200"}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx("span",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded",children:"SALE"})}),e.jsx("button",{className:"absolute top-2 right-2 bg-white p-1.5 rounded-full text-gray-700 hover:text-red-500",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-sm text-gray-500 mb-1",children:"Electronics"}),e.jsx("h4",{className:"font-medium text-gray-900 mb-2 truncate",children:"Wireless Bluetooth Headphones"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"$89.99"}),e.jsx("span",{className:"text-sm text-gray-500 line-through ml-2",children:"$129.99"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),e.jsx("span",{className:"text-sm text-gray-700 ml-1",children:"4.5"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"aspect-square bg-gray-200"}),e.jsx("button",{className:"absolute top-2 right-2 bg-white p-1.5 rounded-full text-gray-700 hover:text-red-500",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-sm text-gray-500 mb-1",children:"Fashion"}),e.jsx("h4",{className:"font-medium text-gray-900 mb-2 truncate",children:"Men's Casual Shirt"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"$39.99"})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),e.jsx("span",{className:"text-sm text-gray-700 ml-1",children:"4.2"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"aspect-square bg-gray-200"}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx("span",{className:"bg-green-500 text-white text-xs font-bold px-2 py-1 rounded",children:"NEW"})}),e.jsx("button",{className:"absolute top-2 right-2 bg-white p-1.5 rounded-full text-gray-700 hover:text-red-500",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-sm text-gray-500 mb-1",children:"Home"}),e.jsx("h4",{className:"font-medium text-gray-900 mb-2 truncate",children:"Smart LED Light Bulb"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"$24.99"})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),e.jsx("span",{className:"text-sm text-gray-700 ml-1",children:"4.8"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"aspect-square bg-gray-200"}),e.jsx("button",{className:"absolute top-2 right-2 bg-white p-1.5 rounded-full text-gray-700 hover:text-red-500",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-sm text-gray-500 mb-1",children:"Beauty"}),e.jsx("h4",{className:"font-medium text-gray-900 mb-2 truncate",children:"Organic Face Serum"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"$32.99"})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),e.jsx("span",{className:"text-sm text-gray-700 ml-1",children:"4.7"})]})]})]})]})]})]})}),e.jsx("section",{className:"py-12",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"max-w-6xl mx-auto bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl overflow-hidden shadow-lg",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"p-8 md:p-12 flex flex-col justify-center",children:[e.jsx("div",{className:"text-white text-sm font-semibold uppercase tracking-wider mb-2",children:"Deal of the Day"}),e.jsx("h2",{className:"text-white text-3xl md:text-4xl font-bold mb-4",children:"Premium Noise-Cancelling Headphones"}),e.jsx("p",{className:"text-indigo-100 mb-6",children:"High-quality sound, all-day comfort, and incredible noise cancellation."}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center space-x-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"block text-3xl font-bold text-white",children:"12"}),e.jsx("span",{className:"text-indigo-200 text-sm",children:"Hours"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"block text-3xl font-bold text-white",children:"45"}),e.jsx("span",{className:"text-indigo-200 text-sm",children:"Minutes"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"block text-3xl font-bold text-white",children:"30"}),e.jsx("span",{className:"text-indigo-200 text-sm",children:"Seconds"})]})]})}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:"$149.99"}),e.jsx("div",{className:"text-2xl text-indigo-200 line-through",children:"$299.99"}),e.jsx("div",{className:"bg-white text-indigo-600 px-3 py-1 rounded-full text-sm font-bold flex items-center",children:"50% OFF"})]}),e.jsx("a",{href:"#",className:"mt-8 inline-block bg-white text-indigo-600 hover:bg-indigo-50 px-6 py-3 rounded-lg font-medium text-center shadow-md hover:shadow-lg transition-all w-full md:w-auto",children:"Shop Now"})]}),e.jsx("div",{className:"hidden md:flex items-center justify-center py-8",children:e.jsx("div",{className:"h-64 w-64 bg-white/20 rounded-full"})})]})})})}),e.jsx("section",{className:"py-12 bg-indigo-600",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-4 text-white",children:"Sign Up for Our Newsletter"}),e.jsx("p",{className:"text-indigo-100 mb-6 max-w-2xl mx-auto",children:"Get the latest updates on new products, sales, and special offers delivered right to your inbox."}),e.jsxs("form",{className:"max-w-md mx-auto flex flex-col sm:flex-row gap-3",onSubmit:d,children:[e.jsx("input",{type:"email",placeholder:"Your email address",className:"flex-grow px-4 py-3 rounded-lg focus:outline-none",required:!0,value:s,onChange:x=>t(x.target.value),disabled:r}),e.jsx("button",{type:"submit",className:"bg-white text-indigo-600 hover:bg-indigo-50 px-6 py-3 rounded-lg font-medium",disabled:r,children:r?"Subscribing...":"Subscribe"})]}),a==="success"&&e.jsx("div",{className:"mt-3 text-green-100 font-medium",children:"Subscribed! 🎉"}),a==="error"&&e.jsx("div",{className:"mt-3 text-red-200 font-medium",children:"Load Failed. Please enter a valid email."})]})}),e.jsx("footer",{className:"bg-white border-t border-gray-200",children:e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-indigo-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),e.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),e.jsx("path",{d:"M16 10a4 4 0 0 1-8 0"})]}),e.jsx("span",{className:"text-xl font-bold",children:"ShopEase"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Your one-stop shop for all your shopping needs. Quality products at affordable prices."}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"#",className:"text-gray-500 hover:text-indigo-600",children:e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),e.jsx("a",{href:"#",className:"text-gray-500 hover:text-indigo-600",children:e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M22.675 0h-21.35c-.732 0-1.325.593-1.325 1.325v21.351c0 .731.593 1.324 1.325 1.324h11.495v-9.294h-3.128v-3.622h3.128v-2.671c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.795.143v3.24l-1.918.001c-1.504 0-1.795.715-1.795 1.763v2.313h3.587l-.467 3.622h-3.12v9.293h6.116c.73 0 1.323-.593 1.323-1.325v-21.35c0-.732-.593-1.325-1.325-1.325z"})})}),e.jsx("a",{href:"#",className:"text-gray-500 hover:text-indigo-600",children:e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Shop"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-600 hover:text-indigo-600",children:"New Arrivals"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-600 hover:text-indigo-600",children:"Best Sellers"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-600 hover:text-indigo-600",children:"Sale"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-600 hover:text-indigo-600",children:"All Collections"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Customer Service"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-600 hover:text-indigo-600",children:"Contact Us"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-600 hover:text-indigo-600",children:"Shipping & Returns"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-600 hover:text-indigo-600",children:"FAQ"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-600 hover:text-indigo-600",children:"Track Order"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"About"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-600 hover:text-indigo-600",children:"Our Story"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-600 hover:text-indigo-600",children:"Sustainability"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-600 hover:text-indigo-600",children:"Store Locations"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-600 hover:text-indigo-600",children:"Careers"})})]})]})]}),e.jsx("div",{className:"pt-8 mt-8 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[e.jsxs("p",{className:"text-gray-500 mb-4 md:mb-0",children:["© ",new Date().getFullYear()," ShopEase. All rights reserved."]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("a",{href:"#",className:"text-gray-600 hover:text-indigo-600 text-sm",children:"Privacy Policy"}),e.jsx("a",{href:"#",className:"text-gray-600 hover:text-indigo-600 text-sm",children:"Terms of Service"}),e.jsx("a",{href:"#",className:"text-gray-600 hover:text-indigo-600 text-sm",children:"Cookie Policy"})]})]})})]})})]})}),e.jsx(de,{path:"/login",component:Nn}),e.jsx(de,{path:"/register",component:Pn}),e.jsx(de,{path:"/admin",children:e.jsx(ge,{roles:["super_admin"],children:e.jsx($n,{})})}),e.jsx(de,{path:"/vendors",children:e.jsx(ge,{roles:["super_admin"],children:e.jsx(Gn,{})})}),e.jsx(de,{path:"/vendors/:id",children:x=>e.jsx(ge,{roles:["super_admin"],children:e.jsx(Qn,{id:x.id})})}),e.jsx(de,{path:"/domains",children:e.jsx(ge,{roles:["super_admin"],children:e.jsx(Wn,{})})}),e.jsx(de,{path:"/domains/:id",children:e.jsx(ge,{roles:["super_admin"],children:e.jsx(Yn,{})})}),e.jsx(de,{path:"/subscriptions",children:e.jsx(ge,{roles:["super_admin"],children:e.jsx(Jn,{})})}),e.jsx(de,{path:"/analytics",children:e.jsx(ge,{roles:["super_admin"],children:e.jsx(Xn,{})})}),e.jsx(de,{path:"/users",children:e.jsx(ge,{roles:["super_admin"],children:e.jsx(Bc,{})})}),e.jsx(de,{path:"/settings",children:e.jsx(ge,{roles:["super_admin"],children:e.jsx(rc,{})})}),e.jsx(de,{path:"/dashboard",children:e.jsx(ge,{roles:["vendor"],children:e.jsx(On,{})})}),e.jsx(de,{path:"/products",children:e.jsx(ge,{roles:["vendor"],children:e.jsx(uc,{})})}),e.jsx(de,{path:"/product-categories",children:e.jsx(ge,{roles:["vendor"],children:e.jsx(gc,{})})}),e.jsx(de,{path:"/product-subcategories",children:e.jsx(ge,{roles:["vendor"],children:e.jsx(Nc,{})})}),e.jsx(de,{path:"/products/:id",children:x=>e.jsx(ge,{roles:["vendor"],children:e.jsx(pc,{id:x.id})})}),e.jsx(de,{path:"/orders",children:e.jsx(ge,{roles:["vendor"],children:e.jsx(vc,{})})}),e.jsx(de,{path:"/customers",children:e.jsx(ge,{roles:["vendor"],children:e.jsx(yc,{})})}),e.jsx(de,{path:"/store-design",children:e.jsx(ge,{roles:["vendor"],children:e.jsx(Tc,{})})}),e.jsx(de,{path:"/vendor-analytics",children:e.jsx(ge,{roles:["vendor"],children:e.jsx(ec,{})})}),e.jsx(de,{path:"/payment-settings",children:e.jsx(ge,{roles:["vendor"],children:e.jsx(Uc,{})})}),e.jsx(de,{path:"/marketing",children:e.jsx(ge,{roles:["vendor"],children:e.jsx(Kc,{})})}),e.jsx(de,{path:"/reports",children:e.jsx(ge,{roles:["vendor"],children:e.jsx(Gc,{})})}),e.jsx(de,{path:"/subscription",children:e.jsx(ge,{roles:["vendor"],children:e.jsx(Qc,{})})}),e.jsx(de,{children:()=>null})]})}function Jc(){const[s,t]=pt.useState(""),[a,r]=pt.useState(null),[d,n]=pt.useState(!1),x=async m=>{m.preventDefault(),r(null),n(!0);try{if(await new Promise(u=>setTimeout(u,800)),!s||!s.includes("@"))throw new Error("Invalid email");r("success"),t("")}catch{r("error")}finally{n(!1)}};return e.jsx(ql,{client:Ce,children:e.jsx(sn,{children:e.jsx(cn,{children:e.jsx(xn,{children:e.jsx(an,{children:e.jsxs($r,{children:[e.jsx(Xl,{}),e.jsxs("div",{className:"light",children:[e.jsx(hn,{}),e.jsx(Hc,{newsletterEmail:s,setNewsletterEmail:t,newsletterStatus:a,newsletterLoading:d,handleNewsletterSubmit:x})]})]})})})})})})}window.addEventListener("error",s=>{console.error("Global error:",s.error)});window.addEventListener("online",()=>{console.log("Application is online")});window.addEventListener("offline",()=>{console.log("Application is offline")});console.warn("VITE_APP_NAME environment variable is not set. Using default.");const Xc=()=>{if(typeof window>"u")return;console.log("Setting up mock API handlers for deployment environment");const s=window.fetch;window.fetch=async(t,a)=>{var d,n,x;const r=typeof t=="string"?t:t.url;if(!r.includes("/api/"))return s(t,a);if(console.log(`[Mock API] Request to: ${r}`),r.includes("/api/products")){const m=(d=r.match(/\/api\/products\/(\d+)/))==null?void 0:d[1];return m?new Response(JSON.stringify({id:parseInt(m),name:`Product ${m}`,description:"This is a mock product for the demo deployment",price:"29.99",colors:[{id:1,name:"Red",hex:"#ff0000",imageUrl:"https://placehold.co/400x400/ff0000/ffffff?text=Red"},{id:2,name:"Blue",hex:"#0000ff",imageUrl:"https://placehold.co/400x400/0000ff/ffffff?text=Blue"},{id:3,name:"Green",hex:"#00ff00",imageUrl:"https://placehold.co/400x400/00ff00/ffffff?text=Green"}],defaultImage:"https://placehold.co/400x400/dddddd/333333?text=Product",vendorId:1}),{headers:{"Content-Type":"application/json"},status:200}):new Response(JSON.stringify([{id:1,name:"T-Shirt",price:"19.99",image:"https://placehold.co/400x400/dddddd/333333?text=T-Shirt"},{id:2,name:"Hoodie",price:"39.99",image:"https://placehold.co/400x400/dddddd/333333?text=Hoodie"},{id:3,name:"Hat",price:"14.99",image:"https://placehold.co/400x400/dddddd/333333?text=Hat"}]),{headers:{"Content-Type":"application/json"},status:200})}if(r.includes("/api/auth"))return r.includes("/logout")?new Response(JSON.stringify({success:!0}),{headers:{"Content-Type":"application/json"},status:200}):r.includes("/login")||r.includes("/register")?new Response(JSON.stringify({user:{id:1,email:"demo@example.com",firstName:"Demo",lastName:"User",role:"vendor"},token:"mock-jwt-token"}),{headers:{"Content-Type":"application/json"},status:200}):new Response(JSON.stringify({id:1,email:"demo@example.com",firstName:"Demo",lastName:"User",role:"vendor"}),{headers:{"Content-Type":"application/json"},status:200});if(r.includes("/api/cart")){localStorage.getItem("server_cart")||localStorage.setItem("server_cart",JSON.stringify({items:[],subtotal:"0.00",tax:"0.00",total:"0.00"}));const m=JSON.parse(localStorage.getItem("server_cart")||"{}"),u=(a==null?void 0:a.method)||"GET";if(u==="GET")return new Response(JSON.stringify(m),{headers:{"Content-Type":"application/json"},status:200});if(u==="POST")try{const i=JSON.parse(((n=a==null?void 0:a.body)==null?void 0:n.toString())||"{}");m.items||(m.items=[]);const o=m.items.findIndex(v=>v.productId===i.productId&&v.variant===i.variant);o>=0?m.items[o].quantity+=i.quantity:m.items.push({...i,id:Date.now().toString()});const c=m.items.reduce((v,j)=>v+parseFloat(j.price)*j.quantity,0),l=c*.08;return m.subtotal=c.toFixed(2),m.tax=l.toFixed(2),m.total=(c+l).toFixed(2),localStorage.setItem("server_cart",JSON.stringify(m)),new Response(JSON.stringify({success:!0,cart:m}),{headers:{"Content-Type":"application/json"},status:200})}catch{return new Response(JSON.stringify({error:"Invalid request"}),{headers:{"Content-Type":"application/json"},status:400})}if(u==="PUT")try{const i=JSON.parse(((x=a==null?void 0:a.body)==null?void 0:x.toString())||"{}"),o=r.split("/").pop(),c=m.items.findIndex(j=>j.id===o);c>=0&&(m.items[c].quantity=i.quantity);const l=m.items.reduce((j,g)=>j+parseFloat(g.price)*g.quantity,0),v=l*.08;return m.subtotal=l.toFixed(2),m.tax=v.toFixed(2),m.total=(l+v).toFixed(2),localStorage.setItem("server_cart",JSON.stringify(m)),new Response(JSON.stringify({success:!0,cart:m}),{headers:{"Content-Type":"application/json"},status:200})}catch{return new Response(JSON.stringify({error:"Invalid request"}),{headers:{"Content-Type":"application/json"},status:400})}if(u==="DELETE"){const i=r.split("/"),o=i[i.length-1];if(o==="cart")return localStorage.setItem("server_cart",JSON.stringify({items:[],subtotal:"0.00",tax:"0.00",total:"0.00"})),new Response(JSON.stringify({success:!0}),{headers:{"Content-Type":"application/json"},status:200});const c=o;m.items=m.items.filter(j=>j.id!==c);const l=m.items.reduce((j,g)=>j+parseFloat(g.price)*g.quantity,0),v=l*.08;return m.subtotal=l.toFixed(2),m.tax=v.toFixed(2),m.total=(l+v).toFixed(2),localStorage.setItem("server_cart",JSON.stringify(m)),new Response(JSON.stringify({success:!0,cart:m}),{headers:{"Content-Type":"application/json"},status:200})}}return new Response(JSON.stringify({error:"Not implemented in demo mode"}),{headers:{"Content-Type":"application/json"},status:501})}};document.title="MultiVend - Multi-Tenant eCommerce Platform";const la=document.createElement("meta");la.name="description";la.content="A powerful SaaS platform for creating and managing single-vendor eCommerce websites with subscription-based pricing.";document.head.appendChild(la);console.log("Mounting React application...");Xc();const ka=document.getElementById("root");ka?(console.log("Root element found, rendering app"),Bl(ka).render(e.jsx(Jc,{}))):console.error("Root element not found! Check your HTML structure.");
